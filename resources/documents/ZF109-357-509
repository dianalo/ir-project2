<?xml version='1.0' encoding='UTF-8'?>
<DOC><DOCNO>  ZF109-357-509  </DOCNO><DOCID>09 357 509.andM;</DOCID><JOURNAL>Microprocessor Report  August 22 1990 v4 n14 p9(3)* Full Text COPYRIGHT MicroDesign Resources Inc. 1990.andM;</JOURNAL><TITLE>Graphics engine implements 3-D algorithms; gouraud shading andZ-buffering performed at up to 24Mpixels/sec. (Toshiba's TC8512 isthe first single-chip implementation of a Gouraud shading of 3-Dcurved surfaces for bit-mapped computer screens)</TITLE><AUTHOR>Thorson, Mark.andM;</AUTHOR><DESCRIPT>Company:   Toshiba America Electronic Components Inc. (products).andO;Product:   Toshiba TC8512 (Microprocessor) (design and construction).andO;Topic:     Graphics SystemsMicroprocessorsSpecificationsApplicationsInstruction SetsProcessor ArchitectureThree-Dimensional Graphics.andO;Feature:   illustrationcharttable.andO;Caption:   Block diagram of 8512-based graphics system. (chart)Command set for Toshiba TC8512 graphics engine. (table)Two methods for drawing tesselated surfaces. (chart)andM;</DESCRIPT><TEXT>Gouraud Shading and Z-Buffering Performed at up to 24 Mpixels/secandM;Toshiba's new TC8512 graphics engine, first sampled late last year, is thefirst single-chip hardware implementation of a Gouraud shading processor forrendering 3-dimensional curved surfaces on bitmapped displays.andP;  It also hasBresenham line drawing, for drawing lines that have the appearance ofconstant width at arbitrary angles of rotation.andP;  Hidden surface removal isprovided using a Z-buffer algorithm.andP;  A rectangular clipping window may bedefined anywhere within the screen coordinate system.andM;Performance for a single chip is 6 Mpixels/sec, for either line drawing orGouraud shading, based on a 12 MHz clock rate (soon to be available at 16MHz).andP;  Multiple chips can be used in parallel for performance up to 24Mpixels/sec.andP;  The maximum size of the frame buffer is 8192 x 8192 pixels.andP;  Ina single-chip configuration, up to 16 bits per pixel are supported.andP;  The chipcontains over 130,000 transistors and is implemented in a 1.2-micron CMOStechnology.andP;  It is available in a 144-pin PGA package, and soon will beavailable in a ceramic quad flat-pack.andM;Because the 8512 implements graphics algorithms in hardware, using multiple,high-bandwidth memories, it is much faster than software-basedimplementations.andP;  High-end graphics workstations also implement thesealgorithms in hardware, using ASICs and standard logic components, but theToshiba chip is the first off-the-shelf component to provide high-performanceGouraud shading.andP;  Toshiba sees their main competition as the Intel 860, whenused as an embedded graphics controller.andP;  (See micro-PR 4/89 p. 14 fordetails on the i860's graphics capabilities.) Note that unlike the i860, the8512 is a dedicated graphics engine, and does not have a general-purposeinstruction set.andM;Toshiba is not yet focusing on any particular market segment.andP;  They say theyare looking at all possible applications for high-performance 3D graphics,including workstations, PC expansion cards, arcade games, and even flightsimulators.andM;System ArchitectureandM;Four 16-bit buses give the 8512 its high throughput, as shown in Figure 1.andO;One bus is the interface to the host.andP;  The chip has a 16-level FIFO forholding commands and data downloaded from the host.andP;  The host can poll a busysignal to see if the chip is ready for the next set of commands, or the busysignal can generate a request to the host's DMA controller for downloading adisplay file with a minimum of host intervention.andM;The remaining three buses access the 1- and Z-buffers.andP;  The I-buffer boldsintensity values.andP;  These I-values can drive video DACS, in which case theydirectly control the brightness and color of pixels.andP;  Alternatively, they canbe used as an index into a color-lookup table, so that a small number of1-bits selects from a palette of colors with many bits for the DACS.andM;The Z-buffer holds depth values.andP;  These Z-values correspond to the distancefrom the observer to the closest surface at each pixel.andP;  When hidden surfaceremoval is enabled, the Z-values are used to control writes to both the I-and Z-buffers.andP;  Each new pixel's Z-value is compared with the existingZ-value for that pixel, and the write is inhibited if the new pixel isfurther from the observer than the old pixel.andM;To allow the Z-comparison to proceed at the same rate as the generation ofnew I-values, the Z-buffer is implemented in video RAM (VRAM).andP;  This is aspecial form of DRAM with a large on-chip shift register that can be loadedfrom the memory array.andP;  It has two ports: a random-access interface to thememory array, and a serial interface to the shift register.andP;  VRAMs wereoriginally developed for I-buffers, in which the drawing processor accessesthe memory array through the random-access port, and the video DACs aredriven from the serial port.andP;  The 8512 is designed to implement both the I-and Z-buffers in VRAM, using the serial port of the Z-buffer to read oldZ-values.andP;  A read and a write to the Z-buffer are performed in the sameamount of time as a write to the I-buffer, which allows the I- and Z-buffersto use memory chips of the same speed.andM;Two buses are used to access the random access ports of the I- and Z-buffers.andO;Both buses are bidirectional to allow the host to upload data through the8512.andP;  The third bus is an input-only bus for reading old Z-values.andP;  Bothrandom-access ports share a common 26-bit address bus.andP;  The bus can beconfigured as either a linear address or separate X and Y addresses.andO;External address multiplexers are required.andM;Command SetandM;The host interface consists of 16 data bits and 4 command bits.andP;  The commandbits determine how the 8512 interprets the data bits.andP;  The command bits areintended for connection to low address bits, so commands are invoked bywriting data to specific addresses.andP;  The commands are listed in Table 1.andM;The several flavors of commands for downloading the X-coordinate indicate thestart of an object, such as a line or triangle.andP;  The order of the I-, Z-, andY-coordinates is arbitrary, but each point must be terminated by a commandthat downloads an X-coordinate.andM;Two modes for drawing tessellated (tiled) surfaces are provided.andP;  In mode 1,the first point of the first triangle is a center, around which subsequenttriangles are drawn in a radial manner (see Figure 2).andP;  In mode 2, a strip oftriangles is drawn (see Figure 3).andP;  In both modes, each additional triangleafter the first one only requires the downloading of a single point.andM;Multiprocessor ConfigurationsandM;Four multiprocessor configurations are supported.andP;  Two of theseconfigurations achieve higher drawing rates by interleaving pixels.andP;  Forexample, two chips with separate sets of I- and Z-buffers can be configuredto handle the odd and even pixels.andP;  This doubles the drawing rate.andP;  The otherinterleaved configuration allows four-way interleaving, for quadruple theuniprocessor drawing rate.andM;A third configuration supports simultaneous interpolation in red, green, andblue using two chips.andP;  One chip handles the Z-buffer algorithm and one of theprimary colors, while the other chip handles the remaining two colors.andP;  Inthis configuration, the drawing rate is the same as for a single-chipconfiguration, but there are three I-values instead of just one.andP;  Typically,this would be used in a system where the I-buffers are used to drive thevideo DACs directly, without a color lookup table.andM;The fourth configuration uses two chips as source and destination addressgenerators for transferring rectangular blocks of pixels.andP;  These regions canbe scaled independently in X and Y, over a range from V64x to 64x.andM;ApplicationsandM;The 8512 is a highly integrated, dedicated processor for fast 3-D solidmodeling.andP;  Its clever use of 2-port VRAM is an elegant solution for Z-bufferbandwidth requirements.andP;  The flexible multiprocessor support allows a broadrange of price-performance points to be covered by a single device.andM;The major hurdle for Toshiba to overcome is software support.andP;  They areoffering a graphics technology that has been available for several years inboard-level products for high-end systems, but has never before appeared inthe high-volume, low-cost systems that would use a VLSI implementation.andM;In high-end workstations, the interface to the graphics hardware hastraditionally been a proprietary library of graphics calls provided by themanufacturer.andP;  More recently, high-level graphics interface standards, suchas PHIGS and GKS, have appeared.andP;  Today, both proprietary and standardinterfaces are in wide use, with neither threatening to render the otherobsolete.andP;  Applications that are highly sensitive to performance, such asCAD, tend to use proprietary interfaces because this allows the software toget close to the native machine.andP;  Less-sensitive applications tend to usestandard interfaces for portability among differing hardware.andM;Toshiba says that an interface for a workstation graphics standard couldeasily be supported, but they are not ready to commit to a specific interfaceat this time.andP;  They expect most application programs to talk directly to the8512, both because the command set is relatively simple and to allow maximumbandwidth between the application and the chip.andP;  Future versions are plannedwith an upward-compatible command set.andM;The present command set would be appropriate for PCs and arcade games, but itwould probably need to be extended to meet the demands of workstations.andP;  Thecommand interface forces all coordinates to integer positions, which rulesout shading algorithms that use fractional positions.andP;  High-end displays,such as those from Silicon Graphics, use fractional positions to eliminatesmall artifacts along polygon edges.andP;  Without fractional coordinatepositions, there is up to one pixel of uncertainty about the location of apolygon edge.andM;To avoid seeing cracks between the polygons of a solid shell, shadingalgorithms that do not use fractional arithmetic must shade every pixel alongthe computed edge of a polygon, even if the pixel is just barely grazed bythe edge.andP;  This produces single-pixel artifacts, in which a polygon thatcovers the center of a pixel loses it to a polygon that only touches acorner.andP;  Fortunately, the Toshiba interface has two unused command encodings,so it would be possible to retrofit this capability at a future date byassigning one of the encodings to carry the fractional part of a coordinate.andO;</TEXT></DOC>