<?xml version='1.0' encoding='UTF-8'?>
<DOC><DOCNO>  ZF109-409-243  </DOCNO><DOCID>09 409 243.andM;</DOCID><JOURNAL>Hewlett-Packard Journal  August 1990 v41 n4 p85(8)* Full Text COPYRIGHT Hewlett Packard 1990.andM;</JOURNAL><TITLE>A 300-MHz, variable-transition-time pulse generator outputsection. (Hewlett-Packard's 8130A)</TITLE><AUTHOR>Schinzel, Peter; Eberle, Volker; Steinbach, Gunter.andM;</AUTHOR><SUMMARY>Hewlett-Packard's 8130A 300-MHz variable-transition-time pulsegenerator has an output system made up of the slope generator andthe output amplifier: the slope generator uses a custom GaAs ICfor the fast slopes when producing programmable rise and falltimes, and the output amplifier is a custom linear bipolar IC.andO;The four basic blocks in the slope generator are the input buffer,fast slope generator and slow slope interface, slow slopegenerator and level shifter and impedance converter.andP;  Accuracyerrors caused by leakage and/or base currents are avoided bydecoupling the ramp using an impedance converter with very highinput impedance and low output impedance and then passed to adifferential amplifier with current feedback.andP;  Minimum transitiontime, capacitive step, variable-gain linear output amplifier,current handling at speed and device breakdown voltage aredescribed.andM;</SUMMARY><DESCRIPT>Company:   Hewlett-Packard Co. (products).andO;Ticker:    HWP.andO;Product:   HP8130A (Test equipment, electronic) (design and construction).andO;Topic:     Integrated Circuit FabricationVery High Speed Integrated CircuitsCircuit DesignAutomatic Test EquipmentInstrumentsSemiconductor Production EquipmentGallium Arsenide Semiconductors.andO;Feature:   illustrationchart.andO;Caption:   Block diagram of the slope generator of the HP8130A pulsegenerator. (chart)Basic slow slope generator. (chart)Slow slope generator of the HP 8130A pulse generator. (chart)andM;</DESCRIPT><TEXT>[FIGURES HAVE BEEN OMITTED]andM;THE OUTPUT SYSTEM of the HP 8130A 300-MHZ, variable-transition-time pulsegenerator consists of the slope generator and the output amplifier.andP;  Theprogrammable rise and fall times are produced by the slope generator, whichuses a custom GaAs IC for the fast slopes.andP;  The output amplifier is a customlinear bipolar IC.andM;Slope GeneratorandM;A simplified block diagram of the slope generator is shown in Fig.andP;  1.andP;  Thefour basic blocks are the input buffer, the fast slope generator and slowslope interface, the slow slope generator, and the level shifter andimpedance converter.andP;  The purpose of the slope generator is to generate asignal that combines stable amplitude with variable rise and fall times.andM;The incoming signal from the timing board is single-ended and has EECLlevels.andP;  The output signal has programmable rise and fall times from 600 psto 100,us.andP;  The output amplitude is adjustable from 1.5V to 1.8V.andM;In the input buffer the signal is split into a slow slope signal path(transition times from 5 ns to 100,us) and a fast slope signal path.andP;  Thesplit was necessary to achieve very fast slopes (below 1 ns) andhigh-precision slopes for transition times less than 50 ns at the same time.andO;The major goals for the slow slope generator were high transition-timeaccuracy and high linearity.andP;  The major goals for the fast slope generatorwere fast transition times and a high maximum transfer frequency.andM;Input BufferandM;The input buffer is built with standard components on a printed circuit boardusing surface mount technology.andP;  This technology was chosen to minimize theparasitics (stray capacitances and series inductances) on the printed circuitboard.andP;  The input signal has transition times less than 600 ps and a voltageswing of 600 mV.andP;  The output to the fast slope generator has a voltage swingof 1.6V and transition times less than 650 ps.andP;  The edges of the slow slopeoutput are about 1 ns and the output swing is 600 mV.andM;Slow Slope GenerationandM;The design goals for the slow slope generator were:andM;*  Total range 5 ns to 100 ILSandM;*  Leading and trailing edges independently programmableandM;*  Edge ratio 20:1 within one rangeandM;*  Nonlinearity of slopes less than 2% for slopes greater than 50 ns and lessthan 5% for slopes between 5 ns and 50 nsandM;* Slope accuracy better than 5%.andM;Usually, slopes are generated by charging a capacitor with a constant current(see Fig.andP;  2).andP;  The charging current IL&quot; corresponds to the leading edge of apulse and the discharging current [I.sub.TRE] corresponds to the trailingedge.andM;To limit the voltage on the ramp capacitor [C.sub.r], a diode bridge is usedin front of the capacitor.andP;  This bridge serves as a switch controlled by theinput step, and is in balance when the voltage [V.sub.r] at the capacitor hasreached the input level.andP;  The signal source must have low output impedance toavoid exponential transitions like an RC network's, so an emitter-followeroutput is used.andM;Elimination of OffsetandM;In the HP 8130A, to avoid accuracy errors caused by leakage and/or basecurrents, the ramp is decoupled by an impedance converter with very highinput impedance and low output impedance and then fed to a differentialamplifier with current feedback (see Fig.andP;  3).andP;  The feedback in this stage islarge enough to allow linear operation without degradation of the slopes.andO;The other input of the differential amplifier is held at dc.andP;  Thus, thesingle-ended input voltage is converted to differential output currents.andM;The currents ILM and ITM are varied to achieve continuous variation of theleading and trailing edges, respectively.andP;  The levels at the ramp node alsovary because of the series resistance of the diodes.andP;  This can be seendirectly at the output nodes OUT1 and OUT2 as an error in the output signal.andO;To avoid this effect, the other input of the differential amplifier is alsoconnected to a diode bridge.andP;  This second bridge is controlled by currentsequal to ILEE and IT&quot;.andP;  Slight mismatches of the diode bridges can beadjusted very accurately.andP;  The remaining common-mode offset at theamplifier's inputs cannot be seen at its outputs.andM;Minimum Transition TimeandM;The time during which the ramp capacitor [C.sub.r] is charged by a current Ito some voltage V is given by:andM;t = [C.sub.r.V/I]andM;All three parameters [C.sub.r], V, and I contribute to the quality of theramp.andM;The ramp can never be faster than the original input signal because thebridge will immediately balance and the voltage at the ramp node will followthe input signal.andP;  The speed of the controlling edge is given by the slewrate of the previous circuitry, so the absolute minimum input transition timeis achieved at the lowest value of V. On the other hand, a low voltage swingat the ramp node calls for large gain in the following amplifiers, whichdecreases the bandwidth.andP;  Also, the diodes of the bridge have seriesresistance, and whenever the bridge balances, some rounding of the edgesoccurs, degrading performance.andP;  The amount of this rounding is constant for agiven F, and I, and therefore is relatively smaller for larger V. In view ofthese effects, the selection of an optimum value of V involves a trade-offbetween speed and linearity.andM;As can be seen from the equation above, the minimum transition time occursfor the maximum charging current.andP;  The limitation here is also given by thevoltage drop across the diodes' series resistance (and, of course, by thecurrent capability of the associated devices).andP;  The diode bridge is chosenfor an adequate compromise between minimum series resistance and minimumcapacitance [C.sub.s] (see &quot;Capacitive Step&quot; below) at reasonable cost.andP;  AGaAs bridge would have met the technical requirements but was found tooexpensive.andP;  Therefore, an HP Schottky quad packaged as a surface mount devicewas selected.andM;The values selected for the ramp parameters are [C.sub.r] = 30 pF, V = 2.4V,and I = 12.5 mA, giving a rise time of:andM;[t.sub.r] = 0.8(30 pF)(2.4V)(/12.5 mA) = 4.6 ns The factor 0.8 accounts forthe measurement of transition times between the 10% and 90% amplitude levels.andM;For a given V and I, the minimum transition time is achieved if thecapacitance is as small as possible.andP;  The total capacitance is the sum of thelumped capacitance and several parasitics.andP;  Since the parasitics are processdependent and temperature sensitive, they need to be kept as low as possible.andO;To keep all parasitic reactances (series inductances as well as parallelstray capacitances) low, the slow slope generator is implemented usingsurface mount technology.andM;The complete slope range of 5 ns to 100 us is achieved by adding additionalcapacitors.andP;  Each range is a factor of 10 higher than the previous one, sothe additional capacitor is nine times larger.andP;  An edge ratio of 20:1 withinone range can be achieved by setting the charging currents to a ratio of20:1.andP;  This leads to an overlap of the ranges with a factor of two (Fig.andP;  4).andM;The additional capacitors are switched into the circuit by transistors.andO;However, when the transistor switches are off, they add several picofarads ofparasitic capacitance to [C.sub.r].andP;  To keep the parasitic part of the total[C.sub.r] as low as possible, the switches are connected at a less sensitivenode, that is, at the diode bridge on the opposite side of the differentialamplifier (Fig.andP;  3).andP;  This works because the second slope range-50 ns to 1[micro-m]-calls for a 300-pF ramp capacitor, large enough that the parasiticcapacitance is a small percentage of the total capacitance and does no harmto the accuracy and drift performance.andP;  This is also true for the higherranges.andP;  Thus, for slopes from 5 ns to 100 ns, the pulse input signal isapplied to the slope generator at its &quot;fast input&quot; IN1, keeping the &quot;slowinput&quot; IN2, at dc.andP;  For slopes between 50 ns and 100 [micro-m] the pulseinput signal is applied to the slow input, keeping the fast input at dc.andP;  Therange switching is done at the slow input.andM;Capacitive StopandM;In practice, between the input and the output of the bridge there is someparasitic capacitance because of the capacitance of the bridge diodes and thestray capacitance of the board.andP;  Thus, the input pulse step is also visibleat the ramp node with magnitude:andM;[V.sub.C] = [C.sub.s] / [C.sub.s] + [C.sub.r] ,andM;[V.sub.in]andM;Typical values are [C.sub.s] = 3 pF, [C.sub.r] = 30 pF, and [V.sub.C] =0.1[V.sub.in].andP;  This is a huge error and cannot be tolerated.andP;  C., hasalready been minimized, and C, cannot be increased without degrading the fasttransition times.andP;  The only solution is to compensate for this effect.andP;  Thisis done by coupling the complement of the input signal through a capacitor ofthe same value as C, directly to the ramp node (see Fig.andP;  5).andM;Fast Slope GenerationandM;The fast slopes are generated by a custom GaAs IC.andP;  On this chip are twoswitched, direct-coupled differential amplifiers, a diode bridge, two sensediodes, two diodes that feed in the slow slope signal, and output sourcefollowers (see Fig.andP;  6).andP;  The IC is mounted on a thick-film hybrid which alsocontains the level shifter and the output amplifier.andP;  The gallium arsenideprocess is the same as the one used for the output amplifier of the HP 8131Apulse generator (see article, page 79).andM;The design goals for the fast slopes were: N Programmable transition timesfrom 600 ps to 10 ns forandM;pulse widths greater than 1.5 ns.andP;  Leading and trailingandM;edges independently programmable for transition timesandM;longer than 2 ns.andP;  N Nonlinearity less than 5%.andP;  N Differential output swingadjustable between 1.5V andandM;1.8v.andM;As mentioned above, the rise and fall times are determined independently by1, and I2- The disadvantage of this circuit is that the amplitude and thedifferential offset at the outputs are functions of the voltages across theclamping diodes.andP;  This means that these parameters are functions Of[I.sub.1],[I.sub.2], and temperature.andP;  To compensate for this, two sensediodes [CR.sub.I1], and [CR.sub.I2] are integrated on the IC.andP;  [CR.sub.I1],carries the current [I.sub.1] and [CR.sub.I2] carries [I.sub.2].andP;  Thevoltages [V.sub.CL] and [V.sub.CL]+ are then:andM;[V.sub.CL] = [V.sub.1] + V([CR.sub.I1])andM;[V.sub.CL]+ = [V.sub.2] - V([CR.sub.I2])andM;[V.sub.ampl] = [V.sub.2]- [V.sub.1]andM;where [V.sub.2] determines the high level of OUT or OUT/ and [V.sub.1],determines the low level.andP;  V, is a fixed voltage.andP;  V2 is adjustable to varythe output amplitude [V.sub.ampl] between 1.5V and 1.8V.andP;  This makes theoutput amplitude independent of the forward voltages of the clamping diodes.andO;The only disadvantage of this circuit is that the differential offset of theoutput voltages is a function of the ratio of [I.sub.1] and [I.sub.2].andP;  Theoffset is zero only if I, equals 2 (rise time equals fall time).andP;  The offset[V.sub.offs] is equal to:andM;[V.sub.offs] = [V(CR.sub.I1]) -  V([CR/sub.I2])andM;This offset must be canceled because the linear output amplifier, which isdriven by the slope generator, is extremely sensitive to overdrive,especially for slopes between 1.5 ns and 5 ns.andP;  To cancel the offset,[V.sub.offs] is fed into the level shifter as an additional control signal.andO;This causes the differential offset between the shifted voltages at OUT andOUT/ to be zero.andP;  Assuming ideal matching of all diodes, the output signal isnow independent of the currents [I.sub.1], [I.sub.2], and temperature.andM;Slow Slope interfaceandM;The slow slope interface of the fast slope generator connects the slow slopesignal path with the fast slope signal path.andP;  The main problem in the designof the interface was to avoid degrading the fast slopes when the fast slopesignal path is turned on.andP;  The problem was solved by using small Schottkydiodes, integrated on the slope IC itself, to minimize parasitics.andM;If the fast slope path is operating, the diodes are reverse-biased.andP;  When theslow slope signal is being fed into the IC, the driver of the fast slopegenerator is turned off.andP;  The load currents I, and 12 Of the fast slopegenerator are equal (typically 3 mA) and forward-bias the interface diodes.andO;The slow slopes are fed in by the forward-biased Schottky diodes.andM;Level Shifer and impedance ConverterandM;Because the output amplifier floats with the programmable output offset, alevel shifter with a variable shift voltage is necessary.andP;  The input currentof the level shifter has to be as small as possible, because every inputcurrent causes an error in the transition times.andP;  The output impedance has tobe less than 50(l.andM;The impedance converter is realized by a FET on the IC itself to reduceparasitics and minimize cost.andP;  The FET is used as a source follower.andM;This solution has two disadvantages.andP;  First, V, is a function of temperature,which means that the output level is a function of temperature.andP;  Second, theslope nonlinearity tends to increase dramatically because of the droop of thesource follower.andP;  It was absolutely necessary to avoid these disadvantages,especially the second.andM;The design goals for the level shifter and impedance converter were: n  Shiftvoltage 5V to 10V N  Distortion less than 0.5% for rise times greater than 50andM;ns and less than 1.5% for rise times between 500 ps andandM;50 ns n  Minimum transition times less than 300 ps.andM;Fig.andP;  9 is a schematic diagram of the level shifter and impedance converter.andO;As already mentioned, at the input of the level shifter is a FET used as asource follower.andP;  To achieve stable operation (independent of the shiftvoltage) most of the source current (about 40 mA) flows through the on-chipcurrent source.andP;  To get a variable shift voltage the current through R, isadjustable between 6 mA and 11 mA.andP;  The shift voltage is:andM;[V.sub.shift] = V([R.sub.2]) + [V.sub.gs](Q.sub.1)andM;= [I.sub.shift][R.sub.4].andM;This means that [V.sub.shift] depends only on the accuracy of [I.sub.shift],[R.sub.4], and [U.sub.1].andP;  The voltage drop across [R.sub.1] and [R.sub.3]negligible.andP;  U1 is a high-precision, high-speed operational amplifier.andP;  Itforces a differential input voltage of zero volts at its inputs bycontrolling the current source [I.sub.Lv], that is, by controllingV([R.sub.2]).andP;  For high frequencies, the voltage gain [G.sub.HF] of the levelshifter is determined by the source follower ([G.sub.HF] andless;1)- To avoiddistortion, the level shifter gain must not vary with frequency.andP;  Therefore,the input signal is attenuated by the resistive divider consisting of[R.sub.1], [R.sub.3], [R.sub.V1].andM;[R.sub.3/], and [R.sub.1/] before it goes to the operational amplifier.andP;  Thiskeeps U1 from forcing (by varying [I.sub.LV]) the output swing to equal theinput swing for low frequencies.andP;  This also means that although thelow-frequency source follower gain varies with frequency (this effect isknown as droop), U1 forces (by varying [I.sub.LV]) the level shifter gain toremain [G.sub.HF].andP;  With [R.sub.V1], the gain forced by U1 at low frequenciesis adjusted to be equal to the high-frequency gain [G.sub.HF] of the FET.andM;To reduce distortions at the frequency where U1 starts to work, [C.sub.V1] isadjusted according to:andM;[R.sub.1 + R.sub.3])[C.sub.1par] = [R.sub.4 (C.sub.2par] +andM;[C.sub.V1])andM;[R.sub.V1] andgt;andgt; [R.sub.1] + [R.sub.3]andM;This means that both input time constants of the operational amplifier areequal.andP;  [C.sub.1.par] and [C.sub.2par].andP;  are parasitic capacitances of theprinted circuit, U1, the hybrid, and the current source.andP;  Because the sum ofR, and R3 is larger than R4, the additional capacitance [C.sub.V1], isnecessary at the negative input of U1 (or U1/) to equalize the timeconstants.andM;C2 reduces the dynamic output resistance at high frequencies.andP;  This isnecessary to feed the following linear amplifier with high-frequency signals.andO;[R.sub.1] and R1/ are needed for decoupling the signal paths at highfrequencies and to avoid parasitic oscillations.andP;  Because R,  R,/) is on theIC and varies with temperature, an additional resistor R3  R3/), ten timeslarger, is added to make [G.sub.HF] more stable.andM;In the fast slope mode, the currents [I.sub.shift] and [I.sub.shift/] areslightly different to compensate for the input offset of the fast slopegenerator.andP;  The difference is adjusted so thatandM;[V.sub.offs] = [V.sub.shift] -[V.sub.shift/.]andM;Variable-Gain Linear Output AmplifierandM;The output amplifier of a pulse generator needs good dc linearity and highspeed over a wide range of gain settings, and must handle high outputcurrents and voltages.andP;  The linear amplifier in the HP 8130A directlygenerates the signals that appear at the instrument's output terminals, so itdetermines many of the instrument's specifications.andP;  Design goals that wereof particular concern during the development of the amplifier were:andM;* Output amplitude 0.1.andP;  Vp-p to 5V p-pina +/-5V windowandM;* Minimum output rise time 900 psandM;* Output high/low level drift with temperature less than 2% of amplitudeandM;* Output transition nonlinearity less than 3%.andM;Current Handling at SpeedandM;The output pulses must be delivered into a 50f) external load in parallelwith a 5012 termination in the instrument.andP;  This means that the amplifiermust deliver output current swings up to 200 mA.andP;  Offsets up to SV can begenerated by adding a dc current at the amplifier output, so the IC need only&quot; handle the pulse part of the instrument output.andM;As in earlier HP pulse generators, the BP 8130A's output amplifier isconfigured as a transconductance amplifier, turning an input voltage pulseinto an output current.andP;  This linear amplifier was designed in HP's mature5-GHz bipolar IC technology to minimize the risk of unpleasant surprises withcurrent handling and speed requirements.andM;Device Breakdown VoltageandM;Modem fast bipolar technologies have fairly low breakdown voltages, and inthe case of the linear amplifier the collector-to-emitter breakdown voltagespecification of 6V was the most critical.andP;  Obviously, this clashes with a10V output voltage range.andP;  Floating the whole chip, along with all itssupplies and bias voltages, with the output offset reduces the [V.sub.ce]requirement to about 6V, equal to the maximum output pulse amplitude plus 1Vfor [V.sub.be] and a minimal safety margin.andP;  However, nothing prevents theuser from letting the instrument output run open so that the amplifier sees a50 Ohms load instead of the specified 25 Ohms, thus doubling the outputswing.andM;Two more measures had to be combined with the floating supplies to relievethis problem.andP;  A GaAs common-gate stage at the output with a drain-to-sourcebreakdown voltage of 10V has ample margin to handle normal operatingconditions, and a peak detector opens a disable relay when the outputamplitude exceeds about 7V p-p, taking care of the open-output case.andM;Amplitude Range, Linearity, and StabilityandM;The linear amplifier is configured as an emitter-degenerated differentialpair with a two-quadrant analog multiplier cell on top (see Fig.andP;  10).andP;  Thedifferential pair [Q.sub.1], [Q.sub.2] acts as a precise, linearvoltage-to-current converter.andP;  The multiplier cell[Q.sub.3],[Q.sub.4],[Q.sub.5], [Q.sub.6] takes care of the output amplitudeadjustment since any current fed into its control port V is subtracted fromthe differential pair's collector currents on their way to the output padsOUT and OUT/.andM;Unfortunately, when driven with tail currents switched all the way from sideto side, these multiplier cells are only linear and dynamically well-behavedover a gain range of about 1 to 1/3 (a pin of 1 means that all thedifferential-pair current goes to the output pads).andP;  This is a far cry fromthe gain range specification of 50:1.andM;The solution to the gain range problem is to use three binary-weightedamplifier/multiplier combinations in parallel (only one is shown in Fig.andO;10), each running at a gain of either 0  off) or 1/3 to 1 (on).andP;  Theircurrents are 4/7, 2/7, and 1/7 of the 200-mA total.andP;  All three together coveramplitudes of 5V to 5V/3 = 1.667V.andP;  Switching the largest one off results inamplitudes from 5V x 3/7 = 2.86V to 5V x 1/7 =  .71V, and the smallest onealone covers 5V/7 = 0.71V to 5V/21 = 0.24V.andP;  Finally, an external attenuatortakes care of the reduction down to the minimum amplitude of O.1V.andM;An amplifier/multiplier stage is switched off by sourcing enough current intoits multiplier control input to force its gain to 0.andP;  Obviously, at thatgain, linearity is not a concern anymore.andP;  All stages that are on, that is,have a gain greater than zero, are run at the same gain to avoid settlinganomalies.andM;Correction is required to meet the drift specification of andless;2% over a 50'Ctemperature range.andP;  In the linear amplifier, the temperature coefficient ofthe base current error is reduced by a feedback loop that uses the externalop amp U1 as well as two on-chip dummy transistors [Q.sub.7] and [Q.sub.8]running at the same current densities as the amplifier and multipliertransistors, respectively.andM;AcknowledgmentsandM;The authors would like to take this opportunity to thank all of the peopleinvolved in the project.andP;  Particular thanks go to HP's Microwave TechnologyDivision, especially to Allan Armstrong, who designed the GaAs FET cascodeand provided significant support in the design of the slope IC, and to DonMontgomery and Matt Borg, who tested the GaAs ICs.andP;  The hybrid circuit ismanufactured and tested at HP's Colorado Springs Technology Center.andP;  Specialthanks to Dale Pittock for his contributions to the testing andcharacterization of the hybrid.andO;</TEXT></DOC>