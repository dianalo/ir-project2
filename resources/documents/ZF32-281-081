<?xml version='1.0' encoding='UTF-8'?>
<DOC><DOCNO> ZF32-281-081 </DOCNO><DOCID>07 366 230</DOCID><JOURNAL>Microprocessor Report  June 1989 v3 n6 p10(3)* Full Text COPYRIGHT MicroDesign Resources Inc. 1989.andM;</JOURNAL><TITLE>Motorola's 68332 eliminates glue logic. (includes related articleon development tools.)andM;</TITLE><DESCRIPT>Company:   Motorola Inc. (products).andO;Ticker:    MOT.andO;Product:   Motorola 68332 (Microprocessor) (design and construction).andO;Topic:     MicroprocessorsProcessor ArchitectureSoftware Design.andO;Feature:   illustrationphotographchart.andO;Caption:   68332 pin functions. (chart)andM;</DESCRIPT><TEXT>Motorola's 68332 Eliminates Glue LogicandM;Figure 1 shows the pin functions of the 68332.andP;  Even with the 132-pinpackage, there are not enough pins to allow one to be dedicated to everydesired function, so some pins are shared.andP;  The configuration is determinedat reset by the state of the data bus lines; each bit of the data buscontrols the configuration of a particular group of pins.andP;  the configurationcan also be modified under software control.andM;Bus InterfaceandM;The external bus is similar to the 68020 and 68030, including multimasterarbitration and dynamic bus sizing, but with only 16 data bits and 24 addressbits.andP;  Slow 6800-style bus cycles are also supported, as in the 68000.andM;The external bus can operate in an asynchronous mode, just like the 68020 and68030 processors.andP;  Two &quot;data size acknowledge&quot; signals,/DSACKO and /DSACK1,control the size and timing of the transfer.andP;  As long as neither is asserted,wait states are generated.andP;  The cycle is completed inresponse to either orboth of these two signals being asserted.andP;  The addressed device indicates itswidth (8 or 16 bits) by which of these signals it asserts.andP;  If, for example,a 16-bit transfer is attempted to an 8-bit device, the CPU will automaticallyperform two byte-wide transfers.andM;External bus cycles normally require a minimum of three clock cycles.andO;However, if the on-chip chip-select logic is used, a two-clock bus cycle,similar to the &quot;synchronous&quot; bus cycle option provided by the 68030, can beselected.andP;  In this case, the external /DSACK signals are ignored, and the buswidth is determined by how the chip select logic is programmed.andP;  Keeping upwith this two-clock transfer requires very fast external memory or peripheraldevices, however, Access time from address-out to data-in is only 55 ns, andaddress strobe is asserted for a mere 40 ns (with a 16.67-MHZ clock).andP;  Theon-chip RAM does perform two-clock bus cycles.andM;The 68332 is designed to eliminate the need for &quot;glue&quot; logic in mostapplications.andP;  There are 12 chip-select outputs.andP;  At reset, one chip selectis enabled for an address range starting at 0 to enable the boot ROM.andP;  Thefollowing characteristics can be individually programmed for each chipselect:andM;* Address range, with block size of 2 Kbytes to 1 Mbyte; starting addressmust be multiple of block sizeandM;* Bus cycle length of 2 to 15 clock cycles, or terminated by external DSACKsignalsandM;* 8-bit or 16-bit transfer mode, or transfer mode determined by externalDSACK signalsandM;* Enabled for read only, write only, or bothandM;* enabled by address strobe or data strobeandM;* Enabled for particular access type (user, supervisor, or CPU space)andM;In addition, any of the chip selects can be programmed to provide aninterrupt acknowledge for a particular device to tell the CPU to use thestandard auto-vector service routine address.andP;  Seven of the chip selectoutputs can also be used as simple parallel output port bits.andM;Because of the sharing of pin functions, five of the programmable chip selectoutputs are sacrificed if all 24 bits of the address bus are needed.andO;However, the availability of the chip select outputs often eliminates theneed for the high-order address bits off-chip.andM;On-Chip TimersandM;Last month's article described the 68332's sophisticated on-chip timer unit.andO;In addition, three simpler, special-purpose timers are included on the chip.andM;Two watchdog timers are provided.andP;  One generates BERR (bus error) if noacknowledge is received within a programmable time limit of 8 to 64 clockcycles.andP;  The other is a software watchdog timer, which can automaticallyreset the system if the software fails to periodically service it.andP;  To resetthe watchdog timer, the value $55 followed by the value $AA must be writtento the service register.andP;  The watchdog timeout period can be set to any ofeight values, ranging from 2.sup.9 to 2.sup.24 clock cycles (30 [mu]s to 1 sat 16.67 MHz).andP;  A spurious interrupt detector is also provided, which assertsBERR if no response is received to an interrupt acknowledge cycle.andP;  Thesefunctions enhance system reliability without requiring any external hardware.andM;A simple periodic interrupt timer is also provided.andP;  The period betweeninterrupts can be set as short as 122 [mu]s or as long as 16 seconds,with a16.67-MHz clock.andM;Development SupportandM;The 68332 includes several innovative functions to support softwaredebugging.andP;  The most unusual is a full debug monitor implemented inmicrocode.andP;  No software support is required.andP;  This monitor interfaces to anexternal terminal or computer via a simple synchronous serial link, which hasits own dedicated I/O pins.andP;  Functions provided by the monitor include:andM;* Read or write CPU registerandM;* Read or write system registerandM;* Read or write memory locationandM;* Dump memory blockandM;* Fill memory blockandM;* Reset peripheralsandM;* Execute patch (branch to subroutine and exit debug mode)andM;* Exit debug modeandM;The debug monitor is entered by executing the &quot;background debug&quot; instruction,by asserting the hardware breakpoint line (described below), or when a doublebus fault occurs (such as bus error while in the bus error service routine).andO;It can be disabled at reset to prevent accidental activation.andM;Hardware breakpoints are supported via the BKPT input pin.andP;  Externalcomparators are required to detect an access to the desired breakpointaddress.andP;  When an address match occurs, BKPT is asserted by the externalcomparators.andP;  For data accesses, this causes a breakpoint exception as soonas the current instruction is completed.andP;  For instruction fetches, on theother hand, the breakpoint request is copied into an extra bit in theinstruction pipeline.andP;  when (and if) the instruction is actually executed,the breakpoint exception is triggered.andP;  This approach eliminates spuriousbreakpoints due to prefetching.andP;  When a breakpoint exception occurs, the CPUeither activates the debug monitor or calls a user-supplied exceptionhandling routine.andM;Two signals, IPIPE and IFETCH, are provided to allow external hardware toeasily track the instruction pipeline.andP;  These signals can be used by logicanalyzer hardware to allow tracing of actual execution activity, rather thanexternal bus activity.andM;Motorola has specified a standard pin-out for an 8-pin &quot;debug&quot; connector tomake these signals available to external equipment.andP;  By including thisconnector, a powerful debugging capability is easily accessed, and verylittle additional cost is added to the system.andM;The inclusion of on-chip peripherals and RAM can make it difficult to followthe system's operation with a logic analyzer.andP;  To ease this problem, the68332 provides &quot;show&quot; cycles.andP;  When enabled by a control register bit, theexternal bus signals are driven to reflect the state of the internal buses.andO;Address strobe is not asserted to distinguish such cycles from normalexternal accesses.andM;ConclusionsandM;The 68332 will be a strong contender for mid-range and high-end embeddedcontrol applications.andP;  While it lacks the raw CPU performance of the 29000,80960, or even the 86C020 (Acorn), the sophisticated time processing unit(TPU) will give the 68332 an edge in motion control and other applicationsthat can make use of its capabilities.andP;  This range of applications willincrease as Motorola introduces versions with different TPU microcode.andP;  TheTPU will be especially effective for high-volume applications that canjustify development of custom TPU microcode.andM;The 68332 is more effective than any other processor at eliminating the needfor glue logic while still providing a full-featured bus interface.andP;  AsMotorola introduces new 68300 family members with DMA controllers and othermodules, the range of applications for which they will be effective willbroaden.andM;Intel has won many designs with the 80186 and 80188 for the simple reasonthat the on-chip DMA and other peripherals significantly reduced the systemcost and chip count.andP;  While many designers prefer the 68000 architecture, ithas required too many chips to build a complete 68000-based system withtimers, interrupt control, and DMA.andP;  The 68300 family promises to change thissituation, though the initial version lacks a DMA controller and has a morecomplex timer system than is needed for most applications.andP;  We can onlywonder why Motorola didnht address this need years ago -- it may be too latefor them to recapture many of the design wins that were lost to the 80186.andM;Most other high-end embedded control processors are really general-purposeprocessors that have been targeted at embedded control for strategicmarketing reasons.andP;  The 68332, on the other hand, was clearly designedspecifically for embedded control, and offers a superior solution in terms ofsystem chip count and efficient use of its silicon area.andP;  While the 29000 and80960 may take the very-high-end applications, the 68300 family -- when fullydeveloped -- stands to be a strong contender fro the much larger middle rangeof applications.andO;</TEXT></DOC>