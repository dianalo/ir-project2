<?xml version='1.0' encoding='UTF-8'?>
<DOC><DOCNO>  ZF207-358-872  </DOCNO><DOCID>07 358 872.andM;</DOCID><JOURNAL>Lan Magazine  July 1989 p134(8)* Full Text COPYRIGHT Telecon Library Inc. 1989.andM;</JOURNAL><TITLE>Inside TCP-IP. (Transmission Control Protocol-Internet Protocol)</TITLE><AUTHOR>Kessler, Gary C.andM;</AUTHOR><SUMMARY>Transmission Control Protocol-Internet Protocol (TCP-IP) is basedon the Department of Defense's ARPANET protocol suite.andP;  Thisarchitecture uses four protocols at different layers: theprocess-application layer, which defines specific applications andhow processes communicate; the host-to-host layer, which providesreliable communication between hosts across the subnetwork; theinternet layer, which defines the communication between thesubnetwork and the host-to-host layer; and the network-accesslayer, which is responsible for the exchange of data between thehost and the specific subnetwork to which it is attached.andO;TCP-IP's network access layer is not standardized and cantheoretically be used over any network.andP;  The IP provides adatagram service between hosts and gateways which carries TCPpackets to the destination host.andP;  TCP is responsible for providingerror-free host-to-host communication.andM;</SUMMARY><DESCRIPT>Topic:     Transmission Control Protocol-Internet Protocol (Computer NetworkProtocol)StandardsOSI StandardNetwork ArchitectureConnectivityProtocol.andO;Feature:   illustrationchart.andO;Caption:   TCP-IP's four protocols. (chart)TCP-IP frames (chart)TCP-IP architecture (chart)andM;</DESCRIPT><TEXT>Inside TCP/IPandM;Since its initial operation almost 20 years ago, the ARPANET and its usershave made many contributions to data communications protocols and networks.andO;The Department of Defense (DoD) Advanced Research Projects Agecy (ARPA)protocol suite is available in many commercial products and has taken on anincreased role in computer internetworking.andM;The best known protocols in the ARPA protocol suite are Transmission ControlProtocol/Internet Protocol (TCP/IP).andP;  As the ARPA protocols have gainedprominence and acceptance, TCP/IP has gained increased name recognition; over100 vendors offer products supporting TCP/IP and related protocols.andP;  Thesignificance for LANs is obvious since one goal of local area networks is tointerconnect unlike devices.andM;Work has progressed at the international level to generate standards forinternetworking as part of the Open Systems Interconnection (OSI) protocolsuite.andP;  Nevertheless, TCP/IP is probably the most widely available, and used,standardized communications protocols today.andP;  Although many argue that OSIprotocols will obviate the need for protocols such as TCP/IP in the future,OSI protocols are not yet universally available nor will conversion to thembe immediateandM;This article presents a brief overview of the operation of some of the morecommonly available ARPA protocols and their relationship to OSI.andM;Origins of TCP/IPandM;TCP/IP is based upon the ARPANET protocols.andP;  ARPANET is important for severalreasons: it is one of the oldest computer networks in the world; it isgeographically very large; and it was the first network designed usingpacket-switching technology.andM;The ARPANET protocol suite, like most computer network architectures,comprises several different layers of communications.andP;  In particular, the DoDarchitecture uses the concepts of the network, host and process.andP;  The networkalludes to the subnetwork that interconnects two end-user devices; theend-user devices themselves are hosts.andM;Hosts do not actually communicate with other hosts, per se; an applicationrunning on one host communicates with an application running an another host.andO;These applications are called processes.andP;  To use a telephone analogy, thetelephone system is the network, telephones are hosts, and the users areprocesses.andM;TCP/IP ArchitectureandM;For purposes of internetworking, there are conceptually four protocol layers.andO;The process/application layer protocol defines specific applications and thecommunication between two processes (e.g., an electronic mail protocol).andP;  Thehost-to-host layer protocol provides reliable, error-free communicationbetween hosts across the subnetwork (e.g., TCP).andM;The internet layer protocol defines the communication between thehost-to-host layer and the subnetwork (e.g., IP).andP;  The network-access layerprotocol is specific to a given subnetwork; it is primarily responsible forthe exchange of data between a host and the network to which it is attached.andO;Note that several subnetworks may lie between two hosts.andP;  For example, onehost might be attached to an Ethernet network and the other host might beattached to an X.25 network.andM;The DoD protocol suite comprises many protocol standards, although we onlytalk about five of them:andM;* Internet Protocol (IP), corresponding to the internet layer.andM;* Transmission Control Protocol (TCP), corresponding to the host-to-hostlayer.andM;* File Transfer Protocol (FTP), Simple Mail Transfer Protocl (SMTP), andTELNET, all corresponding to the process/application layer.andM;The Network-Access LayerandM;The network-access layer specifies how a host system communicates with thenetwork.andP;  As far as TCP/IP is concerned, the network-access protocol is notstandardized.andP;  TCP/IP can theoretically be used over any network.andP;  Forexample, the network access protocol could be the CCITT Recommendation X.25Packet Layer Protocol for a packet-switched network or the IEEE 802.2 (or ISO8802/2) Logical Link Control (LLC) protocol for a LAN.andM;The network-access layer provides rules so hosts attached to a network canexchange messages.andP;  A host that sends a message must provide the networkaddress of the destination host, may provide certain routing information, andmight request special services from the network.andP;  The network is responsiblefor delivering the message correctly and providing any requested services.andM;The network-access layer allows two hosts to exchange information across asingle network.andP;  If the two hosts are connected to different networks, it ispossible that the two networks will have different network-access protocols.andO;This would be the case, for example, if a host on an X.25 packet networktried to access a host on an Ethernet LAN.andM;When hosts are connected to different networks using different network-accessprotocols, a gateway or bridge must be used so the messages can traverse bothnetworks.andP;  Note that a gateway or bridge must support the network-accessprotocol of the two networks to which it is connected.andM;Gateways and bridges must also implement a protocol that allows messages tocross multiple networks while presenting a common interface to higher layers.andO;This is the function of the internet layer protocol.andM;The format of a frame transmitted across a network supporting TCP/IP hasseveral parts:andM;Frame: The Local Network Header and Trailer contain control informationspecific to the local network (e.g., X.25 LAPB and PLP or IEEE 802 LANprotocols).andP;  The Information field contains an IP packet.andM;IP Packet: IP header (control) information plus a TCP packet.andM;TCP Packet: TCP header (control) information plus higher layer headers anddata.andM;Internet ProtocolandM;The primary function of the Internet Protocol (IP) is to allow messages to berouted between hosts across multiple networks.andP;  The IP protocol must beimplemented in all hosts and gateways for this to work.andM;The IP provides a datagram, or connectionless, service between hosts andgateways.andP;  That means that there is no logical connection between two IPnodes prior to the exchange of information (as opposed to the way NetBIOSworks, for example).andP;  Flow control, guaranteed sequential delivery andend-to-end acknowledgements are not provided by the IP.andM;Datagram service is analogous to the postal network; a user doesn't have towarn the post office of the intent to send a letter.andP;  Furthermore, differentletters sent to the same address may take different routes through thenetwork and may arrive at the destination out of sequence.andM;The IP is responsible for carrying a TCP packet across each network until itis delivered to the destination host.andP;  The IP layer will add a control headerto the front of the TCP packet to form an IP datagram.andM;The IP header contains information for routing messages across multiplenetworks.andP;  Since data from higher layers may be fragmented by the IP intosmaller transmission units, sufficient information must be carried in theheader so that datagrams can be reassembled at the next gateway/host.andM;The IP header has a 32-bit orientation; zeroes are padded to the final 32-bitword, if necessary.andP;  The fields in the header are:andM;Version (4 bits): IP version number (currently 4).andP;  It is used to ensure thatthe IP sender and receiver are using the sam version of the standard.andM;IP Header Length IHL (4 bits): Number of 32-bit words in the IP header.andM;Type Of Service (8 bits): Indicates type of service that is to be providedfor this datagram.andP;  The user can specify various combinations of servicepriority, reliability, delay and throughput.andP;  For example, digitized voicerequires less delay than a file transfer application, but can tolerate morebit errors (i.e., lower reliability).andM;Total Length (8 bits): Total length of this IP datagram (i.e., the IP headerplus the data), in eight-bit bytes.andM;Identification (16 bits): A number which uniquely identifies the datagram.andO;All fragments of a datagram carry the same identification value.andM;Flags (3 bits): The first flag bit is unused and set to 0.andP;  The second flagbit is the Don't Frament (DF) bit; a datagram cannot be fragmented at agateway if the DG-bit is set to 1.andP;  The third flag bit is the More Fragments(MF) bit; thi bit will be set to 1 in all fragments except the final one.andO;The MF-bit indicates to a receiver when all fragments have arrived, prior toattempting reassembly of the datagram.andM;Fragment Offset (13 bits): A datagram may be split into multiple fragments.andO;The value in this field indicates where in the datagram the first byte ofthis fragment appears, in 64-byte increments.andP;  This allows the parts of thedatagram to be put back together when they reach their destination.andM;Time To Live (8 bits): This counter is used to limit the lifetime of apacket.andP;  When this value reaches zero, the packet is removed from the gatewayor network node to prevent routing loops and congestion in the network.andP;  Thepacket lifetime is measured in seconds, with a maximum packet life of 255seconds.andM;Protocol (8 bits): identifies the protocol that follows the IP header (e.g.,andO;TCP).andM;Header Checksum (16 bits): A checksum used to detect bit errors within the IPheader.andP;  A separate checksum is useful because the IP header may change at agateway, while the rest of the datagram will remain unchanged.andM;Source IP Address (32 bits) and Destination IP Address (32 bits): Indicatesthe network number and host address of the source and destination hosts.andP;  TheIP supports three different address formats, depending upon the size of thenetwork and number of hosts:andM;Class A addresses allow up to 128 ([2.sup.7]) networks with up to 16,777,216([2.sup.24]) hosts each; this is intended for use with very large networks.andM;Class B addresses support up to 16,384 ([2.sup.14]) networks with up to65,536 ([2.sup.8]) hosts each; this might be used with LANs.andM;The IP address can refer to a network by setting the Host Identification bitsall to 0 or can broadcast to all hosts on a network by setting the HostIdentification bits all to 1.andM;Options (up to 32 bits): IP options may be used for a variety of purposes,including time-stamping fragments, network testing, source routing, errorreporting and debugging.andP;  It may also be used for experimental purposes insome implementations.andP;  This field may be absent; if present, it may be paddedwith zeroes to be exactly 32 bits in length.andM;Transmission ControlandM;ProtocolandM;The Transmission Control Protocol (TCP) is roughly equivalent to the OSITransport Layer (Layer 4).andP;  It is responsible for providing error-free,host-to-host communication by use of sequence numbers, acknowledgements andchecksums.andP;  TCP can also identify data that requires expedited service andcan establish multiple simultaneous sessions between host processes.andM;TCP provides a reliable virtual circuit, or connection-oriented, service tohigher layers.andP;  That means that there is a logical connection establishedbetween two communicating hosts.andP;  End-to-end flow control, error control andacknowledgements, then, can be provided by TCP.andP;  TCP operation is independentof the underlying network architecture.andM;The TCP header, like the IP header, is oriented to 32-bit words.andP;  Thecontents of the TCP header are:andM;Source Port (16 bits) and Destination Port (16 bits): The port number of thecalling and called TCP applications, respectively.andP;  The &quot;port number&quot; conceptis similar to that of a LAN Service Access Point (SAP) in the OSI Model.andO;Port numbers correspond to standard higher layer applications; for example,ports 21, 23 and 25 are currently assigned to the FTP, TELNET and SMTPapplications, respectively.andM;Sequence Number (32 bits): The byte sequence number of the first data byte inthis TCP data block.andP;  The sequence number is incremented according to thenumber of bytes in the TCP datagram.andM;Acknowledgement Number (32 bits): Indicates the next expected byte.andP;  Thisvalue is also used to acknowledge all bytes transmitted so far in the datastream.andM;Offset (4 bits): The number of 32-bit words in the TCP header.andP;  Thisinformation is necessary because the TCP header may vary in length, dependingupon the Options that are selected.andM;Unused (6 bits): Reserved and set to 0.andM;Flags (6 bits): Six bit-flags used for a number of purposes, such asindicating the end of a transmitter's bit stream, the use of Urgent Data orresetting a TCP connection.andM;Window (16 bits): Indicates the number of eight-bit bytes of data that thesender can receive (also called the Receive Window Size).andM;Checksum (16 bits): A 16-bit checksum to detect bit errors, based upon theSource and Destination IP Address fields (from the IP header) and the numbercorresponding to the total length of the TCP packet.andM;Urgent Pointer (16 bits): The Urgent Pointer indicates the position in theTCP byte stream where Urgent (expedited) Data ends.andM;Options (0 or more 32-bit words): This field may be used by TCP software atone host to communicate with TCP software at the other end of the connectionto convey such information as the maximum TCP segment size.andP;  This field maybe absent or may require multiple 32-bit words; it may be padded with zeroesso it is exactly 32 bits in length.andM;Process/ApplicationandM;ProtocolsandM;The ARPANET research community has developed a large number of protocols thatoperate over the TCP/IP layers.andP;  Three of these protocols -- FTP, SMTP and'TELNET -- are described here since they have been standardized and aresupported by many commercial versions of TCP/IP.andM;Figure 6 shows the relationship (albeit greatly) simplified) between a user,a computer's operating system and applications, the TCP/IP protocol suite anda network's own protocols.andP;  Note the transparency to the user of the actualoperation of the application and the network.andP;  Transparently is an importantconcept of layered protocols, including OSI and, to a certain degree,computer operating systems.andM;Suppose a user wants to send an electronic mail message to a user on anothercomputer.andP;  The user accesses the computer's services via the operatingsystem.andP;  The operating system calls upon the MAIL application for the userand the user prepares the message.andP;  This message, however, may not be in theproper format for the communications network nor for the destination host'smail application.andM;The implementers of the MAIL application at a host can write an interface toconvert the E-mail message format to that of a known, widely used mailprotocol, such as the TCP/IP mail protocol (SMTP) or CCITT RecommendationX.400; in this example, we convert to SMTP which already has an interface toTCP/IP.andM;TCP/IP will operate over any network-specific protocols for which aninterface has been written.andP;  For example, we can access a packet network byusing the X.25 protocols or a LAN by using IEEE 802 protocols.andM;The operation is reversed at the destination side.andP;  The network accesses theTCP/IP layers, and SMTP accesses the destination operating system's MAILapplication.andP;  The two users can now exchange mail messages without having anyidea about what, if any, protocol conversion is taking place.andM;This same analogy holds for other applications, such as file transfer andvirtual terminal emulation.andP;  The TCP/IP protocol suite, in fact, includesmany protocols for inter- and intra-network communication.andP;  The protocol setactually defines a large set of applications for purposes such as E-mail,virtual terminal emulation, file transfers and remote login to a host.andP;  Threeof these application protocols will be briefly discussed below since they arecommonly a part of commercial offerings of TCP/IP.andM;TELNETandM;TELNET is a simple remote terminal protocol allowing a user at one host tocontrol an application at another host.andP;  TELNET provides a reliable pathwayfor data exchange via the TCP/IP suite.andP;  TELNET also provides simple virtualterminal emulation by defining a network-standard terminal.andP;  This means thatthe characteristics of a specific terminal can be mapped into this standardterminal, allowing terminals from different vendors to be connected todifferent hosts.andP;  The protocol that is defined between the terminal and hostallows negotiation of certain terminal characteristics, such as the screenwidth, screen length, full-duplex versus half-duplex operation, or localversus remote echo.andP;  TELNET also provides an authentication procedure whichallows users to identify themselves to remote systems using login identifiersand passwords.andM;TELNET is actually implemented in two different modules.andP;  A user invokesTELNET at a host via an operating system instruction, thus creating a TELNETClient process.andP;  This process reads instructions from the user's terminal andsends the appropriate message out through the network.andM;At the remote host, a TELNET Server module is invoked.andP;  A message is receivedfrom the network and delivered to TELNET.andP;  Since there is, in fact, noterminal user at the remote site, the TELNET Server process acts like aterminal attached to the remote host.andM;FTPandM;The File Transfer Protocol (FTP) allows a user to transfer data files betweenhosts.andP;  Like TELNET, a user will access the FTP at the local host, usuallyusing commands offered by the host's operating system.andP;  FTP is usuallyaccessed interactively.andM;FTP provides several options for file access and transfer.andP;  For example, auser at Host 1 can simply list files at Host 2, or copy files from Host 2 toHost 1.andP;  Alternatively, the Host 1 user can transfer files to Host 2.andO;Finally, a &quot;third-party transfer&quot; can be performed where the Host 1 usertransfers files at Host 2 to Host 3.andP;  In all of these cases, an FTP entitymust be invoked at each host involved in the transfer.andM;FTP is more complex than TELNET.andP;  First, it allows a single user to accessmultiple hosts in a single session.andP;  Furthermore, TELNET uses a single TCPconnection between the TELNET Client and TELNET Server process, while FTPwill use two TCP connections: one for data and the other for control.andM;When a user invokves FTP, and FTP process at the local host creates a TCPcontrol connection.andP;  The control connection uses the TELNET protocol, whichforces the user to supply a login identifier and password across theconnection to the remote host before any transfers can occur.andP;  When the userrequests a file transfer, a data connection is created, opening a second TCPconnection.andP;  This data connection exists for the duration of the actual filetransfer; once the transfer is completed, the data connection is terminated.andO;The user can make another file transfer request involving that remote host orcan terminate the FTP session (and terminate the control connection).andM;SMTPandM;The Simple Mail Transfer Protocol (SMTP) allows users to exchange electronicmail messages, providing an end-to-end guarantee of mail delivery.andM;Electronic mail exchange between users on a host usually involves a &quot;mailbox&quot;for each user.andP;  When user A sends mail to user B, the mail is placed in userB's mailbox, where it can be accessed when user B next logs on.andP;  Mailboxesare usually maintained through the operating system's file management system.andM;The concept of mailboxes on a single host can be expanded to provideelectronic mail to many users over a network of many hosts.andP;  Mail isaddressed to a &quot;destination host&quot; and a &quot;mailbox address&quot; at that host.andP;  SMTPallows users to send mail to other users on the same host or to another hoston the network.andP;  TCP is used by SMTP to send and receive mail messages acrossthe network.andM;TCP/IP and OtherandM;StandardsandM;The TCP/IP protocols discussed here are all U.S.andP;  Military Standards (MILSTD)and have a relationship to various OSI model standards from the InternationalStandards Organization (ISO) and the International Telegraph and TelephoneConsultative Committee (CCITT).andP;  The list below shows the appropriatemilitary standard number for each of the five TCP/IP protocols discussedhere, as well as a corresponding OSI protocol:IP (MIL-STD-1777): DraftInternational Standard (DIS) 8472, Protocol for Providing theConnectionless-Mode Network Service.andM;TCP (MIL-STD-1778): ISO 8073, Connection-Oriented Transport ProtocolSpecification.andM;FTP (MIL-STD-1780): DIS 8571, File Transfer, Access, and Management (FTAM).andM;SMTP (MIL-STD-1781): CCITT Recommendation X.400, Message Handling System(MHS).andM;TELNET (MIL-STD-1782): DIS 9041, Virtual Terminal Protocol.andM;The information above is meant only to demonstrate the relationship betweenthe TCP/IP protocol suite and OSI protocols.andP;  The DoD created these protocolsbecause they had an immediate need to be satisfied and there were no otherstandards widely available.andP;  For similar reasons, these protocols are beingwidely used today in industry because of their availability; most computervendors and LAN vendors offer some TCP/IP-based products.andM;In the future, however, the TCP/IP protocols will probably be replaced by theOSI protocols.andP;  The DoD has already announced that all major computer/networkacquisitions after August, 1990 must comply with the Government OSI Profile(GOSIP) standard.andP;  This means TCP/IP will be dropped in purchases afterAugust, 1990.andP;  By the late 1990s, existing TCP/IP implementations will bereplaced with OSI protocols.andP;  The DoD is already funding projects for thedevelopment of TCP/IP-to-OSI gateways.andP;  Other federal agencies willundoubtedly follow the DoD's lead.andM;More information on TCP/IP standards can be ordered from SRI International inMenlo Park, CA, at 800-235-3155.andP;  Here are some suggested references for moreinformation on the TCP/IP protocols:andM;Comer, D. Interworking with TCP/IP.andP;  Prentice-Hall, 1988.andM;Stallings, W. Local Networks: An Introduction.andP;  Macmillan (2nd edition, 1987.andM;Tanenbaum, A.S.andP;  Computer Networks.andP;  Prentice-Hall, 1988 (2nd edition).andM;Gary C. Kessier lives in Colchester, VT, and provides data communications andcomputer networking training and consulting services.andP;  Electronic mail can besent to kumquat @ smcvax.bitnet or left on the LAN Magazine bulletin board.andO;</TEXT></DOC>