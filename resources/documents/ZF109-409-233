<?xml version='1.0' encoding='UTF-8'?>
<DOC><DOCNO>  ZF109-409-233  </DOCNO><DOCID>09 409 233.andM;</DOCID><JOURNAL>Hewlett-Packard Journal  August 1990 v41 n4 p50(4)* Full Text COPYRIGHT Hewlett Packard 1990.andM;</JOURNAL><TITLE>Interoperability testing for HP MAP 3.0. (Hewlett-Packard'sManufacturing Automation Protocol implementation)</TITLE><AUTHOR>Meyer, Jeffrey D.andM;</AUTHOR><SUMMARY>HP's MAP 3.0 is intended to provide a way for HP systems tocommunicate with systems from other vendors, but to assure thiswas achieved required interoperability testing along with standardsoftware testing.andP;  Implementing the full OSI stack is a difficulttask because of the many network standards and options withineach: errors in selecting and enforcing options and in generalencoding and decoding of protocol data units sent across thenetwork may go undetected during testing between similar systemsbecause they can be canceled when present in both sending andreceiving code.andP;  Interoperability testing detects such cancelingerrors, and while conformance testing may eventually replace theneed for most interoperability testing, it does not now meet allOSI testing needs.andP;  The interoperability test process, testingresults and useful practices are described.andM;</SUMMARY><DESCRIPT>Company:   Hewlett-Packard Co. (product development).andO;Ticker:    HWP.andO;Product:   HP Manufacturing Automation Protocol 3.0 (Communications software)(product development).andO;Topic:     TestingInteroperabilityOSI StandardManufacturing Automation Protocol (Computer Network Protocol)ImplementationMethodsMultivendor Systems.andO;Feature:   illustrationcharttable.andO;Caption:   An example of how an error can be canceled between systems.andO;(chart)The interoperability testing process. (chart)IOP defects exposed by layer during IOP testing with eightvendors. (table)andM;</DESCRIPT><TEXT>[FIGURES HAVE BEEN OMITTED]andM;Interoperability testing is used to ensure that HP MAP 3.0 OSI services cancommunicate with other vendors' systems and to uncover errors both in HPs andother vendors' OSI implementations.andM;ONE OF THE PRIMARY objectives of HP's MAP 3.0 offering is to allow HP systemsto communicate with those of other system vendors.andP;  To be successful inmeeting this objective requires interoperability testing in addition tostandard software testing practices such as module, system, and reliabilitytesting.andP;  Interoperability testing is the verification of the ability ofdifferent network implementations to communicate.andP;  This type of testing helpsto expose implementation errors in both HP and other vendors' systems, andmost important, it helps to ensure that we provide our customers with a trulyopen system.andM;Need for interoperability TestingandM;The large number of network standards, their relative newness, and theexistence of many options within the standards makes the implementation of afull OSI stack a formidable task.andP;  Errors can be made both in the selectionand enforcement of options and in the general encoding and decoding of theprotocol data units that are sent across the network.andP;  These types of errorsmay go undetected during testing between similar systems because they can becanceled.andP;  Canceling happens when an error is present in both the sending andreceiving code, the net effect being that no error is detected.andM;Fig.andP;  1 illustrates this problem.andP;  In this case implementation A incorrectlyrequires the presence of optional field Y in a PDU.andP;  During the testing of Aagainst itself this error is not detected because A always includes field Y.andO;When A tests with implementation C, which does not include this field, theerror is exposed.andP;  Fig.andP;  1 also illustrates that interoperability testing isnot transitive.andP;  A tests with B successfully because B includes the optionalfield.andP;  Also B tests successfully with C because B does not require theoptional field Y. But A fails the test with C.andM;Because of the canceling effect, an OSI product can go through its internalsoftware testing cycle and still contain significant undetected errors.andO;Because of the lack of transitivity we cannot make assumptions about ourability to operate with one vendor based on our experience with another.andP;  Forthese reasons interoperability testing is an important and necessary elementof the test cycle for OSI products.andM;Conformance TestingandM;Another type of testing that exposes defects in OSI implementations isconformance testing.andP;  Conformance testing consists of running a set ofcommunication tests between the system being tested and a reference system.andO;The idea here is that the reference system is a correct implementation of theOSI layers being tested and that successful completion of the conformancetests will indicate that the tested system's implementation is also correct(conformant).andP;  Tests for OSI implementations are administered by a nationalagency.andP;  In the United States this is the Corporation for Open Systems (COS),which issues certification marks to systems passing the tests.andM;Conformance tests may eventually replace the need for most interoperabilitytesting, but this is not the case today.andP;  The main problems existing are theavailability and stability of tests and the commitment of vendors to undergotesting.andP;  Because the FRAM conformance tests are still under development andthere are no accepted MMS tests in the United States, we must performinteroperability testing.andM;BP is taking an active role in participating in the COS's conformancetesting.andP;  We have completed IEEE 802.4 and OSI Transport Class 4 tests andare working with the COS on FTAM testing.andP;  Because the conformance tests arealso subject to errors in implementation, the participation of other vendorsin conformance tests is essential to their becoming stable.andP;  As stableconformance tests become available and are widely accepted among vendors, weshould see the following benefits.andM;* The tests will be very rigorous and produce a range of behavior muchgreater than that generated by a typical implementation.andP;  This should enableconformance testing to expose the majority of implementation errors.andM;* The tests will be improved over time to incorporate tests forimplementation errors that might still be found between conformant systems.andM;* The rigorous and improved tests will mean that a system's conformance markwill provide a high level of confidence in its ability to interoperate withother conformant systems.andP;  This will reduce the need to perform controlledinteroperability testing between each pair of implementations.andM;The interoperability Test ProcessandM;Although interoperability testing could be performed by purchasing the othervendor's equipment and implementing and running the tests in-house,experience has shown that our most effective interoperability testing hasresulted from cooperation between HP and the other vendor.andP;  The cooperativeapproach speeds the test development cycle and it improves the ability todiagnose problems detected in the other vendor's equipment.andP;  If problems arefound in the other vendor's equipment, their involvement improves theturnaround time for fixes.andM;Fig.andP;  2 shows the interoperability testing process that has been establishedat HP.andP;  The process is initiated by an HP field representative after acustomer request has been received for an HP OSI network product.andP;  The othersystem vendors on the network are reviewed against the systems we havealready tested.andP;  If any have not been tested then the testing process begins.andO;The testing process may also be initiated by Randamp;D or marketing for vendors ourcustomers might use in the future.andM;The first phase in the testing process is determining the availability ofpersonnel within the factory to perform the testing.andP;  After identifying theinternal team, contact with the other vendor is established for carrying outthe testing.andP;  In some circumstances the customer may also be involved.andM;When the teams are established the next step is to exchange information abouteach vendor's implementation.andP;  The information exchanged consists of adocument called a Protocol Implementation Conformance Statement (PICS) and,if available, network traces showing the protocol data unit encodingsproduced by the vendor's stack.andP;  The PICS describes the services and optionssupported for a protocol.andP;  Each of the ISO protocol standards specifies theinformation to be provided in the PICS, which usually takes the form oftables to be filled in.andP;  The PICS information is used to determine thefunctionality to be tested.andP;  The PICS information can also be used todetermine if the functionality requested by the customer is met by the twoimplementations.andP;  The network traces from the other vendor can be comparedwith those of our implementation to identify differences and to look forknown problems.andM;After this exchange of information takes place, both parties are prepared todecide on the appropriate test cases to be executed and the location wherethe tests are to take place.andP;  HP has a set of abstract test cases for bothFTAM and MMS, which are generally proposed as part of the test suite.andP;  Amabstract test case describes the test purpose, the steps to execute the test,and the expected results.andP;  in addition to testing at one of the vendor'sfacilities, two other options exist for test location.andP;  Testing can beperformed over a wide area network by using a router to move data from eachvendor's local EEEE 802.4 network to an X.25 public data network.andP;  Anadvantage of this type of testing is that both parties can work out of theirrespective labs, giving them easy access to the development and diagnostictools available.andP;  Testing may also be performed at the COS's interoperabilitytest lab.andP;  COS, the agency that performs conformance testing, has providedfloor space in their lab for vendors to leave their equipment.andP;  For about aweek every quarter vendors are invited to come to the lab to carry outinteroperability testing.andP;  An advantage of this environment is that testingcan be performed with more than one vendor.andM;Install, configure, and verify are combined and listed as a separate stepbecause when equipment is moved for the purposes of this testing, it isimportant that its local functioning be verified first.andP;  This avoids wastingtime diagnosing problems that have nothing to do with interoperability.andM;After all the preceding activities have been completed, the actual executionand interpretation of the interoperabilable and are widely accepted amongvendors, we should see the following benefits.andM;* The tests will be very rigorous and produce a range of behavior muchgreater than that generated by a typical implementation.andP;  This should enableconformance testing to expose the majority of implementation errors.andM;* The tests will be improved over time to incorporate tests forimplementation errors that might still be found between conformant systems.andM;* The rigorous and improved tests will mean that a system's conformance markwill provide a high level of confidence in its ability to interoperate withother conformant systems.andP;  This will reduce the need to perform controlledinteroperability testing between each pair of implementations.andM;The interoperability Test ProcessandM;Although interoperability testing could be performed by purchasing the othervendor's equipment and implementing and running the tests in-house,experience has shown that our most effective interoperability testing hasresulted from cooperation between HP and the other vendor.andP;  The cooperativeapproach speeds the test development cycle and it improves the ability todiagnose problems detected in the other vendor's equipment.andP;  If problems arefound in the other vendor's equipment, their involvement improves theturnaround time for fixes.andM;Fig.andP;  2 shows the interoperability testing process that has been establishedat HP.andP;  The process is initiated by an HP field representative after acustomer request has been received for an HP OSI network product.andP;  The othersystem vendors on the network are reviewed against the systems we havealready tested.andP;  If any have not been tested then the testing process begins.andO;The testing process may also be initiated by Randamp;D or marketing for vendors ourcustomers might use in the future.andM;The first phase in the testing process is determining the availability ofpersonnel within the factory to perform the testing.andP;  After identifying theinternal team, contact with the other vendor is established for carrying outthe testing.andP;  In some circumstances the customer may also be involved.andM;When the teams are established the next step is to exchange information abouteach vendor's implementation.andP;  The information exchanged consists of adocument called a Protocol Implementation Conformance Statement (PICS) and,if available, network traces showing the protocol data unit encodingsproduced by the vendor's stack.andP;  The PICS describes the services and optionssupported for a protocol.andP;  Each of the ISO protocol standards specifies theinformation to be provided in the PICS, which usually takes the form oftables to be filled in.andP;  The PICS information is used to determine thefunctionality to be tested.andP;  The PICS information can also be used todetermine if the functionality requested by the customer is met by the twoimplementations.andP;  The network traces from the other vendor can be comparedwith those of our implementation to identify differences and to look forknown problems.andM;After this exchange of information takes place, both parties are prepared todecide on the appropriate test cases to be executed and the location wherethe tests are to take place.andP;  HP has a set of abstract test cases for bothFTAM and MMS, which are generally proposed as part of the test suite.andP;  Amabstract test case describes the test purpose, the steps to execute the test,and the expected results.andP;  in addition to testing at one of the vendor'sfacilities, two other options exist for test location.andP;  Testing can beperformed over a wide area network by using a router to move data from eachvendor's local EEEE 802.4 network to an X.25 public data network.andP;  Anadvantage of this type of testing is that both parties can work out of theirrespective labs, giving them easy access to the development and diagnostictools available.andP;  Testing may also be performed at the COS's interoperabilitytest lab.andP;  COS, the agency that performs conformance testing, has providedfloor space in their lab for vendors to leave their equipment.andP;  For about aweek every quarter vendors are invited to come to the lab to carry outinteroperability testing.andP;  An advantage of this environment is that testingcan be performed with more than one vendor.andM;Install, configure, and verify are combined and listed as a separate stepbecause when equipment is moved for the purposes of this testing, it isimportant that its local functioning be verified first.andP;  This avoids wastingtime diagnosing problems that have nothing to do with interoperability.andM;After all the preceding activities have been completed, the actual executionand interpretation of the interoperability tests can take place.andP;  Theevaluation of the failed tests should involve both vendors.andP;  It is useful togather as much information as possible, including traces of the dialog, errormessages reported, errors logged, and configuration data.andP;  After diagnosing aproblem, ownership is assigned and the problem corrected.andP;  If fixes are notreadily available, both vendors may agree to proceed with other tests if theyare confident that the error exposed will not affect the outcome of the othertests.andP;  In fact, it is useful to define tests that are loosely coupled, thatis, test each component of the network service with little dependence onother functions.andP;  This ensures that testing can proceed in parallel withfixes being developed for exposed problems.andM;When testing is complete an entry is made for that vendor into an on-lineinformation base.andP;  This entry describes the tests that were performed, andfor those that failed, the symptoms and type of problem, the owner of theproblem, and the fix.andP;  In addition to the test results, these entries alsogive information about the vendor's equipment, the personnel involved intesting, the time and location of testing, and the diagnostic tools availableon the other vendor's equipment.andP;  This record can then be used for evaluatingfuture field requests for vendor support as well as for tracking trends ininteroperability problems.andP;  interoperability ResultsandM;The most encouraging result to come from our interoperability testing is thehigh level of cooperation we have had from other vendors.andP;  One reason forthis cooperation is that all parties involved gain from this testing.andP;  Bothvendors have the opportunity to improve their implementations and theircustomers get the assurance that the different systems will be able tocommunicate.andP;  We had originally thought that issues of defect ownership mightarise frequently, but all the defects we encountered so far have hadownership resolved.andM;The distribution of errors we have seen so far is shown in Table 1.andP;  Somequick observations from this table include:andM;* Interoperability (IOP) testing is necessary because defects were uncoveredin the tests with all vendors.andM;* Defect rates from the session layer on down were low because the variousimplementations of these layers are quite stable.andM;* Defect rates should decrease steadily as interoperability testing is donewith more vendors.andM;The largest class of errors encountered was protocol data unit (PDU) encodingerrors, about 20%.andP;  It is noteworthy that from the presentation layer on up,the encoding rules for the PDUs change, and this is where the majority of theerrors were located.andP;  The change is that the encoding rules are no longerexplicitly stated in each protocol specification as they are in the lowerlayer standards.andP;  Instead, all the upper layer standards use what is calledAbstract Syntax Notation One (ASN.1) to describe the way PDUs are to beconstructed.andP;  ASN.1 is defined by two standard documents of its own.andP;  ASN.1allows a consistent mechanism for describing the upper layer protocols, butthe cost is that the final encoding of the PDU is less clear.andP;  ASN.1 alsopermits lengths of PDUs to be encoded in two different ways, and severalvendors, including HP, had some errors in decoding both methods.andP;  See thearticle on page 11 for more about ASN.1.andM;Within the FTAM errors, half of the errors were the result of the incorrecteffect being applied to the file being accessed.andP;  For instance, a request torecreate a file with new attributes might actually result in the same filebeing overwritten and its old attributes kept (i.e., time of creation, owner,access restrictions, etc.).andP;  Another large class of errors came from twoimplementations being overly restrictive on a set of concurrency controlflags, which are used to control simultaneous access to files.andM;Another trouble spot, at the application and presentation layers, had to dowith the negotiation of contexts to be used for the two entities tocommunicate.andP;  When a connection is established at the presentation layer thetwo entities agree what application layer protocols will be used (e.g., ACSEand MMS) and what encoding rules will be used, which is always ASN.1.andP;  Oneproblem was that the codes used to indicate the protocols being proposed werestill in a state of flux late in the implementation cycle.andP;  Other problemsresulted from the standard's allowing multiple ways to order the proposedprotocols and different methods of encapsulating the data from the upperlayers.andM;One last trouble area worth mentioning resulted from optional fields.andP;  Sixerrors were the result of either an implementation requiring a field that wasoptional, or not handling a field that could optionally be present.andM;Useful PracticesandM;The HP 4974A MAP 3.0 protocol analyzer proved to be an indispensable toolduring interoperability testing.andP;  The analyzer captured all the OSI trafficbetween the two systems being tested and displayed it in real time on thescreen.andP;  The traffic was presented in several windows corresponding to thedifferent layers of the stack.andP;  This multilayer display proved especiallyuseful for situations when one system encountered an error at an intermediatelayer in the stack.andP;  We could see in real time the dialog that had occurredand determine which side was the last to transmit.andP;  Because the analyzer isable to save the traffic it monitors in files, we were able to keep track ofexactly what dialogs took place for each test case.andM;The analyzer was also useful in identifying problems that are not apparent atthe application layer.andP;  An example was incorrect disconnect or abort dialogs.andO;Although at the application layer both sides may see the connectionsuccessfully released, the analyzer exposed errors in the dialog carried outat lower layers.andM;Another valuable quality of the analyzer is that it acts as an unbiasedobserver on the network.andP;  There is no doubt that traffic displayed by theanalyzer is traffic that is actually on the network.andP;  This is more reliablethan traces taken by either host.andM;The best method for isolating encoding errors is to place traces of eachsystem's encoding for a particular PDU side by side and examine those fieldsthat are different.andP;  Note that this process can also be carried out beforeactual testing if PDU traces are exchanged by the vendors as suggested in theinteroperability process.andM;The logging facilities of the HP MAP services and the HP OSI Express cardalso proved very useful.andP;  Because much care had been taken to associateunique log messages with each potential error detected throughout the stack,several errors could be identified immediately from the log message text.andM;ConclusionandM;The interoperability testing process we have developed at HP has helped usuncover and correct errors in our OSI implementation as well as several othervendors' implementations.andP;  We plan to continue our interoperability testingwith more vendors in the future.andP;  We now have a better understanding of thetypes of problems that occur between different implementations and throughour records are in a better position to support our OSI offerings in thefield.andM;AcknowledgmentsandM;The following people played key roles in the success of our interoperabilitytest effort: interoperability project manager Jim Cunningham, previousmanager Greg Gilliom who began this project, OSI Express engineers MikeEllis, Steve Mueller, and Tom Smith, FTAM engineer John Smith, MMS engineersPete Lagoni, Hugh Mahon, and Jeff Williams, and fellow interoperabilityengineer Ken Brown.andP;  Thanks must also be extended to the engineers atAllenBradley, Computrol, Data General Corporation, GE-Fanuc, Motorola, RETIXIncorporated, and Unisys for their hard work in making open systems areality.andO;</TEXT></DOC>