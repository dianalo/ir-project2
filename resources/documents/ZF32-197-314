<?xml version='1.0' encoding='UTF-8'?>
<DOC><DOCNO> ZF32-197-314 </DOCNO><DOCID>10 540 498</DOCID><JOURNAL>Microprocessor Report  March 20 1991 v5 n5 p10(2)* Full Text COPYRIGHT MicroDesign Resources Inc. 1991.andM;</JOURNAL><TITLE>&quot;Micro Softener&quot; simplifies battery-backed systems; chip providespower detection, chip selects, bootstrap ROM, ports. (DallasSemiconductor's Micro Softener chip) (includes a related articlegiving price and availability)</TITLE><AUTHOR>Slater, Michael.andM;</AUTHOR><DESCRIPT>Company:   Dallas Semiconductor Corp. (Products).andO;Ticker:    DSMI.andO;Product:   Dallas Semiconductor Micro Softener (Integrated circuit) (Designand construction).andO;Topic:     Integrated CircuitsCircuit DesignBatteriesBack-Up SystemsBootingROMPower Supply.andO;Feature:   illustrationchart.andO;Caption:   System block diagram using Micro Softener. (chart)andM;</DESCRIPT><TEXT>Dallas Semiconductor has built a business based largely on chips that workwith lithium batteries.andP;  One of its most successful products is itsclock/calendar module, which combines a 146818-compatible chip with a lithiumbattery and is used in many IBM-compatible PCs.andP;  The company has alsoproduced a series of chips to simplify the design of systems withbattery-backed RAM.andP;  The Micro Softener, its latest creation, is the mostcomplete solution yet to the problems of designing a reliable battery-backedsystem.andM;Figure 1 shows a system using the Micro Softener.andP;  In a single 80-pin PQFP,the chip provides several functions, including:andM;*  Clock generationandM;*  Power-supply threshold sensingandM;*  Battery power switchingandM;*  Address decodingandM;*  Parallel I/O portsandM;*  Watchdog timerandM;*  Boot ROMandM;The main purpose of the chip is to provide the circuitry necessary to ensurethat the battery-backed RAM contents are preserved and that themicroprocessor can be restarted after a power failure, continuing from itsstate when the failure occurred.andM;The power supply threshold detector has three thresholds.andP;  When the supplyvoltage drops below the highest threshold, the INT1/ pin is asserted to warnthe processor that a power failure is imminent.andP;  This triggers an interruptservice routine, which stores the processor state (register contents andprogram counter) in the battery-backed RAM.andP;  When the supply voltage dropsbelow the next threshold (the minimum normal operating voltage), the MicroSoftener asserts RSTOUT/ to halt the processor.andP;  Finally, when the powersupply voltage drops to the 3 V level of the lithium battery, the batterypower takes over to maintain the VCCO output for the RAM (and optionalclock/calendar chip).andP;  When power returns, the processor restores theregister contents from the battery-backed RAM and resumes execution at thesaved program counter value.andM;These functions, combined with the address decoder, are provided in otherchips from Dallas.andP;  The unique feature of the Micro Softener is that it alsoincludes a bootstrap ROM to allow the battery-backed RAM to be loaded withthe system's software without requiring any external ROM or EPROM.andP;  Thisfeature requires a different version of the chip  customized at themetal-mask layer) for each microprocessor type that it supports.andP;  Fourversions will be available by this summer, supporting NEC's V40, Hitachi's6303, Intel's 8096, and Motorola's 68HC11.andP;  Each version also has a businterface matched to the processor family; some have multiplexed address/databuses, and some are non-multiplexed.andP;  The number of I/O port lines andchip-select signals provided by the chip varies with the number of signalsrequired for the processor interface.andM;At power-up, firmware in the bootstrap ROM performs a CRC  cyclic redundancycheck) on the non-volatile RAM.andP;  If this checksum fails, then the bootstraploader is invoked.andP;  The loader can also be invoked by asserting the RELOADinput or by the application software.andP;  The loader communicates with a hostcomputer via the processor's serial I/O port.andP;  In addition to allowing thememory to be loaded, it can calculate and store the CRC, verify the CRC, setup a write-protected partition for the downloaded software, and configureother aspects of the Softener's operation.andP;  After the loader's functions arecomplete, the bootstrap ROM is disabled, removing it from the address space,and the downloaded program is executed.andM;The Softener supports the &quot;stop&quot; mode provided by some processors.andP;  If theclock output from the processor stops, indicating that it has entered thismode, the Softener disables its clock oscillator and puts itself in apower-down state until RESET is asserted.andM;A watchdog timer helps make the system &quot;crash-proof.&quot; &quot; If the applicationsoftware fails to periodically reset the watchdog timer, indicating it hasgone astray, the timer resets the processor.andP;  The bootstrap ROM performs aCRC check on the downloaded software when the processor is reset, so if thedownloaded software has been corrupted the error is detected before anotherattempt is made to execute the software.andP;  The watchdog time-out period can beselected to be from 2[sup.14andrsqb; to 2[sup.21andrsqb; oscillator periods.andM;Because of the number of functions it includes and its customization forvarious microprocessors, the Micro Softener provides a very low chip countsolution for battery-backed systems.andP;  It should significantly reduce designtime as well by providing an off-the-shelf solution for several functionsthat normally require separate design efforts.andP;  The fact that it must becustomized for each processor family, however, limits its application tothose families that it supports.andO;</TEXT></DOC>