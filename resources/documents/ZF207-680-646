<?xml version='1.0' encoding='UTF-8'?>
<DOC><DOCNO>  ZF207-680-646  </DOCNO><DOCID>07 680 646.andM;</DOCID><JOURNAL>Digital Review  Sept 18 1989 v6 n37 p33(3)* Full Text COPYRIGHT Ziff-Davis Publishing Co. 1989.andM;</JOURNAL><TITLE>Firmly in the shadow. (Hardware Review) (Tech Report: diskcontrollers andamp; subsystems) (evaluation)</TITLE><AUTHOR>Steinberg, Jeffrey A.andM;</AUTHOR><SUMMARY>Distributed Logic Corp (Dilog) has manufactured two excellentEnhanced Small Device Interface (ESDI) controllers, the MQ686, fortraditional Q-bus machines, and the MQ3686 for the MicroVAX 3000series.andP;  Both controllers offer a shadowing feature built intotheir hardware and both performed very well on benchmark tests.andO;The MQ686 is priced at $1,950, or $15,350 when configured as asubsystem with two Hitachi drives.andP;  The MQ3686 is priced at$2,150.andP;  Both controllers use an innovative method to start theformatter and both support fail-over shadowing.andP;  One disadvantageis that linear load performance falls off after the third diskdrive is added.andP;  Despite this, the controllers are highlyrecommended and users who take advantage of the shadowing featuregain performance along with added security.andM;</SUMMARY><DESCRIPT>Company:   Distributed Logic Corp. (products).andO;Ticker:    DLOG.andO;Product:   Distributed Logic MQ686 (Control board)Distributed Logic MQ3686 (Control board).andO;Topic:     Enhanced Small Device InterfaceControllersPerformance MeasurementBenchmarksEvaluation.andO;Feature:   illustrationgraph.andO;Caption:   Disk performance benchmark results: effect of shadowing. (graph)Load benchmark results: effect of shadowing. (graph)Load benchmark results: effect of adding drives. (graph)andM;</DESCRIPT><TEXT>FIRMLY IN THE SHADOWandM;In the ESDI disk subsystem market, controllers are quickly becoming commodityitems.andP;  To et ahead of the pack, vendors must offer excellent performance orinnovative features at a reasonable price.andM;Distributed Logic Corp. (Dilog) has done all of this with its new MQ686 ESDIcontroller for traditional Q-bus machines and its MQ3686 ESDI controller forthe MicroVAX 3000 series.andP;  Both controllers offer an innovative shadowingfeature built into their hardware, and both provided excellent performance onDR Labs' disk performance benchmarks.andM;IT'S IN THE CHIPSandM;The MQ686 and the MQ3686 are quad-height Q-bus contollers.andP;  The majordifference between them is that only the MQ3686 offers the proper ventilationplates and end connectors needed for DEC's newer MicroVAX 3000 series ofcomputers.andM;The two boards are identical from a systems perspective.andP;  Each is capable ofconnecting as many as four ESDI drives and two SA450-compatible floppy diskdrives to a host.andM;ESDI drives on the market today offer data transfer rates as high as 2.4MBper second.andP;  SA450-compatible drives are available from several vendors,including Canon, Fujitsu, Mitsubishi and Sony.andP;  Users can buy 3-1/2-inc SA450compatibles as well as SA450 compatibles that can read and write RX50 andRX33 floppies.andM;Dilog's controllers allow users to configure four ESDI drives in either oftwo ways.andP;  The most conventional, straightforward method is to connect thefour drives so that each appears as a separate drive to the VAX.andO;Alternatively, users can create one or two shadow sets.andM;Shadowing means using two or more drives to create one &quot;shadow&quot; volume: Alldata is written to each member of the shadow set, and any member of theshadow set can satisfy data requests from the VAX.andP;  This protects users fromdata loss and subsystem downtime due to hardware failure, because each memberof the shadow set contains all of the shadow volume's data.andM;With the Dilog controllers, users can use four drives to build two shadowsets (two drives each), or they can mix configurations, buidling one shadowset and connecting the two remaining drives separately.andM;Each shadow set consists of a primary drive and another drive of identicalgeometry that serves as the shodow disk.andP;  When users configure a shadow set,the two drives in the set appear as one drive to the VAX.andP;  Any two 5-1/4-inchESDI disks of the same capacity can be used together in a shadow set.andO;However, the only ESDI drive that can be spindle-synchronized is a 5-1/4-inchdisk from Hitachi.andM;When a write is performed to a shadow set, the controller automatically sendsit to both drives.andP;  If the two drives' spindles are synchronized so as toremain 180 degrees out of phase, data will typically be written half arotation apart.andP;  When a read is performed, the controller reads from thedrive whose read head is physically closer to the data.andM;Because the rotational latency of a spindle-synchronized shadow set is cut inhalf, reads are completed more quickly, giving these sets a performance edgeover regular shadow sets as well as over traditional, single-driveconfigurations.andM;Dilog's controllers use the standard MSCP DUDRIVER.EXE driver running underVMS and have a 16-entry MSCP command queue.andP;  Because the controllers supportfail-over shadowing, the system manager does not have to reconfigure thecontroller if one drive fails.andM;The controller reports whenever a drive fails, and the manager can thenremove the failed drive from the disk subsystem--allowing the subsystem tocontinue to run as though it were a conventional single-driveconfiguration--or add a new drive.andM;If the system manager chooses to add a new drive, the subsystem is stopped sothe controller can copy data from the master drive to the new shadow drive athigh speed.andP;  A shadow set of two 780MB drives can be reconstituted in about20 minutes, according to Dilog officials.andM;Other standard features of these controllers include a 28-sector buffer fordata transfers, the ability to map multiple logical drives onto a singlephysical drive and the ability to read the manufacturer's ESDI bad-block mapfrom an attached drive.andM;Another innovative feature is the ESDI's controllers' technique for startingthe on-board formatter, which is called Dilog Universal Formatting.andM;Many controllers that DR Labs has tested, including older Dilog controllers,require users to enter a series of long commands at the console prompt tostart the formatters (which typically are stored on an external tape or inthe controller's on-board ROM).andP;  Other controllers require users to hook up aterminal to the controller to start the formatter, a cumbersome process atbest.andM;Dilo's approach allows users to start the formatter by entering a singlecommand at the console prompt.andM;For example, if the controller is configured to present drives DUBO throughDUB3, the user enters B/8 DUD9 at the console prompt to bring up theformatter.andM;Like other advanced ESDI controllers, the Dilog MQ686 and MQ3686 support ESDIparameter passing, allowing the controllers to get information about adrive's geometry from the drive itself rather than forcing the user toprovide this information.andP;  This feature makes it much easier for users toreconfigure the Dilog controllers to run with any new ESDI drive that comesonto the market.andM;Using the formatter's ESDI Unit Mapping option, users can assign a primarydrive and designate one of the remaining drives as the shadow.andM;The formatter also provides traditional options such as formatting andverification, bad-block replacement and a read/write test for each attacheddrive.andM;TESTING PERFORMANCEandM;We tested the performance of Dilog's MQ686 in a MicroVAX II using fourHitachi DK515-78 5-1/4-inch ESDI disk drives (Fig.andP;  1).andM;The DK515-78, which can be spindle-synchronized, is Hitachi's newest ESDIdrive and features a data transfer rate of 2.5MB per second.andP;  The drive hasan unformatted capacity of 780MB and a formatted capacity of 637MB when usedwith Dilog's formatter.andM;Using a conventional, single-drive configuration, the Dilog MQ686/HitachiDK515-78 subsystem achieved an average access time of 28.2 milliseconds (ms)on DR Labs' Average benchmark test.andP;  This time compares favorably with the31.3ms that we recorded with DEC's KFQSA/RF71 DSSI subsystem.andM;The total overhead for the CPU, controller and disk was determined to bebetween 5.3ms and 5.6ms, with the CPU/controller portion measuring 2.9ms.andO;The DEC DSSI subsystem had a higher total overhead that was between 11.4msand 11.8ms and a higher CPU/controller overhead of 8.2ms.andM;In DR Labs' overall Random benchmark, which predicts a subsystem's throughputin a multiuser environment, the Dilog/Hitachi subsystem achieved a transferrate of 135KB per second.andM;This rate compares favorably with the 112KB per second achieved by the DSSIsubsystem and with the 135KB per second achieved by an SMD subsystem composedof an Emulex QD34 controller and an Imprimis Sabre drive.andM;In DR Labs' short-seek Random benchmark, designed to evaluate subsystemperformance in a single-user environment, the Dilog/Hitachi subsystemachieved a healthy 309KB-per-second transfer rate.andP;  This is well above the268KB per second achieved by the SMD subsystem and the 183KB per secondachieved by the DSSI subsystem.andP;  Both the short-seek and the overall Randombenchmark measure throughput as reads of 0KB to 8KB are made from randomlocations on the disk.andM;On DR Labs' Contiguous benchmark, the Dilog subsystem achieved a transferrate of 113KB per second for 2KB reads (four VMS disk blocks) and 458KB persecond for 10KB reads.andP;  Its peak performance was 1,400KB per second for256-block reads.andP;  The DEC DSSI subsystem achieved 103KB per second with 2KBreads and 387KB per second with 10KB reads and had a peak performance of681KB per second with 126-block reads.andM;SPINDLE SHARPandM;The advantage of spinle-synchronized shadow sets was revealed when werepeated DR Labs' disk performance benchmarks on a spindle-synchronizedshadow set.andP;  Performance was enhanced on every test.andM;In a shadow set, there are two drives to service a read request, and in aspindle-synchronized shadow set the odds are good that the data can be foundwithin 8.3ms (the one-half revolution difference between the drives).andP;  When asingle drive is servicing a request, locating data can take as long as16.6ms--the time it takes the drive to complete a full revolution.andM;The shadow volume's average access time was 23.5ms, a savings of nearly 5msover the single drive's average access time.andP;  The overhead for the CPU,controller and disk drive dropped to between 3.9ms and 4.1ms--compared withbetween 5.3ms and 5.6ms for the traditional configuration--while theCPU/controller overhead dropped slightly to 2.4ms.andM;The overall Random read test showed an improved data transfer rate of 161KBper second (up from 135KB per second), while the short-seek Random benchmarkshowed a transfer rate of 474KB per second--a big improvement over the 309KBper second achieved with the traditional subsystem.andM;On DR Labs' Contiguous benchmark, which uses double-buffered reads, werecorded excellent performance improvements.andP;  The Dilog shadowing subsystemachieved a throughput of 214KB per second with 2KB reads, or nearly doublethe non-shadowed results.andP;  (The shadow system's second drive would notimprove performance on single-buffered reads because the reads are contiguousfrom a single drive.)andM;With 10KB reads, the shadowing subsystem's performance was 742KB per second,as compared with 458KB per second for the traditionally configured subsystem.andO;Peak throughput was 1,610KB per second with 254-block reads, which compareswith the 1,400KB per second for the non-shadowed system.andM;LOAD RESULTSandM;The Dilog/Hitachi ESDI subsystem also performed very well on DR Labs'multidisk Load benchmark (Fig.andP;  2).andP;  We configured a Dilog subsystem thatcontained four identical Hitachi drives.andP;  Using this subsystem, we were ableto load four individual drives as well as two shadow sets.andM;With a single drive, the Dilog-based subsystem completed 33 queued I/Os(QIOs) per second with an average response time of 29.9ms when a singleprocess was performing I/O to the drive.andP;  It generated 51 QIOs per secondwithin an average response time of 100ms.andM;DEC recommends an average response time of no more than 100ms forapplications requiring rapid interaction between users and terminals.andP;  DRLabs considers a 200ms average response time acceptable for general-purposeapplications.andM;In comparison, the DEC KFQSA/RF71 subsystem was able to complete 31 QIOs persecond within 100ms and a maximum of 40 QIOs per second with a response timeof 253ms with 10 processes performing QIOs.andM;With two drives on the Dilog controller, we generated 72 QIOs per secondwithin 100ms, as compared with 62 QIOs per second for the DEC KFQSA-basedsubsystem.andM;When three drives were performing I/O to the MicroVAX, the subsystemcompleted 98 QIOs per second within 100ms.andM;With the KFQSA/RF71 subsystem using three drives to perform I/O operations,we were able to complete a nearly identical 96 QIOs per second within thesame 100ms response time limit.andM;Finally, with four drives connected to the Dilog controller, the subsystemgenerated 114 QIOs per second within 100ms.andP;  With four drives, the DECKFQSA/RF71 DSSI subsystem was able to complete 129 QIOs per second within thesame 100ms response time limit.andM;THE SHADOW KNOWSandM;After performing DR Labs' Load benchmark tests on the Dilog subsystem withthe four Hitachi drives configured as individual volumes, we reconfigured thecontroller to map the four drives into two shadow sets, each containing twoHitachi drives of the same size, and ran the Load benchmark again (Fig.andP;  3).andM;With one shadow set performing I/O operations, we completed 38 QIOs persecond with a response time of 26.2ms when a single process was performingI/O to the shadow set.andP;  We generated 52 QIOs per second within the 100msresponse time mark.andM;With 10 proceses performing I/O, we generated a maximum of 62 QIOs with aresponse time of 162.3ms.andM;Clearly, the shadowing technology allowed the Dilog subsystem to satisfy 10more QIOs per second with 10 process performing I/O while also reducing theoverall response time for all of the QIOs completed.andM;With two shadow sets, we completed 73 QIOs per second with a response time of27.3ms.andP;  This is also a 10-QIO improvement over the independent two-drivesubsystem, with a response time that is nearly 4ms faster.andP;  We generated 93QIOs per second within the 100ms response time mark.andM;The MQ686 controller is priced at $1,950 and the MQ3686 is priced at $2,150.andO;A subsystem consisting of the MQ686 and two Hitachi drives is priced at$15,350 in a rack-mount enclosure or $16,255 in a pedestal enclosure.andM;A four-drive subsystem having the same controller is priced at $27,775 in arack-mount enclosure and is priced at $28,690 in a pedestal enclosure.andM;On DR Labs' benchmark tests, the single-drive Dilog/Hitachi subsystem beatits competitors hands down, and our tests suggest that users who takeadvantage of the shadowing feature gain performance as well as addedsecurity: A subsystem configured with one or two spindle-synchronized shadowsets provides marked performance advantages over single-drive configurations.andO;</TEXT></DOC>