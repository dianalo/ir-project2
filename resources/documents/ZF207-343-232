<?xml version='1.0' encoding='UTF-8'?>
<DOC><DOCNO>  ZF207-343-232  </DOCNO><DOCID>07 343 232.andM;</DOCID><JOURNAL>PC Magazine  July 1989 v8 n13 p319(8)* Full Text COPYRIGHT Ziff-Davis Publishing Co. 1989.andM;</JOURNAL><TITLE>Utilities. (the use of CONVERT for translating escape sequencesand setup strings in printers, modems, or EGA monitors)</TITLE><AUTHOR>Mefford, Michael J.andO;AttFile:   PCMAG\V08N13\CONVERT.ASM;0 Program:  CONVERT.ASM  Assembler source code.andO;PCMAG\V08N13\CONVERT.BAS;0 Program:  CONVERT.BAS  Basic source code.andO;PCMAG\V08N13\CONVERT.COM;2 Program:  CONVERT.COM  Executable COM file.andO;PCMAG\V08N13\CONVERT.DOC;0 Program:  CONVERT.DOC  Documentation.andM;</AUTHOR><SUMMARY>The CONVERT utility program provides instant numeric and ASCIIequivalents in decimal, octal, hexadecimal, and binary formats.andO;With its ability to handle decimal numbers as large as 65,535, theutility is particularly useful for translating printer, modem, orEGA monitor escape sequences and setup strings from one numberbase to another.andP;  The process of using CONVERT.COM is discussed.andO;While CONVERT.COM is already compiled and ready to run, it canalso be created through CONVERT.BAS when running in BASIC, orthrough CONVERT.ASM source code which requires the use of a macroassembler and specific commands.andM;</SUMMARY><DESCRIPT>Topic:     American Standard Code for Information InterchangeASCIIBASICTutorialAssembly LanguageProgram Development TechniquesUtility ProgramsType-In Programs.andO;Feature:   illustrationtable.andO;Caption:   How CONVERT multiplies. (table)ASCII-to-binary conversion. (table)andM;</DESCRIPT><TEXT>Utilities If people had flippers instead of fingers, we'd all have learned tocount by twos.andP;  It would be as natural for us as for our computers to thinkof 9 as 1001.andP;  But since we learned to count by tens instead--and ourcomputers haven't--when we want to control our machines directly, we musttranslate our numbers into theirs.andM;CONVERT does just that, giving you instant numeric and ASCII equivalents indecimal, octal, hexadecimal, and binary formats.andP;  You're most likely to needCONVERT when you buy a new printer, modem, or EGA monitor and have totranslate the required escape sequences and setup strings.andP;  Your wordprocessor, for example, may discuss printer commands in terms ofdecimal-based ASCII characters, while your printer needs to see those samecharacters in hex.andP;  Or, when you want to play with color-setting EGAprograms, you may need to enter the EGA register values in octal notation.andO;And often the only way to understand how a programming &quot;shift mask&quot; works isto look at its numbers in binary.andM;You can download a ready-to-run copy of CONVERT.COM from PC MagNet, asexplained in the sidebar &quot;CONVERT by Modem.&quot; CONVERT.ASM, the source codelisting, and CONVERT.BAS, a BASIC program that will produce CONVERT.COM whenyou run it, are both printed here and are also available via PC MagNet.andM;The full syntax for using CONVERT is CONVERT number[-number][base] !andO;&quot;character(s)&quot;andM;You can give CONVERT either a single whole number or a range (joined by ahyphen between them) of such numbers, using any values between 0 and 65,535.andO;Ordinary decimal input is assumed unless you indicate a different base byappending b (binary), o (octal), or h (hexadecimal) to the number(s).andO;Alternatively, as indicated by the vertical bar in the syntax line above, youcan ask CONVERT to supply the numeric value (in all four number bases) of anyASCII character (or two) that you enclose between double quotation marks.andM;For example, if you enter CONVERT 65 the screen will display 65 0041h 000101o00000000 01000001b &quot; A&quot;andM;These, of course, are the hexadecimal (0041h), octal (000101o), binary(01000001b), and ASCII character (A) equivalents of the decimal number 65.andO;The same display will appear if you enter CONVERT &quot;A&quot; or CONVERT 0041h or anyof the other equivalents.andM;CONVERT also lets you redirect its output to a file or to a printer, which isuseful when you want to create a table of translated numbers.andP;  To make aprinted table of the first 55 numbers, enter CONVERT 0 - 55 andgt; PRNandM;A file version could be created by substituting a filename for PRN.andP;  Note,however, that when you use redirection, the ASCII-character equivalent willnot appear in the redirected output.andP;  Redirection only works with I/O donethrough DOS calls, and the CONVERT program uses the BIOS for the characteroutput.andM;By working through the BIOS, CONVERT avoids the special character processingthat DOS and the printer do with the low ASCII control characters.andP;  Forexample, an attempt to display character 7 (the bell character) through DOSwould be interpreted as a command and would produce an annoying beep.andO;Instead, CONVERT's procedure allows it to translate printer &quot;control&quot;characters into their numeric values.andP;  Thus, to translate Ctrl-A, just holddown the Ctrl key while typing A between double quotes.andP;  The Ctrl key willautomatically appear as a caret, thus: CONVERT &quot;*A&quot; The numeric translationwill be 1.andM;The one often-required ASCII character you can't simply enter within doublequotes at the keyboard is Escape.andP;  You can get its equivalents (including itsconventional left-arrow ASCII graphic) by entering the following: CONVERT 27You will, however, have to remember that Escape is decimal 27.andM;When CONVERTing large numbers, you will often find that two ASCII charactersare displayed--for example, &quot;(j&quot; for 286Ah.andP;  Large numbers require two bytes(a word); CONVERT stores numbers as words in order to be able to handlevalues as high as 65,535.andP;  The ASCII symbols shown in such cases are theequivalents of each byte taken separately, and so should not be used forconverting setup strings.andM;You'll also notice that for some numbers, one or the other of the two ASCIIcharacters in the quotes will be blank.andP;  For example, CONVERT 65 actuallydisplays &quot; A&quot; since the high byte is a null.andP;  In fact, the null character(decimal zero), the space character (decimal 32), and the blank character(decimal 255) all display as blanks.andM;ASCII AND BINARYandM;While CONVERT does all the work of number-base and ASCII translation for you,it may be useful to know in a general way what that work involves.andP;  Forexample, while 1 is 1 whether you're counting in binary, octal, decimal, orhexadecimal, it's not 1 at all when you enter it at your keyboard.andP;  The ASCII1 you produce at the keyboard is actually the binary number 00110001, whichis 49 decimal, 31 hex, and 61 octal, as you can see if you enter CONVERT &quot;1&quot;If you want your spreadsheet program to add 1 + 1, however, you obviouslydon't want it to add 49 + 49.andP;  The standard solution is to subtract an ASCII0 (decimal 48, or 00110000b) from each numeral entered, thus converting fromASCII keystrokes to binary.andP;  Binary 00110001 minus binary 00110000 =00000001b.andP;  Note that a program must reverse this process in order to displaythe character 1 on an ASCII terminal screen.andP;  The need to treat numbersdifferently when they're entered as ASCII-character numerals and when they'reentered as intended numbers is one of the reasons CONVERT requires that ASCIIcharacters be placed within double quotes.andM;BITS, BYTES, AND BASESandM;A number base, or radix, is determined by the number of different symbolsthat can be entered in a given column.andP;  There are 10 symbols (0 through 9) inthe decimal system, and when we count more than 9 we begin counting again ina second column.andP;  Each column we move to the left represents a successivelyhigher power of 10.andP;  In three columns, we can represent 1,000 possiblevalues, 0 to 999.andM;Binary, or base 2 arithmetic, is natural to computers because their circuitsare essentially switches, each of which can be turned either on or off, andeach of which can be represented by a binary digit, or bit, of 1 or 0,respectively.andP;  In binary, each column we move to the left represents asuccessively higher power of 2.andP;  With three columns of bits, we can represent8 possible values, 0 to 7, which is the origin of octal (base 8) computernumbers.andP;  When you count in octal, the symbols 0 through 7 have the samemeanings as in normal decimal arithmetic.andP;  There are no single symbols forwhat we would call 8 and 9; these become 10 and 11, respectively.andM;The architecture of the computer does not conveniently accommodate ourdecimal system.andP;  Rather, the PC's architecture groups bits in units of 8(that is, in bytes).andP;  With 8 bits there are 256 different combinations, whichwould require far too many different symbols to serve as a convenient numberbase.andP;  But half a byte--4 binary digits, or a nibble in programmingjargon--makes a very convenient number base: 16 (hence, hexadecimal).andP;  Hex ismanageable enough in terms of the number of its required symbols: 0 through 9carry their traditional (decimal) meanings, and the letters A through F doduty for the decimal numbers 10 through 15.andP;  The advantage of hex is that itcan directly represent the underlying binary language of the computer.andP;  Twohex digits represent one byte.andM;ASCII TO BINARYandM;The ASCII (American National Standard Code for Information Interchange)standard assigns a specific alphanumeric character or a control function(Form Feed, for example) to each of 256 possible numbers that can berepresented by 1 byte.andP;  (Technically, ASCII covers only the first 127,leaving the &quot;upper-order&quot; ASCII values up for grabs.andP;  IBM made one set ofassignments for the numbers from 128 to 255, and Apple and Microsoft optedfor another.andP;  This is why the upper-order characters may appear different inWindows applications like PageMaker.)andM;Any character typed at the keyboard generates a specific ASCII code.andP;  Toperform arithmetic, each individual ASCII character representing a numbermust first be changed into a binary number the computer can understand.andP;  Asindicated previously, converting ASCII numbers to binary is a simple task ofsubtracting 48 from the ASCII character value.andP;  For example, subtracting 48from 54, the ASCII value for the character 6 results in the number 6.andM;That works fine for single-digit decimal numbers, but CONVERT can handledecimal numbers as large as 65,535--a two-byte word.andP;  The conversion processis simple enough, however, when you consider what is meant by a number suchas 267, for instance.andP;  Each individual digit in 267 represents a count ofincreasing powers of ten.andP;  That is, we have 2 one hundreds plus 6 tens plus 7ones.andP;  The ASCII representation of 267 would be three bytes with values 50,54, and 55.andM;To convert the 50, 54, 55 bytes into the binary equivalent, first subtract 48from each, resulting in the three bytes of value 2, 6, and 7, respectively.andO;These individual bytes can then be accumulated after multiplying each byte by10 to the power of its position.andP;  Two times 10 to the second power, plus 6times 10 to the first power, plus 7 times 10 to the zero power results in thedesired 267 and fits in one word.andM;In fact, there's another way to do the multiplication that better fits themicroprocessor's instruction set, since there is no &quot;to the power of&quot;instruction.andP;  Ten to the second power is really just 10 * 10.andP;  Multiplying anumber by 10 effectively shifts the number one place to the left.andM;Visualize, then, that our number, 267, appears one digit at a time, startingwith the leftmost digit, 2.andP;  As each new digit appears, the old digits areshifted one column to the left to make room for the new digits.andP;  The shift isaccomplished by multiplying by 10, as illustrated in Figure 1.andP;  We alwaysstart out with a zero on the left end of the number and process the digitsfrom left to right.andP;  First we process the 2 by shifting the 0 left (0 * 10 =0) and adding the 2.andP;  Next the 6 enters by shifting the 2 left (2 * 10 = 20)and adding in the 6.andP;  Lastly, the 26 is shifted left (26 * 10 = 260) andadding in the 7.andP;  Voila!andP;  267.andM;MULTIPLYING BY SHIFTINGandM;Conversion of the other radixes from their ASCII representation to binary canbe done similarly, using the appropriate base for the multiplicand.andP;  Andactually, since binary, hexadecimal, and octal are all factors of binary,there's a shortcut to the multiplication step.andM;There are several machine instructions that will shift a number by arequested number of bits either left or right.andP;  These instructions are muchmore efficient than the MUL (multiply) instruction.andP;  The shift instructionbest suited for multiplying is SHL (shift left).andP;  Multiplying a binary numberby its base of two is as simple as shifting the bits of the number oneposition to the left.andP;  Since an octal base requires three bits,multiplication is accomplished by shifting a number three positions to theleft.andP;  Similarly a hexadecimal number is shifted four positions.andM;To illustrate, let's convert hexadecimal ASCII number 5Fh to binary.andP;  Thefirst part of the conversion is the same as the decimal conversion--subtract48, the ASCII value of the character 0.andP;  (As depicted in Figure 2, anothersubtraction of 7 must be performed for the letter F digit.andP;  This is to adjustfor the letters' position in the ASCII table relative to the numbercharacters.)andP;  The result is a byte with a value of 15, representing the firstplace, and a second byte with a value of 5 in the second position.andP;  If thiswere a decimal conversion, the next step would be to combine the numbers bymultiplying the 5 by base 10 and adding in the 15.andP;  For hexadecimal, insteadof multiplying by the base 16, the same can be accomplished by shifting the5's binary representation 4 bits to the left and then adding the binary 15.andM;BINARY TO ASCIIandM;Once the input is converted to binary, conversion to the four radixesdisplayed by CONVERT is essentially the reverse of the ASCII-to-binaryconversions.andP;  For example, for decimal output, instead of multiplying by 10,the binary number is divided by 10 and the remainder is converted into ASCIIby adding, instead of subtracting, 48.andP;  The quotient is repeatedly divided by10 until the remainder is zero.andM;How deeply you will explore the various permutations in the commented sourcecode depends on your need to write assembly language programs.andP;  Theconversion procedures in CONVERT were written so that you could directlyimport them into your assembly program and use them as they are or withslight modification.andP;  Rather than search for a conversion table, the nexttime you need to check a printer setup string, just type in CONVERT.andM;IN-LINE CODEandM;In issue 12, we introduced a new treatment of in-line code.andP;  From now on, wewill tint every other line of code so you can easily distinguish one completeline of code from the next.andP;  If what should be a single-line entry on-screenis shown on two lines in the magazine, both lines will receive the same tinttreatment.andP;  In addition, the number of spaces a secondary line is indentedwill indicate the number of spaces you should include when typing thatmultiple-line listing as a single-line entry on-screen.andP;  If a line is notindented, do not include any spaces.andM;CONVERT BY MODEMandM;The programs published in PC Magazine are available by modem from PC MagNet.andM;To download CONVERT.COM, log on to PC MagNet.andP;  Enter GO UTILITIES or choosePC MAGAZINE UTILITIES from the top menu, then DIRECT UTILITY DOWNLOAD fromthe next.andP;  Enter the filename, then select the file from those presented.andO;Answer (Y) to DO YOU WISH TO DOWNLOAD? Press Enter to see the transferprotocols.andP;  Choose a protocol and download the file.andM;To join PC MagNet, set your communications software for either 300 or 1,200bits per second, 7 data bits, even parity, 1 stop bit, and full duplex.andP;  Youcan use any of more than 300 local access phone numbers, including: Boston,(617) 542-1796; New York, (212) 422-8820; Chicago, (312) 693-0330; or SanFrancisco, (415) 956-4191.andP;  To find the number nearest your dialing exchangeafter you have subscribed, or for 2,400-bps service, connect with PC MagNetand type GO PHONES.andP;  For Customer Service, call (800) 848-8990; in Ohio andoutside the United States, call (614) 457-8650.andM;When you connect with PC MagNet, press Ctrl-C.andP;  At the HOST NAME prompt,enter CIS.andP;  At the USER ID prompt, enter 177000,5000.andP;  Enter PC*MAGNET at thePASSWORD prompt and Z10D8913 at the ENTER AGREEMENT NUMBER prompt.andM;You don't have to be a member of CompuServe to access PC MagNet.andP;  It costs$12.50 an hour for 1,200/2,400-bps service and $6 for 300-bps, via MasterCard, VISA, or American Express.andP;  These programs can be copied but arecopyrighted and are available only for noncommercial use.andP;  You may makecopies for others as long as no charge is involved, but making copies for anycommercial purpose is strictly prohibited.andM;CONVERTandM;CommandandM;Purpose: Simultaneously displays an ASCII code or whole number between 0 and65,535 in its hexadecimal, decimal, octal, and binary equivalents; especiallyuseful in translating printer, modem, or EGA monitor escape sequences andsetup strings from one number base to another.andM;Format: CONVERT number [-number] [base] ! &quot;character(s)&quot;andM;Remarks: Either a single number or a number-number range may be input toCONVERT for multiple number base display.andP;  Decimal input is assumed, unlessotherwise indicated, by adding b (binary), o (octal), or h (hexadecimal) tothe number(s).andP;  An ASCII code to be converted must be placed within doublequotes.andP;  Control codes (for example, Ctrl-A) may be entered normally at thekeyboard (within double quotes), with the exception of the escape character.andO;To display the equivalents (including the ASCII left-arrow graphic) of theescape character, enter CONVERT 27.andM;When large numbers are converted, the 2-byte sequence displayed within quotesin the right-hand column as the ASCII &quot;equivalent&quot; should not be used intranslating setup strings.andP;  It represents the individual byte values, not thevalue of the combination.andP;  Note, too, that in this display, decimal 0 (null),32 (space), and 255 (blank) all appear as blanks.andM;The output from CONVERT may be redirected to a printer or to a file, so amultiline table of values can be created.andP;  When redirection is used, however,the ASCII equivalent normally shown in the right-hand column is dropped.andM;Available for downloading from PC MagNet (see the &quot;CONVERT by Modem&quot;sidebar), CONVERT.COM is already compiled and ready to run.andP;  As analternative, CONVERT.COM can be created from either of two program files thatare printed in the article and are also available for downloading from PCMagNet.andP;  CONVERT.BAS will automatically create CONVERT.COM when run once inBASIC.andP;  To create CONVERT.COM from the CONVERT.ASM source code requires theuse of a macro assembler (IBM or Microsoft, Version 2 or later) and thefollowing commands: MASM CONVERT; LINK CONVERT; EXE2BIN CONVERT CONVERT.COM;</TEXT></DOC>