<?xml version='1.0' encoding='UTF-8'?>
<DOC><DOCNO>  ZF109-423-405  </DOCNO><DOCID>09 423 405.andM;</DOCID><JOURNAL>EXE  August 1990 v5 n3 p12(4)* Full Text COPYRIGHT Process Communications Ltd. (England) 1990.andM;</JOURNAL><TITLE>Not so much a compiler, more a statement of direction. (SoftwareReview) (Clipper 5.0) (evaluation)</TITLE><AUTHOR>Butterworth, Ian.andM;</AUTHOR><SUMMARY>Clipper 5.0, from Nantucket Corp, is an open and usable compilerthat may be on the market in Jul 1991.andP;  Several new features havebeen added: preprocessor, improved scoping, new data types,source-level debugger, data base independence, new operators andfunctions, and a new dynamic linker.andP;  One problem solved by thenew version is the previous version's inability to nest GETs.andP;  Thenew version allows multiple GET lists on the go.andP;  The current GETlist can be suspended and dropped down to an inner level or it canrun simultaneously, for parallel GETS.andP;  New facilities offered bythe preprocessor include directives: #define and #undef, #include,#ifdef, #ifndef, #else and #endif.andP;  There is a new Browse systemthat acts somewhat like objects; however, version 5 is not toutedas an object-oriented language.andP;  Clipper 5.0 seems source-codecompatible with Summer '87.andP;  Many add-on libraries may be readyshortly after the release of Clipper 5.0.andM;</SUMMARY><DESCRIPT>Company:   Nantucket Corp. (products).andO;Product:   Clipper 5.0 (Program development software).andO;Topic:     EvaluationCompilersProgram Development Tools.andO;Feature:   illustrationprogram.andO;Caption:   Operators and array functions. (program)Manipulating a TBrowse object. (program)An RTLink command file. (program)andM;</DESCRIPT><TEXT>Clipper V5.andP;  0 is ending its career as vapourware.andP;  Ian Butterworth bas beentaking a look at the latest dBASE-isb compiler from Nantucket.andM;The original DBASE compiler was written by Brian Russell back in 1984.andP;  Hetook it to Ashton Tate, the DBASE manufacturer, but the company wasn't veryinterested.andP;  So one evening Brian Russell met one Barry ReBell in arestaurant called 7he Nantucket Light.andP;  The upshot of this occasion was theformation of the Nantucket Corporation, with ReBell as Chairman.andP;  Thecompany's product was Russell's compiler, which was launched as ClipperSummer'85.andP;  Since that time, Clipper has grown to be pretty successful, withover 200,000 users worldwide.andP;  One consequence of this success is thatClipper has been able to create its own (dBASE-incompatible) de factostandard, and has spawned a whole community of developers of both end-userapplications and add-on products.andM;The current (pre V5.0) Clipper release is Summer  87.andP;  At the US NantucketDevelopers' Conference in California, which I attended a few weeks ago, wewere givenandM;The Conference Edition of Clipper 5.0'.andP;  This is, in effect, a gamma releaseversion of the software; it is this package that forms the basis of thefollowing review.andP;  The new compiler marks a radical break with the past - notleast a non season-based naming convention, to reduce confusion among usersliving in the Southern Hemisphere.andP;  Five-Oh, as they kept calling it inCalifornia, no longer aspires to be a mere DBASE compiler, but the beginningof Something Great, intended for many different operating systems andarchitectures.andP;  So what have Brian Russell and the rest of his team been upto over the last three years?andM;The PreprocessorandM;The facilities offered by the new preprocessor will be boringly familiar to Cprogrammers - but very exciting to DBASE language developers.andP;  There aredirectives #define and #undef, for the creation (or deletion) of manifestconstants, pseudo functions and so on; #include to incorporate header files(containing all those #defines), #ifdef,  #ifndef, #else and #end if to allowconditional compilation.andM;Two other directives, geared specifically to Clipper syntax, are lessfamiliar.andP;  # command turns what appears as a command in the source file intoa function call.andP;  Many of the existing Clipper commands have beenreimplemented this way, and it provides a powerful mechanism for substitutingother database engines, screen drivers etc into the same source code.andO;#command allows a variable number of parameters, the ability to wrapparameters in quotes (for example, as in the USE statement, which normallytakes a literal file name) without changing any of the source.andP;  #translateexpands four-letter abbreviations of commands (a hangover from interpreteddays) into the full version, but otherwise behaves just like #command.andM;Scoping and Data TypesandM;Another hangover from the interpreter is Clipper's weak set of scoping rules.andO;If I declare (ie use) a variable name within a procedure, any routine that itcalls can 'see' that variable.andP;  If a procedure with a loop FOR i=1 TO n callsanother routine with a loop FOR i= 1 TO n, the caller's variable I is changedby the inner one! Until now, the only way to, prevent this happening was todeclare all local data as private - which left the responsibility of hidingdata to the called and not the caller.andP;  There are two new variabledeclarations: LOCAL and STATIC.andP;  LOCAL means that the variable is onlyvisible in the routine in which it is declared, and it is stored on thestack.andP;  This appears, on the surface, to be a minor point, but I believe itwill make Clipper code generally more robust.andP;  STATIC is like a C static -its value is retained between invocations of a routine.andP;  For convenience,STATICs can have file wide scope (when compiled with the /N switch, amodule's STATICs are visible to all its routines).andP;  STATIC is a very usefulmechanism for data hiding.andP;  Previously, one had to declare a large number ofPUBLIC variables which could then be trashed by any careless piece of coding.andO;Now, the details of libraries can remain safely hidden from applications.andO;LOCALs and STATICs have a number of other features in common: for one thingtheir names are resolved at compile time.andP;  P RI VATE PUBLIC and, a new one,'FIELD' variable names are known at runtime, which means they can be used inmacro substitution.andP;  The snag is that each has an overhead of 22 bytespervariable name.andP;  LOCALs and STATICs lose this memory overhead, plus onelevel of indirection, so we should be able to look forward to betterperformance in accessing memory variables.andM;There are also such things as STATIC functions, which are visible only in themodule in which they're defined.andP;  Once again, this serves to enhance thehiding of program and data.andP;  Hence forth there should be less use ofundocumented (and therefore changeable at Nantucket's) Clipper functions.andO;For those who don't see what is wrong with this sort of thing, consider howmany Microsoft Windows V2.X developers now wish that they had used memory asthey were told?andM;Another aspect of the generality of Five-Oh is the introduction of codeblocks, which can be thought as pointers to functions.andP;  Essentialy, you canassign a chunk of code to a variable at compile time (thus avoiding the overhead of runtime macro expansion).andP;  This chunk of code can be passed aroundjust like any variable and executed using the function eval ().andP;  Here is acode block which takes the parameter y, passes it to func and then incrementsit: xxblock := {|yy| func(yy), yy++}andM;Code blocks are often used in internal functions.andP;  By default, asort () sortsan array into ascending order.andP;  By passing the code block parameters, you canforce descending order or specify behaviour for dealing with two differenttest data types.andP;  Arrays have been expanded to structures of potentiallyquite labyrinthine complexity not like arrays in any other language that Ihave seen.andP;  Previously, array elements could be of different types, perhapsreflecting the structure of whole database files.andP;  This has been expanded toallow arrays to contain references to other arrays, so we have thepossibility of an unlimited number of dimensions (except for memorylimitations).andP;  Arrays can now be initialised when the are declared:andM;LOCAL nice lads  := {&quot;Smed&quot;,;andM;&quot;Malc&quot;,  &quot;Mark&quot;,  &quot;Skye&quot;,;andM;{38, 25, 32, 47}andM;Some functions to handle the new arrays are shown in Figure 1.andP;  You can nowdeclare LOCAL parameters in a style reminiscent of FORTRAN:  function AtSayCol (nRow, nCol, cText, nColour).andP;  These parameters are all 'genuine' ieactually passedon the stack, with scalars passed by value, multiples byreference.andP;  Forr these purposes, a string counts as a scalar.andP;  Parameters maybve skipped in function invocations by the simple expedient of placing twocommas together - the called routine is passed the new constant NIL.andP;  FIELDis the last new data type and is used to define memory variable names for usewith a particular database.andP;  It is most useful to the programmer whoduplicates field names all over the place (forbidden practice in my company).andM;GETting betterandM;One outstanding weakness of the current system of obtaining input is theinability to nest GE Ts.andP;  For example, if you are entering data against anorder, and suddenly discover that your database doesn't have the requiredcode for some new product, the only way around it is to abort the read, go tothe product entry screen, type in the new product data and then start allover again from scratch.andM;Five-Oh's GET system solves this problem.andP;  You are now allowed to havemultiple GET lists on the go.andP;  You can either suspend the current GET listsand drop down to an inner level (nested GETs), or, for the ambitious, you areallowed to have more than one list running simultaneously (parallel GETs)Other new features include: full program control over navigation and editingkeys, cargo information associated with each GET allowing (eg help test to bedispalyed when a user is entering data in a particular field); theavailability of state information (insert key status and so on); anddynamically configurable state information such as colour and picture clause.andO;The revised system is based on things called 'GET objects'- which, as aconfirmed OOP-o-phobe, makes me nervous.andP;  The preprocessor translates each@...andP;  GET command into an object which contains characteristics of the GETcommand itself.andP;  Each GET is added to an array called GetList.andP;  GetList isLOCAL to the routine in which it is defined, so nested READs become a naturalpart of the way the language works, and not a bolted-on workaround.andP;  When aREAD command is issued, the preprocessor translates it into a call to thestandard function readmodal (Get List) .andP;  The default method of operation isas in Summer'87.andM;The values in GET objects are set and retrieved using code blocks which areevaluated at runtime.andP;  It is possible to assign a new value to the GETvariable or just retrieve its value.andP;  The GET object needs to knowpractically nothing about the variable being 'GOT'.andP;  Validation can now becarried out before, during and after the variable is being GOT.andP;  For example,a VALID clause is now translated to be a code block executed after variableentry.andP;  I have not yet had time to investigate all the ramifications of thisnew approach, but it does not take much imagination to see how one mightimplement a multiple window application where the user can switch betweenactivities at will - suspending some and activating others according to need.andO;The new GET code itself has been written in Clipper - the source fileGETSYS.PRG is supplied - so it is very user configurable.andM;The Browse SystemandM;The new Browse system (replacing the slightly strange dbedit (), althoughdbedit () is still available in this release) is implemented in a similarstyle to GE T I s. As the reference manual says,  A TBrowse object is ageneral purpose browsing mechanism for table-oriented data'.andP;  Data retrievaland record positioning is implemented via user-supplied code blocks passed asmessages to the TBrowse object in question.andM;A TBrowse object is created using the function TBrowseNew () which definesthe name of the object and its screen size.andP;  New columns (ie data fields) arecreated by passing the AddColumn message to the browse object - please seeFigure 2.andP;  Each column or block of cells may be individually coloured, so youcan easily highlight queried data or negative values.andP;  Colours are also setby passing messages.andM;Stabilisation is the process whereby the screen is redisplayed after movementwithin the database(s) being browsed.andP;  It is often convenient to be able toprevent/abandon this process (for example when the user is paging downrapidly) so you do not waste time redrawing the screen when the nextkeystroke, waiting m the keyboard buffer, will force another refresh.andO;Five-Oh lets you do just this, so the user can move to the next screen ofdata without having to wait for the current screen to fill up (which may takesome time, if complicated look-ups are involved).andM;Although TBrowse and GETs act like objects, the manual is at some pains tosay that Five-Oh is NOT an object-oriented language.andP;  Database independenceAlthough I touched on database independence in the context of user definedcommands, a little more should be said about it.andP;  By including non-standardheader files to, it is possible to reference another set of functions toperform data retrieval.andP;  This should mean that the lonely freelancer, toilingin his garret, can develop with a dBASE III+ compatible file structure, then,once it is ready for delivery, recompile using a non-standard header fileand, lo and behold, it's Netware SQL or whatever the customer wants.andM;Drivers should be available both from Nantucket and third parties over thenext few months.andP;  The following drivers have been mooted: Paradox,Microsoft/Sybase SQL Server, Gupta Technologies SQLbase, Novell's Netware SQLand Oracle RDBMS.andP;  Note there are Summer  87 drivers available for Oracle andSQLbase.andM;Miscellaneous GoodiesandM;The assignment operator : = returns a value C-style, so multiple assignmentscan be expressed on one line, as in x : = y : = 0.andP;  See Figure 1 for a listof the other new operators.andP;  The macro operator can now be used onexpressions; before it used only to work on simple variables - not even arrayelements.andP;  The syntax is andamp; (st r1 + st r2).andM;Runtime Environment Clipper 5.0 comes with a simple program editor (actuallyitself a Clipper program), DBU (a utility program), a source level debuggerand a new linker.andP;  The editor is pretty basic, and not likely to win manyfriends.andP;  DBU provides facilities for the creation and modification of DBFfiles.andP;  The debugger is a full screen effort, with one small window forentering commands plus a menu accessed via ALT-key combinations.andP;  The maindebugger window is given over to the source code being executed, with ahighlight on the current line.andP;  To set break points, you move the cursor tothe line in question and press F7.andP;  I have heard rumours that there will bean option to run EGA or VGA screens in 43/50 line mode, with the applicationscreen occupying half and the debugger the remainder - let's hope this isright.andP;  The linker is a vast improvement on PLINK86 - it is faster and ithelps to get round one of the bugbears of all Clipper programs - size.andP;  Thedesign of the Clipper language requires that much of the Clipper library hasto be loaded with each application.andP;  This means that a  Hello World' programin Clipper is around 160 KB! The new linker, a special version of RTLink fromPocketSoft, provides several two features to enhance both memory and discusage: dynamic overlaying and shared library files.andP;  In order to speed up thelink process incremental linking is available - only changed modules arerelinked into the application.andP;  Because this special version of RTLink knowsabout Clipper, basic linking can be carried out with the simple commandrtlink andless;objfileandgt;.andP;  Response files, such as shown in Figure 3, can be used formore complicated link sessions.andP;  The runtime environment takes a more settingup than before, now that we have include files, dynamic link libraries et al.andO;Five-Oh now installs itself into a directory CLIPPER5 with fivesub-directories BIN, INCLUDE, LIB, PLL and SOURCE.andP;  Fortunately theenvironment can be set up i la Microsoft, and both the compiler and thelinker know about SET INCLUDE, LIB etc.andP;  The compiler itself now takes agreater number of optional parameters, see Figure 4.andP;  The package comes witha Norton Guides engine and database, to enable hot key look-ups which arecontext-sensitive to the item under the cursor in your editor.andP;  A Makeutility is also supplied.andM;PerformanceandM;Caveat: this is only pre-release software.andP;  Performance was a littledisappointing; about 15% slower to compile, producing .EXE files about 10%larger - although this is probably inevitable when supporting dynamiclinking.andP;  Compared to using PLink86, linking was about three times faster.andO;Running applications, we found that indexing (a traditionally heavy-dutynumber) was about 15% slower.andP;  Nantucket has promised that the releasedcompiler (and its resulting executable) will perform at least as well asSummer'87.andM;What's the same?andM;As far as we can tell, Five-Oh is completely source code compatible withSummer 87.andP;  An existing application (which only used the Clipper and Extendlibraries) had exactly the same bugs when recompiled.andM;In the manual, commands and functions which are obsolescent are marked withan asterisk.andP;  We have due warning about what is to be dropped.andP;  Generally,the functions marked for deletion are those which are hangovers frominterpreted dBASE (eg CALL, TEXT).andM;There has not been a vast increase in the number of core functions - if youwant graphics, or need to use the mouse, then you'll still have to buy anadd-on package.andP;  The third party developers have had beta copies of Clipperfor some months, so most add-on libraries should be ready shortly after therelease of Clipper 5.andP;  In Conclusion So what has the Clipper development teambeen doing these last three years? Well, they appear to have spent about 18months reading a lot of C manuals.andP;  They seem to have thought pretty hardabout how developing ought to be.andP;  I think that they have created an open andvery usable compiler.andP;  1, for one, am keener to get my hands on the fullrelease than before.andP;  Oh? So I like it then? Yeah! The question that remainsis  When is it actually coming out?'.andP;  I think the answer is that we shouldstart seeing it in the UK around the end of July.andO;</TEXT></DOC>