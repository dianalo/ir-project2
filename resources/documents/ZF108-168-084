<?xml version='1.0' encoding='UTF-8'?>
<DOC><DOCNO>  ZF108-168-084  </DOCNO><DOCID>08 168 084.andM;</DOCID><JOURNAL>EXE  Feb 1990 v4 n8 p8(4)* Full Text COPYRIGHT Process Communications Ltd. (England) 1990.andM;</JOURNAL><TITLE>Lattice come home. (version 6.0 of the Lattice C DevelopmentSystem for DOS and OS/2) (Software Review) (evaluation)</TITLE><AUTHOR>Watts, Will.andM;</AUTHOR><SUMMARY>Lattice Inc's Lattice C Development System version 6.0 for DOS andOS/2 is the first major upgrade of the package since 1985, whichthe company blames on the delay in completion of the ANSI standardand on the impending release of OS/2, which the company claims USusers prefer.andP;  Lattice once set the standard for the C compilerindustry, but now it follows Microsoft's lead.andP;  The programsupports small, medium, compact, large and huge memory models, butdoes not support tiny; all the programs in the utility except theeditor and debugger run in either real or protected mode.andP;  Thecompiler runs at about the same speeds in testing as thecompetition and it provides many special features to facilitate Cprogram development.andP;  The documentation suffers from some seriousomissions, and the quality of the utilities varies.andP;  Lattice madeup considerable lost ground in version 6.0, but some details couldstand some improvement.andM;</SUMMARY><DESCRIPT>Company:   Lattice Inc. (products).andO;Product:   Lattice C Development System 6.0 (Compiler).andO;Topic:     CompilersC Programming LanguageUpgradingEnhancementsEvaluation.andO;Feature:   illustrationphotographgraphprogram.andO;Caption:   Compile/link times and .EXE file size of test program. (graph)The optimisation tests. (program)andM;</DESCRIPT><TEXT>The Lattice C Development System Version 6 for DOS and OS/2 - henceforth'Lattice C V6.0'- is one of the most long awaited upgrades in the industry.andO;The previous major version release  V3) of this package came out in 1985;fattice C V6.0 is on a par with dBASE IV itself as a a software toot notworth holding your breath for.andP;  Why did Lattice delay so long in upgrading?andO;Over a period of years, Lattice C has declined from being the market leader(such was its status that when Microsoft first began supplying a C compiler,it used a rebadged version of the Lattice's) to the more recent position,where surely only the faithful, the skinflint and those with vast amounts ofLattice C code to maintain still used it.andP;  Lattice blames the interval on theemerging ANSI standard  'we were unable to release Version 4 in 1986 becausethe ANSI committee took a little longer than expected'), OS/2  'we realisedthat the USA market preferred OS/2 support to be bundled with the DOScompiler') and everything except Lattice itself.andM;If the reasons for its late appearance are not crystal clear, some of theconsequences are.andP;  The new product enters a market with the reputation of itselderly forbear a hindrance, not a help.andP;  Where once Lattice set the standardfor such thing,5 as calling conventions, it must now follow Microsoft.andP;  ifthe upgrade had appeared earlier, it would have been sufficient for thecompiler to have been tweaked a little: an optimisation here, an extralibrary call there.andP;  As things stand, Lattice C V6.0 needs to demonstrateconsiderable advantages over its competitors.andP;  The publicity accompanying theproduct's release in effect acknowledges the point, comparing it tospecialist super- optimiser Watcom C as well as Microsoft C V5.1 and Turbo CV2.0.andP;  Lattice found that its software beat the competitors into the groundat every turn.andP;  This was not, however, quite my experience, as you shall see.andO;Big One thing that may be asserted about the package without danger ofcontroversy: it's big.andP;  It arrives in a huge box, which is so full that onceyou have unpacked it, you cannot get all the stuff back in.andP;  The softwareinstalled itself straightforwardly.andP;  The twelve 360 KB disks contained enougharchived material to fill about 7 MB on my hard disk (this includes all thevarious optional libraries and utilities).andP;  Lattice creates (to my eyes) aslightly peculiar directory structure: include files are placed together withthe compiler's executables in \LC, while the memory-model dependent librariesare placed in separate directories of their own; \LC\S for the small model,\LC\L for the large model and so on.andP;  incidentally, Lattice C V6.0 supportsfive memory models: small, medium (which Lattice calls  large program'),compact ('large data'), large and huge.andP;  There is no support for the tinymodel; presumably the company felt that it was beneath the dignity of an OS/2compiler to produce.COM files.andM;The compiler itself is invoked from the C: prompt with the LC command.andP;  I usethe term  C: prompt' as opposed to  MS-DOS prompt 'advisedlv: nearly all theLattice utilities are fullv- fledged familv applications and are able to runin both real and protected modes.andP;  The exceptions, the editor and thedebugger, are supplied in duplicate and differ verv little in theiroperation.andP;  LC is similar to Microsoft's CL program, but is more versatile:as well as orchestrating the compiler phases and Lattice's linker, thisprogram can also invoke the assembler, librarian and binding (familyapplication production) tools.andP;  Naturallv, the LC command has dozens ofoption switches, many of which are described in the documentation (but seebelow for a more detailed whinge about the manuals).andP;  How does the compiler'sperformance compare with its peers? The chart in Figure I shows the resultsfrom compiling a 5300 line program with Lattice C V6.0 and six rivals, withdefault options (ie no optimisations).andP;  From this vou mav gather that LatticeC V6.0 produces files of about average size, but lumbers a little to producethem.andP;  This is all right by me, especiallv as the parser is very good atthrowing up LINT like warning messages (it caught me indexing into a twodimensional arrav with an outsized constant; something you expect effetePascal compilers to pick up, but not macho, devil-mav-care C), but it mightbe slow for the programmer who uses it in a twiddle the code, then trv it andsee' fashion.andP;  In the area of optimisation, however, things are different.andO;Look at the object code produced bv the compiler for optimisation Test 1(shown in Figure 2).andP;  The perfect implementation of the pointless functiontestfn( ) - the single instruction  RET' - has eluded the program, but bygum! it was a close run thing.andP;  Lattice is the first compiler which I haveseen that can decide to implement functions  'inline', like macro calls.andO;implementing dummy fn ( ) as an inline function led the optimiser to thediscovery that the call had no global side effects and could be eliminated.andO;This places Lattice easilv at the top of the league for Test I and a vervclose second to Watcom V7.0 for Test 2, as vou can see in Figure 3.andP;  (Carefulreaders of previous articles will have spotted that I am guilty ofrevisionism.andP;  Watcom's speed for Test 2 has improved bv 58 cvcles - I'mafraid that I previously allotted five cvcles to an instruction which onlytakes three.andP;  Sorrv.) A clear points win to Lattice, then-, and I mustdevelop some more challenging tests to give the next generation of optimiserssomething to bite on! How about ANSIfication? The accompanving blurb billsthis as the ANSIest compiler yet.andP;  It probablv isn't bad - I defer to BSIexpert and .EXE writer Neil Martin in these matters - but I must report thatthe very first program that I created under Lattice failed to compile withTurbo C because of a lack of a Lattice ANSI violation (NULL not defined inSTDDEF.H, see Section 4.1,5 of your  Draft Standard).The  ANSI conformantcompiler remains unwritten.andP;  Lattice's most important first with this packageis to do with the wav the dual operating systems are handled.andP;  Suddenly,producing code for OS/2 seems natural, almost.andP;  The compiler can generate real/family/ protected mode programs irrespective of the environment fromwhich it is invoked; so one could use it to develop and debug OS/2 familyapplications without actually having a copy of the operating system.andP;  Thepackage includes everything vou need to create OS/2 Vl.O applications andDLLs: compiler, LINK/2 compatible linker, header files and libraries.andP;  Todevelop for OS/2 PM, however, you will need a copy of Microsoft's PM toolkit.andO;Lattice does not claim to support Microsoft Windows, by the wav, but thoughtthat the compiler's cod@ might well work'.andP;  The problem area, according to alattice representative, is the reliance of some versions of Windows onspecial prologues being generated at function entry points.andP;  Microsoft hasnot published the details of these prologues.andM;A Private FunctionandM;Lattice has introduced some non-ANSI keywords to cope with problems specificto the OS/2 environment.andP;  A private function is one that sets up its own datasegment on entry.andP;  This is useful when writing functions for use in DLLS.andO;Since anv particular function may be called simultaneouslv in differentthreads, it needs to maintain several copies of its static data to achievere-entrancv - which is the facilitv that private keyword provides.andP;  Globaldata may - rather confusingly - also be declared p r i va t e. This causes afresh copy of the data to be duplicated for each new thread.andM;The pad kevword, and its counterpart nopad, are used to control the length ofstructures.andP;  To explain: Lattice has chosen not to support huge  andgt;64 KB)objects whose components straddle segment boundaries.andP;  Thus given thedeclaration struct FOO IandM;int x;andM;float y;andM;/* 6 bytes long struct FOO far stuff[l00000]; the lement tuff [10922]straddles a segment boundarv.andP;  The solution is to pad out FOO to a lengthwhich is a power of 2 in this case to a length of eight bvtes.andP;  The padkeyword does this automaticallv, but it's up to vou not to create structureswhich require (16KB + 1 byte) storage.andM;That Documentation just thinking about the documentation makes me cross.andO;Thanks to the crafty, omission of a description of the optimisation switches,the compiler nearly came fourth instead of first in the fastest codecompetition.andP;  The day was only saved by a very late, chance re-examination ofthe READ.ME file.andP;  But this is not the only stimulus to my ire.andM;The manuals, I should explain, take the form of four IBM-style ring binders.andO;These are all filled to the point where the rings spring open and disgorgethe contents at the least provocation.andP;  Volume I covers the compileroperation and utilities, Volumes 2-3 the libraries and Volume 4 contains theassembler's material and a giant index.andP;  it is certainly impressive in size,but, as we all know, size isn't everything.andP;  In its favour: it's nothypertext, the text is clear and easy to understand and the print is goodquality.andP;  The debit side of the ledger dominates: information is difficult tofind, left out entirely or just wrong.andP;  Here are some more examples to backup my case.andP;  Pre-defined macro symbols, such as ANSI and LATTICE, wereexplained only in the compiler switches section and do not feature in anyindexes.andP;  Descriptions of the interrupt enable/disable functions CLI ( ) andSTI ( ) were, like the optimiser switches, completely absent - one begins tosuspect that the program is really a C + + compiler, but they just forgot tosay so in the manual.andP;  The code fragment given to illustrate the use of theComSendK( ) function shows the wrong number of arguments, ie no one botheredto test-compile the examples before putting them in the manual.andM;A Man from Lattice tells me that the documentation is currently beingrevised, with a re-issue scheduled for March.andP;  If you have nothing better todo with your time than thrash through hundreds of pages searching fornon-existent references, don't bother to wait.andM;The Libraries A major selling point for Lattice C V6.0 is the extensivebundled collection of libraries.andP;  As well as a complete set of ANSI functions- including the obscure recent ones like setlocale ( ) - there is a hillselection of UNIX functions, mathematics functions (hands up everybody whoused y1 ( ) -  first order bessel function of the second kind'- in the lastsix months), specialised protected mode calls for thread handling, and theusual range of de facto standard functions: things like kbhit ( ) formonitoring the keyboard buffer and cprintf ( ) for printing directly to theconsole.andP;  There is one snaglet.andP;  Lattice C uses a different set of headerfiles from Microsoft/Borland/Zortecfl/Watcom.andP;  This seems silly: C code thatuses only these plain vanilla calls should work without change.andP;  it wouldsurely be to Lattice's advantage to make sure this happened.andP;  Missing fromthis base library are those low-level functions, with names like setvect ( )and keep ( ), that let you put together TSRs without dirtying your soft,clean C programmer's hands with assembly language.andP;  Lattice says that thisomission is caused by them not yet having got around to it (rather thandeliberate policy) and that an update will follow in due course.andP;  As well asthe core set of system functions there are four application libraries.andP;  Thegraphics library suffers from the fact that it can only be used in real modebecause, as the documentation quips, it is more natural to use thePresentation Manager graphics facility when designing for OS/2'.andP;  There are44 functions, which provide you with all the functions you need to get thingsdone, except for perhaps for text/ font manipulation (the functions use theROM bit-mapped fonts).andP;  I have been using this library heavily and have foundthe code reliable and fast.andP;  All the standard graphics card types fromHercules to VGA are supported.andP;  There are no routines for 3D histograms orpie- charts.andM;The Curses library is an emulation of the UNIX System V screen manipulationinterface.andP;  The Curses is based around simple text- based windows which arefirst put together in buffers, then flushed to the terminal or screen.andP;  Thelibrary works in both real and protected modes, so it may be used to createapplications portable between MS-DOS, OS/2 and UNIX.andP;  The dBC III librarylets you create, write and read from DBASE III PLUS compatible DBF, .NDX andDBT files.andP;  it also runs in both modes - a suggested use is a PM applicationthat accesses a DBASE database - as does the final library, theCommunications Librarv.andP;  This contains a set of routines to drive the serialport.andP;  The functions range from ComGetc ( ), which returns the next availablecharacter from the buffer, to ComSendK ( ), which transmits a complete diskfile in accordance with the Kermit error-checking protocol.andP;  In the versionof the compiler that I tested  V6.01) this function, plus its XModem andYModem brothers, didn't work property.andP;  The rate of transmission wassometimes verv slow (for a given baud rate), files were invariably garbledand the programs crashed frequently for not much reason.andP;  Lattice tells meall this known about and is to be fixed in later versions.andP;  Even if it thiswere the case I should still have doubts about these functions - they do notgive the programmer sufficient control over important things like errors, andwhere the incoming file should go.andP;  Utilities There are many utilities, ofvarying quality, supplied with the package.andP;  LSE is a full screen editor.andO;You can invoke the compiler from within it-, it can point out the lines wheresyntax errors occurred.andP;  it boasts a number of moderately neat features toaid the writing of C and assembly language programs; for example, it indentseight spaces after a line ending in a  .andP;  It has a configuration program, forsetting up your own key mappings, which often works.andP;  its keystrokes are notbased on any other editor that I have met.andP;  I confidently predict that, ifvou are already familiar with any other full screen editor, you will leavethis one well alone.andP;  It's not that it's especially bad., it just doesn'toffer enough to tempt you to change.andM;The source level debugger is called CodeProbe.andP;  It is a very workmanlikepiece of software.andP;  Unlike Watcom's offering WVIDEO, CodeProbe knows how tohow save a graphics screen (sorry about my obsession with graphics modes; Ihave been working on a graphics program for some weeks).andP;  As is now thefashion, there is a 'remote debugging' option, where a kernel program on thetarget PC is connected by a serial link to a front end module running onhost.andP;  The idea is to maximise the amount of memorv available to the testprogram.andP;  The lash-up did not work very well for me.andP;  The kernel programprinted  Press Ctrl-Break to end' but wouldn't when I did, and th front endkept crashing.andP;  However, the de bugger worked fine on a single machine Thereis little to choose between Code View and CodeProbe as an OS/2 debuggeCodeProbe's debugging information, incidentally, is held in a proprietaryformat You cannot use it to debug programs produced by other compilers.andP;  Theassembler, LASM, is really none of my business: one macro assembler seemsvery much like another.andP;  The documentation claims that it is very nearly MASMcompatible, and that it can handle all IAPX opcodes up to 80386 native modeand 80387.andP;  The program correctly translated the fragments that I offered toit.andP;  There is also a simple make utility called LMK, a TOUCH program, across-referencer and, finally, GREP and various other little programs,reeking of UNIX, for doing terribly clever things with pipes and redirection.andO;Conclusion Lattice needed to catch up a lot of ground with this product.andP;  Tosome extent the company can claim to have done this: the compiler has OS/2support, a gargantuan set of library functions and a white-hot optimiser.andO;And yet, and yet...andP;  What about the documentation? Will Lattice put it rightat the second attempt? What about all the little bugs in the programs? Shouldone hang on until it stabilises? What about the new compilers rumoured to beimminent from Borland and Microsoft? One thing at least is clear.andP;  I promisedto buv a pint for the creator of the first compiler ti, out-optimise Watcom.andO;I thought my beer would be safer for longer than four months.andP;  However, ifLattice inc would care to send a representative to the Barley Mow pub,there's a bottle of Newcastle Brown waiting there for him.andO;</TEXT></DOC>