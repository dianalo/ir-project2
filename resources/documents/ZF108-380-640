<?xml version='1.0' encoding='UTF-8'?>
<DOC><DOCNO>  ZF108-380-640  </DOCNO><DOCID>08 380 640.andM;</DOCID><JOURNAL>Digital Review  April 16 1990 v7 n15 p33(3)* Full Text COPYRIGHT Ziff-Davis Publishing Co. 1990.andM;</JOURNAL><TITLE>Put a tiger in your VAX. (DEC Disk Striping Driver) (HardwareReview) (includes related article on benchmark testing theproduct) (evaluation)</TITLE><AUTHOR>Eberle, Andrew E.andM;</AUTHOR><SUMMARY>DEC's VAX Disk Striping Driver for VMS offers affordable relieffrom I/O bottlenecks and boosts the performance of storagesubsystems.andP;  Prices range from $321 for a VAXstation to $3,339 fora VAX 9000-series system.andP;  The Disk Striping Driver accepts anyI/O request packet sent to the device and splits it into smallerpackets, which are then sent to the physical disks that belong tothe stripe set.andP;  Benchmark testing did not indicate linearperformance improvement as stripe-set members were increased.andO;System managers can avoid page alignment problems by ensuring thattheir applications are page aligned or by using RMS.andP;  The way inwhich transfer size is incremented also contributes to less thanoptimal performance.andP;  Operation rates.andP;  however, increase at the100 millisecond response time threshold.andP;  Striping is a solutionwhen the object of I/O is a data that cannot be split.andM;</SUMMARY><DESCRIPT>Company:   Digital Equipment Corp. (products).andO;Ticker:    DEC.andO;Product:   DEC VAX Disk Striping Driver for VMS (Disk storage device).andO;Topic:     EvaluationI-O ManagementPerformance ImprovementTestingStorage EquipmentBenchmarksProducts.andO;Feature:   illustrationgraphcharttable.andO;Caption:   Disk performance benchmark results: how stripping improvesthroughput. (graph)Faster I/O with disk stripping. (chart)Product description. (table)andM;</DESCRIPT><TEXT>PUT A TIGER IN YOUR VAXandM;TEST LABS BRIEFandM;PRODUCT:  VAX Disk Striping Driver for VMS (STdriver version 1.0)andM;DESCRIPTION:  Device driver that perform data striping acrossmultiplephysical disksandM;VENDOR:  Digital Equipment Corp. 146 Main St. Maynard, MA 01754-2571 (508)493-5111andM;TEST CONFIGURATION:  VAX 6460 running VMS 5.2connected to an HSC70 ith fourRA90s and six RA82s.andP;  All RA90S and RA82s were on separte HSC5X-DArequesters.andP;  VAX 8840 running VMS 5.2, connected to three ESE20s via separateKDB50s.andM;PRICE AS TESTED:  $3.339 for either the VAX 6460 or the VAX 8840andM;PROS.andP;  * Operation rates improve threefold for one logical device * Supportsunlimited number of stripe-set members * Volume shadowing is still possiblewhen stripingandM;CONS: * Only same type of disk devices can be stripedandM;READER SERVICE: Circle No.andP;  401 on Reader Service CardandM;Superior system performance on a VAX requires not only a first-rate CPU, butalso an efficient and powerful storage subsystem.andP;  VAX CPU performance hasincreased fiftyfold, but disk storage subsystem performance has remainedstatus quo, forcing system analysts to focus on I/O as the bottleneckinhibiting overall system performance.andP;  Higher operation rates--the number ofqueued input-output operations (QIOs) per second achievable at a givenresponse time threshold--and faster transfer rates are needed to satisfy asystem's appetite for I/O.andM;A new product from DEC, the VAX Disk Striping Driver for VMS, is a freshalternative for system managers with disk I/O problems.andP;  The Disk StripingDriver, or STdriver version 1.0, distributes I/O to multiple physical disksof the same kind and treats them all as if they were one logical disk.andP;  Theend result is improved throughput and operation rates.andM;STdriver accepts any I/O request packet sent to this pseudodisk device andsplits it into smaller packets, which are then sent to the physical disksbelonging to the stripe set.andP;  To do this, the driver splits the original I/Orequest packet into chunks.andP;  The system manger sets the size of a chunk.andM;Every command for the Disk Striping Driver begins with STRIPE and is followedby the striping operation to be carried out.andP;  The first step in creating astripe set is to initialize all members of the set.andP;  The STRIPE INITIALIZEcommand initializes all the members at once (Fig.andP;  1).andP;  At this step, thesystem manager must designate the order of the disks in the stripe set.andP;  Heor she must put specific formatting information into the set members todesignate them as a given member.andP;  Members cannot be switched around afterinitialization.andM;All disks in a stripe set must be the same type.andP;  A mix of RA82s and RA90s,for example, isn't possible.andP;  However, each stripe set can contain anunlimited number of disks.andM;Volume shadowing is still permitted with stripe sets, but each member of thestripe set must be shadowed separately.andP;  The pseudodevice cannot be shadowedas a whole unit.andP;  In other words, a system manager can stripe a shadow set,but can't shadow a stripe set.andM;The chunk size is set during initialization.andP;  If no size is specified, thechunk size will default to the track size of the disks in the STRIPEINITIALIZE command.andP;  For all our Load benchmark tests, we used the defaultchunk-size setting of the disk being tested.andM;In our striping test of RA90s, we used a chunk size of 69 to match the tracksize of an RA90 (Fig.andP;  2).andP;  With a large I/O of well over 300 blocks and astripe set comprising four Ra90s, the Striping Driver decomposed the I/O,sent the first 69 logical blocks to drive No.andP;  1, the next 69 logical blocksto drive No.andP;  2, the third set of 69 blocks to drive No.andP;  3, the fourth setof 69 blocks to drive No.andP;  4 and then returned to drive No.andP;  1 with the fifthset of 69 logical blocks.andP;  When the fifth section of the I/O was smaller than69 blocks, the software used only as much space as needed.andM;Setting the chunk size to 69 with a stripe set of RA90s uses disk geometry toachieve the most efficient transfer rate for that drive.andP;  Writing or readinga complete track eliminates the overhead of moving to the next track, therebyspeeding up transfer rates.andP;  The result is four RA90s accepting data atoptimal efficiency from one source.andP;  This &quot;intake manifold&quot; allows the singlesource of data to flow faster, achieving a greater I/O subsystem efficiency.andM;After initialization, the next step is to bind the stripe-set memberstogether, keeping their order the same as it was in the STRIPE INITIALIZEcommand.andP;  Next, the regular VMS INITIALIZE and MOUNT commands are used toprepare the pseudodivice--in our case, STR$DEV1.andP;  To dismantle the stripeset, a system manager would use the VMS DISMOUNT command to dismount thepseudodevice.andP;  This command must be followed by the STRIPE UNBIND command tobreak up the stripe set.andM;STRIPE SET AND SUITEandM;We tested disk striping using DR Labs' disk benchmark suite and found itpossible to raise both operation rates and throughput in certainconfigurations.andP;  However, users will encounter limitations at higherthroughput levels if the disks that are to be part of the stripe set sharethe same intermediate data channel.andM;Throughput tests for a stripe set of RA90s on the HSC70, the Contiguous graphportion of DR Labs' Disk Performance Measurement (DPM) benchmarks, did notshow a linear improvement in performance as stripe-set members were increasedfrom one to four.andP;  Because one RA90 can achieve a transfer rate of roughly1.7MB per second, theoretically four together should be able to handle 6.8MBper second.andP;  Unfortunately, the CI bus adapter on the VAX 6440 can onlysupport 2.2MB-per-second transfer rates.andP;  The bottleneck in the CI adapterprevented striping from linearly increasing performance.andP;  This problem can beavoided with multiple CI ports, which VMS 5.4 supports along with loadbalancing.andM;This less-than-linear performance improvement applied to the RA82s in ourtests as well, which have a rated transfer rate of 1.4MB per second and whichwere also connected to the HSC70.andP;  For this reason, we decided to evaluatethe results of our throughput tests only on three ESE20s, each connected to aseparate controller, bypassing the HSC70 and its limitations.andM;As measured by our DPM benchmarks, throughput peaks for two and three ESE20sbound into one stripe set came close to double and triple that of one ESE20in our Contiguous benchmark (Fig.andP;  3).andP;  Figures from our Random benchmarkshow that incremental increases were not as substantial as the stripe-setmembers were increased.andM;The peaks observed in the Contiguous graph show the best that the StripingDriver can deliver.andP;  The valleys in the Contiguous graph and the performancegains expressed in the Random benchmark are examples of less-than-optimalperformance, as expected from the additive value of the stripe set.andM;The stripe set was built with a chunk size of 31 blocks, which is one majorreason for the peaks and valleys.andP;  The peaks occurred around or on a multipleof the chunk size.andM;For larger transfers, where a transfer is not a multiple of the chunk size,the stripe set will be inefficient and peak performance will be less thanoptimal; seek and latency times on the stripe members will become a factor.andM;FAST, SMOOTH DRIVINGandM;Because we queued only two QIOs--one waiting while one was active--ST drivercould handle both immediately, another QIO was not simultaneously ready.andM;For system managers using the Striping Driver with small data transfers, DECrecommends a queue depth of four times the number of members in a stripe setto produce the best throughput.andP;  In this arrangement, all stripe-set membersare busy and the controllers that connect to each member have enough I/Ocommands to do seek optimization.andM;Also contributing to less-than-optimal performance in our tests werenon-page-aligned transfers.andP;  These are data transfers in which memoryallocated for each transfer is positioned across natural page boundaries.andM;For DPM reads on transfers greater than a trip size (which equals the chunksize multiplied by the number of members), the Striping Driver had to do itsown buffer manipulation to align the read buffer's data within pageboundaries.andP;  The driver had to allocate a two-page buffer, then transfer thedata and finally deallocate the buffer.andM;System managers can avoid these inefficiencies by ensuring that theirapplications are page-aligned or as long as they use RMS.andP;  RMS can be tweakedto do page-aligned buffers.andP;  Page-aligned buffers are an important part ofany application program aiming to do large data transfers efficiently.andM;One final reason that our DPM benchmarks did not express optimal performanceis the way in which transfer size is incremented.andP;  Because our Contiguousbenchmark increments transfer sizes by two blocks, peaks are missing wherethe multiple of the block size is odd.andM;For operation rates, DR Labs' Load benchmark results showed that strippingincreased operation rates at the 100ms response time threshold (Fig.andP;  4).andP;  Asexplained earlier, operation rates are the number of QIOs per second possibleat a certain response time threshold.andP;  Response time is the time, inmilliseconds (ms), that it takes for a QIO to finish.andP;  DEC considers 100msthe slowest acceptable response time for OLTP transactions.andM;Operation rates increased in a near-linear fasion from one RA82 to six RA82s,as well as from one RA90 to four RA90s.andP;  Each upward-curving line on the Loadgraphs represents a curve fit to the empirical points obtained from the Loadbenchmark for each stripe set.andP;  The point on the x-axis where these curvedlines intersect the 100ms mark on the y-axis marks the greatest number ofqueued I/Os per second achieved with that stripe set while staying withinDEC's response time threshold.andM;The operation rate also increased in a near-linear fashion for one to threeESE20s in a stripe set.andP;  These ESE20s were evaluated at a 20ms response timebecause a shrter response time should be expected from a RAM disk productsuch as the ESE20.andM;Installation of the Disk Striping Driver takes no more than 20 minutes.andO;STdriver runs under VMS version 5.0 or higher and works with anyVMS-supported disk.andP;  The installation procedure inserts special strippingcommands into the DCLTABLES to make the STRIPE command native to VMS.andP;  Thestriping start-up command process called from SYS$MANAGER:SYSTARTUP_V5.andP;  COMloads STdriver each reboot.andM;Would-be buyers of the Disk Stripping Driver should be aware that adding apseudodisk device with extraordinary throughput and operation rates is notnecessarily the solution to a system's I/O problems.andP;  Performance gains fromstriping vary tremendously, depending on the applications that each userruns.andM;For example, one application that would not benefit from striping would be asingle process doing small synchronous I/Os.andP;  A single physical drive couldsatisfy these I/Os more quickly.andP;  CPU-bound systems will not benefit fromstriping either.andM;I/O bottlenecks can sometimes be mitigated by splitting up I/O activityacross a number of physical disks without resorting to striping.andO;Nevertheless, even in these instances, having the physical disks stripedwill, over time, balance the load of the two I/O-intensive applications moreefficiently than simply putting one application on drive No.andP;  1 and the otheron drive No.andP;  2.andM;When redistributing I/O on physical drives, system managers should keep inmind the intermediate data path by which physical devices are connected tothe system.andP;  Two disks connected to the same controller will lead to abottleneck because the combined transfer-rate capabilities of the two driveswill exceed the controller's capabilities.andM;Striping is most appropriate when the object of intense I/O is a data file orapplication that cannot be split over multiple physical disks, such as alarge image file, or for single-source streams of data, such as a satellitefeed.andP;  In these cases, one physical device can't deliver the performancenecessary to capture the data.andM;The VAX Disk Striping Driver for VMS, priced from $ 321 for a VAXstation to $3,339 for a VAX 9000-series system, offers affordable relief for I/Obottlenecks that can't be solved without changing the hardware configuration.andO;We give thumbs-up to this new utility from DEC that boosts the performance ofstorage subsystems, the one facet of VAX systems that has lagged behind inperformance improvements.andM;TEST LABS MODELandM;The theory behind disk striping is tha data transfers and I/Os can bedistributed evenly across each member of the stripe set, thus increasing thetransfer and the I/O rate.andM;Applications that stand to benefit from striping include scientific dataanalysis and image data manipulation, which require high rates of throughput,and business applications such as OLTP, which require that the I/O subsystemhandle a tremendous amount of I/Os per second.andM;DR Labs' evaluation of DEC's Disk Striping Driver aimed to determine whetheroverall throughput or I/O operation rates increased linearly as stripe-setmembers were added.andP;  To check this, we used DR Labs' standard diskbenchmarks, Disk Performance Measurement (DPM), which measures I/O throughputfor a wide range of block-size transfers, and Load, which measures I/Ooperations per second at different response times.andM;We ran our benchmarks on two system configurations.andP;  One was a VAX 6460connected to an HSC70 with four RA90s and six RA82s.andP;  All the RA90s were onseparate requesters, as were the RA8is.andP;  (Requesters are controllers on anHSC70.)andP;  Putting such dish on a separate requester guarantees an exclusivedata path for that disk.andM;The second configuration was a VAX 8840 connected to three ESE20s viaseparate KDB50s.andM;In both configurations, all benchmarks were run on one processor of themultiprocessor machines.andO;</TEXT></DOC>