<?xml version='1.0' encoding='UTF-8'?>
<DOC><DOCNO>  ZF207-157-600  </DOCNO><DOCID>07 157 600.andM;</DOCID><JOURNAL>MacUser  May 1989 v5 n5 p114(6)* Full Text COPYRIGHT Ziff-Davis Publishing Co. 1989.andM;</JOURNAL><TITLE>Following protocol. (AppleTalk filing protocol)</TITLE><AUTHOR>Jones, Reese.andM;</AUTHOR><SUMMARY>The AppleTalk Filing Protocol (AFP) resides in the presentationlayer of the OSI model, allowing users to share data files andapplications from a shared resource such as an AFP file server.andO;AFP-compliant file servers, such as AppleShare, are AFP serversthat can be accessed by the AppleShare client software or byapplications that make direct AFP calls to the operating system.andO;AFP translates local file calls in a user's machine into networkpackets.andP;  The packets go over the network to the File ServerControl Program (FSCP) on the file server machine, which can be aMacintosh or any computer configured as an AFP server.andP;  The FSCPthen translates the AFP file calls into a form that the servermachine's operating system can understand.andP;  Non-AFP compliance cancause problems that emphasize the need for standardizing the wayapplications talk to each other and to servers.andM;</SUMMARY><DESCRIPT>Product:   AppleTalk (Local area network) (standards).andO;Topic:     File TransferLocal Area NetworksProtocolFile ServersStandardizationNetwork Management.andO;Feature:   illustrationchart.andO;Caption:   AppleTalk protocol architecture. (chart)AFP file-access model. (chart)andM;</DESCRIPT><TEXT>Following ProtocolandM;AppleTalk is one of the most widely used network operating systems in theworld.andP;  That fact may come as a surprise to those who don't follow thesearacne matters.andP;  AppleTalk nodes up and running count in the millions, andit's not uncommon to find a large cluster of AppleTalk networks (called aninternetwork) with thousands of computers, even of different types, workingas an integrated whole.andP;  With the use of high-speed lines and modems, someAppleTalk internetworks span continents.andM;Obviously not every AppleTalk network is that grandiose.andP;  The kernelMacintosh AppleTalk network consists simply of a Mac running AppleTalksoftware, connected to an AppleTalk-equipped ImageWriter II or laser printervia LocalTalk twisted-pair cabling.andP;  In fact, that is most users' initialrationale for setting up AppleTalk: Several people want to share a singleprinter.andP;  But the network can be used to shre other resources -- such aselectronic mail, databases, gateways to mainframes -- and will be used forother applications yet to be invented.andP;  What's more, all of these networkingapplications can be used simultaneously.andP;  AppleTalk lets you perform manytasks at the same time.andM;APPLETALK FILING CABINETSandM;One key ability offered by AppleTalk is the sharing of files over a network.andO;I'll be explaining how that's made possible through the AppleTalk FilingProtocol (AFP).andP;  But for the moment, let's make real-world analogies forother resources on a network:andM;* Laser printer: the office copy machine -- you do it yourself.andM;* Central print spooler: the office copy machine, with a group clericalassistant.andM;* Distributed print spooler: the office copy machine, with a personalsecretary.andM;* Central file server: the central file room or library.andM;* Database file server: the central file room or library plus librarian.andM;* Distributed file server: the file drawers in your and others' desksavailable everywhere.andM;* Server-based E-mail: telephone with phone-mail ability.andM;* Distributed E-mail: the place for telephone message slips on the desk.andM;* Timbuktu (virtual screen): the conference/meeting room or a telephoneconference.andM;* Timbuktu file folder: the in-box on your desk for Federal Express, mail,and files.andM;In our analogy, a file server may be compared to a file cabinet with multipledrawers.andP;  Within each drawer you can put multiple folders, which can in turncontain multiple papers and pictures.andP;  In a hierarchical model, theserelationships can be fairly strict -- a kind of Chinese box.andP;  In itscentralized version, the office has a file room that contains cabinetsf thecabinets contain drawers; the drawers, folders; the folders, files, withadditional organization within the file.andP;  The user has keys to some of thesedrawers, folders, and files.andP;  In its decentralized version (as in TOPS), yougive some of your coworkers the keys to the file drawers in your desk.andP;  Andservices like E-mail or Timbuktu (virtual-screen software that allows you tosee the screen and files of another Mac on the network as if they were yourown) have their own real-life analogies in message and conference systems.andM;The bottom line is that the Macintosh Hierarchical File System (HFS) isorganized in the local operating system in the same manner as a file cabinet,and that Apple developed AFP to be the network extension of HFS.andP;  Thedevelopment of AFP in turn laid the groundwork for AppleShare, Apple'simplementation of an AFP-complaint file server.andP;  But what is AFP and how doesit relate to AppleShare and TOPS, central and distributed file servers(respectively) for AppleTalk?andP;  To answer that, we need to step back and takea look at the AppleTalk protocols and how AFP fits into the grand scheme.andM;APPLETALK AND THE AFP SERVERandM;You may have heard of the International Standards Organization/Open SystemsInterconnection (ISO/OSI) seven-layer protocol cake, the stack ofinterrelated software and hardware layers that regulate the communicationbetween computers on many networks, including AppleTalk networks.andP;  Quitesimply, this stack of protocols constitutes the network operating system thathelps define AppleTalk.andP;  The protocols accomplish many things, but theirlayering provides some very important abilities.andP;  Oneis that the networkoperating system can be run over any transmission medium.andP;  That means, amongother things, that the bottom two layers may be swapped out for differentmedia.andP;  (See &quot;Making a Small Net Work&quot; in this issue.)andM;Furthermore, AppleTalk packets can be intermixed with other networks such as3Com, Novell, DECnet, and transmission control protocol/Internet protocol(TCP/IP) network file system (NFS) communications, and between multiple typesof computer operating systems such as MS-DOS, OS/2, Pro-DOS, UNIX, VMS, andothers.andP;  In this case, because they follow the ISO/OSI model, they can resideside by side over the wires without interfering with one another.andP;  Theseoperating systems can even work with one another at the network level withthe use of gateways to conver from one protocol to another.andP;  Furthermore,with Novell's recent announcement of its Open Link interface, a givencomputer can use multiple network operating systems simultaneously.andM;AppleTalk can also operate over a wide range of speeds.andP;  The most common is230,400 bits per second (built-in LocalTalk frequency), but the AppleTalkprotocols can be useful over a range of 1,200 bits per second (forasynchronous AppleTalk -- the minimum frequency for modems accessing anAppleTalk network) all the way up to 10 million bits per second (forEtherTalk) and more.andP;  The point to remember here is not speed, but frequency:While data always moves at the same speed, regardless of cabling, it doesn'talways move at the same frequency.andP;  A higher frequency means that datapackets occur more often.andP;  Different segments can be connected over AppleTalkto a common internetwork.andM;AFP resides at the upper end of the protocol stack -- just below theapplication layer in the presentation layer -- along with PostScript, Adobe'spage-description language.andP;  In the case of PostScript, the page descriptionis presented in this layer to the laser printer, which then prints out thepage.andP;  In the case of AFP, the description of files out on the network ispresented in a form that the user's file system and applications canunderstand.andM;The AFP protocols that reside in the presentation layer allow users to sharedata files and applications that reside on a shared resource, such as an AFPfile server (see Figure 1).andP;  Here's where AppleShare comes in.andP;  AppleShare isApple's version of an AFP-compliant centralized network file server.andO;Centralized AFP-compliant servers are also available from several otherthird-party developers, including Novell, Alisa, Pacer, IPT, DayStar, andothers.andP;  These AFP-compliant serves run on various platforms includingMacintosh, MS-DOS, UNIX, and VAX, as well as custom ones.andP;  When AFP-compliantserver software is used, it doesn't matter what platform the server is on: Itappears to the user as just another AppleShare server mounted on theMacintosh screen.andM;I use the phrase AFP-complaint here and not AFP-compatible for good reason.andO;Any hardware or software that works over AppleTalk can be said to beAFP-compatible, but only AFP servers that can be accessed by the AppleShareclient software or by applications that make direct AFP calls to theoperating system are truly AFP-compliant.andP;  Companies can claim products thatdo not have all the features of Apple's AppleShare to be AFP-compliant(though they may be less expensive).andP;  On the other hand, other productsclaimed to be AFP-compliant have more features than AppleShare.andP;  At thistime, TOPS is not all AFP-compliant.andM;THE AFP CLIENTandM;The AFP client software -- included with the System software and theAppleTalk driver -- was developed as an integral part of, and extension to,HFS and the Mac operating system.andP;  The single test that divides thecompatible from the compliant is this: If the server cannot be mounted byusing the AppleShare client rdev (a device related to cdevs and INITs) usingthe Chooser DA in the Macintosh System software (6.0 or later), then theserver is not AFP-compliant.andM;Selecting the AppleShare icon within the Chooser list activates a networklookup for all AFP servers in the selected AppleTalk zone.andP;  The list ofavailable AFP servers in the zone is presented to the user (see Figure 2).andM;Double-clicking on a file server's name activates the AFP log-on dialog box.andO;You type in your name and password, and the information is passed back to theAFP server.andM;You are then presented with the list of the server volumes you are authorizedto mount on your machine.andM;After you have selected the volumes to be mounted, AFP handles thetranslation of local file calls in your machine into network packets (seeFigure 3).andP;  These go out over the network to the File Server Control Program(FSCP) on the file server machine.andP;  The file server may be a Macintosh oranother computer configured as an AFP server.andP;  Regardless, the FSCPtranslates the AFP file calls from the network into a form that the servermachine's native operating system can understand.andP;  If the server is a VAX,the calls are translated into VMS.andP;  If it is an IBM PC, the calls aretranslated into DOS.andP;  All information coming from the server is convertedback to AFP before it goes out over the network.andM;Clients can also be using alternate operating systems.andP;  On the Mac side, AFPtranslation is built into the Mac's operating system so that an AFP servercan be accessed without the need for additional software.andP;  But othercomputers and operating systems can be adapted to access an AFP server: AFPclient software can do the same conversion of AFP data into the clientmachine's native operating system.andP;  The PC client sees the AFP server as justanother MS-DOS drive, while the UNI user will see it as just another UNIXdisk volume.andM;In the AppleTalk networking world, the trend is toward all machines speakingto the network with AFP, independent of their native file system.andP;  In theUNIX networking world, the equivalent of AFP is Sun's NFS protocol.andP;  WithNFS, most machines act as both clients and servers, similar to TOPS in theAppleTalk world.andP;  It's one of the main differences between AFP and NFS: WithAFP (up until now), machines are usually servers or clients.andP;  While they canact as both, no products have implemented this capability with AFP on theMacintosh platform.andP;  TOPS uses its proprietary TOPS Filing Protocol (TFP)network file system rather than AFP, and the company has announced that TOPSwill migrate toward NFS.andP;  In both cases, AFP and NFS have similar intentions:to provide a standardized way of managing file access between machines over anetwork.andP;  While Apple and Sun duke it out over protocols, with the use of aGatorBox from Cayman Systems, you can convert AFP to NFS, and LocalTalk toTCP/IP Ethernet.andP;  AFP clients on the AppleTalk side can &quot;see&quot; an NFS serveras an AFP server, gaining transparency between machine types, alternate filesystems, and network operating systems.andM;AFP-COMPLIANT OR AFP-COMPATIBLE?andM;There are many other types of servers beyond AFP-compliant servers.andP;  Thesenetwork applications are different from AFP servers, but since AFP is part ofthe AppleTalk protocol stack (and even part of the Mac operating system), anysoftware that is compatible with AppleTalk should also be AFP-compatible.andP;  Tobe AFP-compliant, a server must give a user access to all the features ofAFP.andP;  Network disk servers such as MacServe from InfoSphere are notAFP-compliant.andP;  Nor is the 3Com 3Server (though it has some features not yetfound in AFP-compliant servers, such as built-in electronic mail and theability to exist simultaneously on LocalTalk and Ethernet).andP;  The 3Com serverwill support AFP by the end of 1989.andM;Through the TOPS file server software, you can publish your own machine'sdisk volumes, accessible to other TOPS owners.andP;  Since TOPS uses itsproprietary TFP, you cannot access a TOPS server volume using AFP.andP;  Like AFP,TOPS supports many different machine types and operating systems, allowingthem to exchange files transparently.andP;  In fact, TOPS is attempting toaccomplish a similar task as AFP and NFS, namely, to standardize the fileformat calls carried on the network and to have each machine translate fromits own native file system to the common protocol format, then back again.andO;Thus, all machines that can translate into the common language can speak witheach other transparently.andP;  Sun has announced that TOPS will be transparentlyconnected through gateways and multilingual modes.andM;Non-compliance with AFP can have its consequences, however.andP;  Currently, someapplications, such as CE Software's QuickMail and ACIUS' 4th Dimension, makeuse of direct AFP calls, and in a non-compliant environment this can causeproblems.andP;  Fox Software has avoided TOPS compatibility for its FoxBASE+/Macdatabase management system because of TOPS' non-compliance with AFP.andM;These compliance problems emphasize a need for standardizing the wayapplications talk to each other and to servers on the network.andP;  This standardwould extend further into a standardized application program interface (API),which would allow a new class of network applications.andP;  API will probably bebuilt upon AFP, the basis for the future evolution of AppleTalk.andO;</TEXT></DOC>