<?xml version='1.0' encoding='UTF-8'?>
<DOC><DOCNO>  ZF207-849-106  </DOCNO><DOCID>07 849 106.andM;</DOCID><JOURNAL>Hewlett-Packard Journal  Oct 1989 v40 n5 p51(9)* Full Text COPYRIGHT Hewlett Packard 1989.andM;</JOURNAL><TITLE>Design of a high-performance pulse modulation system.andO;(Hewlett-Packard's HP 8665A Synthesized Signal Generator)</TITLE><AUTHOR>Snook, Douglas R.; Curtis, G. Stephen.andM;</AUTHOR><SUMMARY>A pulse modulation system is available as an option onHewlett-Packard (HP) Co's HP 8665A Synthesized Signal Generator.andO;Pulse modulation is important for such applications as radartesting an calibration, IF filter characterization, and evaluationof certain avionics systems.andP;  The HP 8665A pulse modulation systemconsists of an internal pulse generator driven by either aninternal modulation source or external signal, a pulse modularmicrocircuit assembly, isolator, and output attenuators andreverse power protection.andP;  The internal pulse generator is basedon two integrated circuits used for generating delay and widthtiming data.andP;  The pulse modulator is based on two customgallium-arsenide integrated circuits.andP;  Details of design andfunctioning of the system are described.andM;</SUMMARY><DESCRIPT>Company:   Hewlett-Packard Co. (products).andO;Ticker:    HWP.andO;Product:   HP 8665A Synthesized Signal Generator (Signal processor) (designand construction).andO;Topic:     Pulse Amplitude ModulationAdd-In-On DevicesTest EquipmentDigital Signal Processing.andO;Feature:   illustrationchart.andO;Caption:   Timing signals for the two control modes of the internal pulsegenerator. (chart)Block diagram of the HP 8665A pulse modulation system. (chart)Block diagram of the HP 8665A internal pulse generator. (chart)andM;</DESCRIPT><TEXT>Design of a High-Performance Pulse Modulation SystemandM;PULSE MODULATION IS IMPORTANT modulation format for radar testing andcalibration, design and evaluation of avionics systems such as DME and SSR,IF filter characterization, and EW or ECM work.andP;  Pulse modulation isavailable as as an option in the HP 8665A Synthesized Signal Generator.andM;Key contributions of the HP 8665A pulse modulation are:andM;* Internal pulse generator with programmable delay from 50 ns to 1 s, widthfrom 10 ns to 1 s, and pulse repetition frequency (PRF) from 0.1 Hz to 400kHz (external PRFs from dc to 10 MHz are allowed)andM;* 5-ns rise and fall times, with less than 2-ns typicalandM;* Greater than 80-dB on/off ratioandM;* No change in the level accuracy performance from the standard HP 8665A.andO;The maximum output power for the pulse modulation option is +9 dBm.andM;Internal Pulse GeneratorandM;The HP 8665A pulse option includes an internal pulse generator, whichprovides the video signal that drives the pulse modulator.andP;  Including thisfunction in the HP 8665A eliminates the need for an external instrument toset the pulse parameters of PRF, delay, and width.andP;  This integration is afirst for a Hewlett-Packard synthesizer.andM;The internal pulse generator is controlled by either the internal modulationsource or an external signal.andP;  These signals initiate the generation of thevideo signal in one of two ways: direct pulse control, in which the videocharacteristics are set by the control signal's width and PRF, and internalpulse generator, in which the control signal triggers the delay and widthgenerators.andP;  The positive edge, the negative edge, or both edges of thecontrol signal can be used as the trigger event for the internal pulsegenerator mode.andP;  In the case of the direct control mode with the internalmodulation source as the control signal, the resulting video signal is a50%-duty-cycle square wave at the frequency of the modulation source.andP;  Fig.andO;1 shows timing waveforms for the two control modes.andM;The internal pulse generator provides programmable delay and width, triggeredby either the internal modulation oscillator or an external stimulus.andP;  Threedigits of resolution are programmable, although the actual resolution isspecified as 0.2% of full scale for a given range, which turns out to be thanthree digits for some settings.andP;  The pulse delay can be set from 50 ns to 1 sin eight decade ranges.andP;  The lowest range is 50 ns to 99.9 ns.andP;  The accuracyis [+ or -]5% of the programmed setting [+ or -]2 ns.andP;  The pulse width can beset from 10 ns to 1 s in eight decade ranges.andP;  The accuracy is [+ or -]5% ofthe programmed setting [+ or -]2 ns for widths greater than 50 ns andtypically [+ or -]5% [+ or -]2 ns for widths between 10 ns and 50 ns.andM;As already mentioned, internal generated PRFs range from 0.1 Hz to 400 kHz,and external PRFs from dc to 10 MHz are accepted.andP;  The external input can beset to a high (TTL gate) impedance or to 50[omega].andM;Two outputs are generated: a 50-ns-wide sync pulse and a video pulse that isrepresentative of the RF pulse in both width and delay.andP;  The rising edge ofthe sync pulse is the reference point for the RF pulse, that is, theprogrammed delay is the time between the rising edge of the sync pulse andthe rising edge of the RF pulse.andP;  The video and sync outputs are designed todrive 500[omega] loads.andM;The pulse modulator consists of two HP-designed GaAs ICs in a custommicrocircuit assembly.andP;  This modulator provides several key performanceadvantages:andM;* Low insertion loss with good flatness across the instrument's100-kHz-to-4.2-GHz frequency rangeandM;* Good return loss characteristics in both on and off statesandM;* Excellent rise and fall time performance, typically less than 2 nsandM;* On/off ratio of better than 80 dBandM;* Minimum pulse widths of 10 ns.andM;Pulse System DesignandM;There are two common ways of including pulse modulation in a signal generatorblock diagram: either within the automatic level control (ALC) loop orexternal to the ALC loop.andP;  These two options trade off the complexity of theALC system for the required performance of the pulse modulator.andM;Inside the Loop.andP;  Pulse modulation within the ALC loop can be implemented intwo ways.andP;  The first option is for the ALC loop to use a sample-and-holdcircuit to set the proper voltage in the loop when the RF is turned off,maintaining leveled output power.andP;  (1-4)  The second option is to unlock theALC loop and set the output level by driving the vernier with storedcalibration data.andP;  (5)andM;Pulse modulation within the ALC loop has several advantages.andP;  First,modulator unflatness can be compensated by the ALC loop.andP;  Second, the pulsecan be translated to other frequencies, allowing a lower-bandwidth pulsemodulator.andP;  Third, video feedthrough can be suppressed if there is ahigh-pass filter following the pulse modulator, as is the case in a YIG-tunedmultiplier.andP;  Fourth, mismatch related transient problems are minimized.andM;There are also several disadvantages of this approach.andP;  First, the ALC hoopmust be sampled or broken to set the output level, adding to the complexityof the ALC design.andP;  Second, when the ALC loop is locked, its operation setsthe pulse performance in terms of minimum pulse width and duty cycle.andP;  Thisin turn sets the range of possible PRFs.andP;  Third, the pulse waveform may bedegraded by the circuitry following the modulator, especially in the case offrequency translation.andP;  Fourth, the video feedthrough coming out of the pulsemodulator may adversely affect the bias of the following circuitry.andM;Outside the Loop.andP;  Pulse modulation external to the ALC loop places themodulator after the power amplifier but before the output attenuators.andP;  Amajor advantage of pulse modulation external to the ALC loop is that the ALCloop remains locked during pulse modulation, so the output level remainsconstant independent of pulse width or PRF.andP;  Note that is this is only trueif the match presented to the power amplifier detector is the same duringboth the on state and the off state of the pulse modulator.andP;  Otherwise thedifference in load will change the drive required to set the desired detectorvoltage, causing the output power to vary.andM;Pulse modulation outside the ALC loop is easy to include as an option.andP;  Nochanges are required in the ALC circuitry, except that enough vernier rangemust be in place to account for pulse modulator unflatness.andP;  The insertionloss and unflatness of the pulse modulator can be calibrated out in the sameway as for general level accuracy calibration.andM;In the HP 8665A, the use of the GaAs IC pulse modulator microcircuit makes itpossible to implement the less expensive, more modular option by putting thepulse modulator external to the ALC loop.andP;  Fig.andP;  2 is a block diagram of theHP 8665A output system with the pulse modulation option.andP;  For the HP 8665Aimplementation, no changes were required between the standard instrument andthe pulse option, other than adding the pulse-specific hardware.andM;Putting the pulse modulator outside the ALC loop does have somedisadvantages.andP;  First, a high-performance pulse modulator is required interms of bandwidth, insertion loss, match, on/off ratio, rise and fall times,and video feed-through.andP;  All of these parameters are passed on directly tothe output.andP;  Second, the insertion loss must be relatively constant overtemperature because level calibration is done at only one temperature.andO;Third, the return loss of the power amplifier driving the pulse modulatormust be well-controlled.andP;  If the mismatch between the amplifier and themodulator is significant, the resulting multiple reflections during theturn-on and turn-off transients can degrade the system rise or fall time.andP;  Inthe HP 8665A, this problem was minimized in the 3-to-4.2-GHz band by addingan isolator between the power amplifier and the pulse modulator.andP;  Performancebelow 3 GHz was adequate without additional components.andM;User InterfaceandM;The user has access to the pulse modulation features through a mixture offront-panel keys and special functions.andP;  Pulse modulation is enabled ordisabled by pressing the PULSE key on the front panel and then pressing ON orOFF.andP;  The choice of using the internal modulation oscillator or an externalsignal for the control signal is made by pressing either INT or EXT DC on thefront panel.andP;  External ac coupling is not a option for pulse modulation.andM;Following an instrument preset, the default pulse modulation mode is thedirect control option, with EXT DC selected as the modulation source.andP;  Togain access to the other pulse modulation features, the following specialfunctions are used:andM;* Special 210: 50-Ohm Pulse.andP;  Press ON or OFF to set the input impedance ofthe external dc-coupled input port.andP;  ON is 50 ohms, OFF is a high impedance(the input to a Schottky TTL Schmitt trigger).andM;* Special 211: Pulse Control.andP;  This function is used to select between thedirect control mode and the internal pulse generator mode.andP;  To view thecurrent control mode, press ON.andP;  To select between the two choices, press theup or down keys or rotate the knob.andM;* Special 212: Pulse Delay.andP;  This function sets the delay from the sync pulseto the RF pulse in internal pulse generator mode.andM;* Special 213: Pulse Width.andP;  This function sets the width of the RF pulse inthe internal pulse generator mode.andM;* Special 214: Pulse Trigger Edge.andP;  This function selects the trigger eventthat initiates the internal pulse generator timing sequence.andP;  To view thecurrent control mode, press ON.andP;  To select between the three choices ofpositive, negative, or both, press the up or down keys or rotate the knob.andM;Pulse Generator DesignandM;The block diagram of the internal pulse generator is shown in Fig.andP;  3.andP;  Theheart of this circuitry is the timing IC used to develop the delay and widthtiming information.andP;  Two of these ICs are used.andP;  The first timing ICgenerates the delay signal and triggers the second timing IC, which generatesthe width signal.andP;  This results in the video signal which is sent to the rearpanel and the pulse modulator.andM;The timing IC was developed for use in the HP 8111A, 8112A, and 8116APulse/Function Generators.andP;  (6,7)  The IC consists of a current-controlledoscillator (CCO) that can be tuned from 10 MHz to 100 MHz and 2 MHz to 20MHz.andP;  This corresponds to timing signals of 10 ns to 500 ns.andP;  Longer timesignals are obtained by an internal flip-flop and decade counters.andP;  Noexternal capacitor switching is required.andP;  The various decades of operationand the desired trigger mode are set by TTL-compatible lines driven by theinstrument microprocessor.andP;  Fine control within the selected decade isprovided by a DAC that supplies the tuning current for the CCO.andP;  This DAC isused to calibrate the video signal so that the RF signal has the proper delayand width characteristics relative to the sync output from the rear panel.andO;This calibration compensates for variations in the timing ICs and the RFpath, including differences in delay because of varying cable lengths and inwidth because of differences in the RF pulse compression characteristics ofthe pulse modulator.andP;  The DAC circuitry also includes temperaturecompensation, which corrects for temperature drift in the timing ICs.andM;The sync signal is generated by the event that triggers the delay and widthtiming generation, or for the direct control mode, the rising edge of thecontrol signal.andP;  For the internal pulse generator mode, a delay line isincluded in the sync pulse path to compensate for setup times and propagationdelays through the timing circuitry.andM;The input circuitry chooses whether the controlling signal comes from thefront panel or from the internal modulation oscillator.andP;  Signal conditioningcircuits shape the wave properly, set the voltage levels for TTL or ECL,switch the trigger signal to the appropriate path, and provide the desiredinput impedance for the external input--either 50 ohms or high impedance (theinput to a Schottky TTL Schmitt trigger).andM;The internal pulse generator is controlled by the instrument microprocessorvia the standard serial-to-parallel bus design used throughout the PSGfamily.andP;  The DAC calibration data is stored in an EEPROM on the pulsegenerator board and is loaded into the instrument main RAM during instrumentcalibration.andM;Pulse Modulator DesignandM;The pulse modulator microcircuit consists of two identical proprietary GaAsICs in a package designed for high RF isolation in a small area.andP;  In the offstate the input and output connections are terminated in 50[Omega] to preventunwanted reflections.andP;  The isolation in the off state is [is greater than]90dB, achieved by using cascaded series and shunt FET switches.andP;  In the onstate insertion loss is less than 4 dB to 4.2 GHz, primarily a result ofresistive loss in the series switches and mismatch loss caused by thecapacitance of the shunt switches.andP;  The low capacitance of the FET switchesmeans that the rise and fall times of the pulse modulator are very fast, onthe order of 1 ns.andP;  The modulator ICs have built-in buffer stages to speed upthe edges of the clock input to the IC, allowing it to be driven byrelatively slow logic gates without degradation of switching time.andM;The frequency range of the HP 8665A requires that the pulse modulator designwork from frequencies below 100 kHz to over 4 GHz.andP;  Gallium arsenide FETs areamong the few devices that can act as a switch over this frequency range andsimultaneously exhibit low loss, high isolation, and low distortion.andP;  FETswitches also generate little video feedthrough (i.e., the switch controlsignal couples onto the output signal).andP;  Generally, microwave signalgenerators employ pin diodes because of their ability to act as variableresistors for RF signals.andP;  A pin diode modulator would not have been able tocover the heterodyne band of the HP 8665A because of its inherent distortionat low frequencies.andP;  If pin diodes had been used, a second modulator for theheterodyne band would have been needed.andM;Using GaAs FETs in modulators is not a new idea, but in the past the cost ofassembling a high-isolation modulator out of discrete FETs would have beenprohibitive.andP;  The availability of GaAs monolithic microwave ICs made itpossible to integrate enough FETs to achieve the desired performance andlower the cost to a reasonable amount.andP;  The HP Microwave Technology Divisionsupplies the pulse IC used in the HP 8665A.andP;  Integration of additionalfunctions such as driver amplifiers into the IC simplified the design of themicrocircuit and pulse level shifting circuits.andM;A feature of this design is its near 50[Omega] impedance in both on and offstates.andP;  Because of this, the modulator is always matched to the transmissionlines at its input and output, which minimizes signal reflections between thepulse modulator and the power amplifier and between the load connected to thesignal generator and the pulse modulator.andP;  These reflections can causedistortion of the leading and trailing pulse edges, as well as levelinaccuracy.andM;Package and Microcircuit DesignandM;The pulse modulator microcircuit, shown in Fig.andP;  4, uses two identical GaAsICs connected in series for switching the signal on and off.andP;  Two ICs arenecessary to get 90 dB of isolation at 4.2 GHz because of undesired signalcoupling between the device input and output.andP;  Three thin-film-on-sapphiresubstrates are used to make RF and bias connections to the ICs.andP;  Thegold-plated aluminum package has two cavities, each of which holds an IC anda substrate.andP;  In a narrow slot connecting the two cavities is a thin-filmsubstrate with a microstrip transmission line that carries the RF signal fromone IC to the other.andP;  The slot forms a waveguide below cutoff, whichattenuates any signal radiating from the first cavity to the second,preventing unwanted coupling from the input of one IC to the output of theother, which would degrade isolation.andM;Each IC is mounted in a recess in a molybdenum pedestal.andP;  The pedestals raisethe IC so that it is flush with the thin-film substrates used for signaltransmission and bias connections.andP;  The top of the pedestal is flush with theIC top surface, allowing short ground bonds from the IC edge to the pedestal.andO;The gold-plated pedestals are machined using wire EDM.andP;  Molybdenum has athermal coefficient of expansion similar to GaAs and has good thermalconductivity, so heat from the IC is conducted out to the package.andM;The RF signal enters the package through a coaxial connector.andP;  A ribbon bondis used to attach the connector center conductor to a microstrip transmissionline on a 0.010-inch-thick sapphire substrate.andP;  The substrate is thin toreduce the area of signal current loops and improve isolation.andP;  On thissubstrate, a 50[Omega] microstrip transmission line is about 0.010 inch wide.andO;To maintain a repeatable transmission line width (which determines theimpedance), the more precise gold thin-film-on-sapphire technology was chosenover a thick-film process.andP;  An added benefit is that the signal transmissionloss of thin-film conductors is less than that of thick-film.andP;  The thin-filmprocess chosen also made available thin-film resistors, which are used on thesubstrate as damping resistors on the bias lines and for a resistive dividernetwork, which can be used for bias adjustment.andP;  The bias and clock lines arerelatively high-impedance traces with capacitive terminations at one end--a0.015-[mu]F feedthrough capacitor in the package base for the [V.sub.h] and[V.sub.1] power supply lines, 50 pF for the clock line.andP;  In addition, the[V.sub.h] line has 20 pF of filtering capacitance on the IC.andP;  At around 3GHz, the bias lines resonate with the feedthrough capacitors, causing a sharpincrease in the insertion loss of the pulse modulator.andP;  This problem waseliminated by inserting 5[Omega] and 10[Omega] damping resistors near thelow-impedance point in the line (near the feedthrough capacitors).andM;The substrate and pedestal are attached to a gold-plated Kovar carrier.andP;  Thethermal coefficient of expansion of Kovar is similar to that of sapphire.andP;  Ifthe carrier were not used and the substrate attached directly to the aluminumbase, the substrate would probably pop off or break at temperature extremesbecause of the difference in expansion.andP;  Each carrier is held down in thepackage with nuts on two studs protruding from the package base.andP;  Thedifference in thermal expansion is accommodated by allowing the carrier toslip on the base.andP;  Using a carrier also simplifies rework of themicrocircuit, since the assembly can be lifted out after removing a few bondwires and two retaining nuts.andP;  Bias and the pulse clock are brought throughthe package base using feedthrough capacitors.andP;  These reduce RF leakage fromthe package and prevent isolation degradation that might otherwise resultfrom signals leaking out one side of the modulator and back into the otherside via the bias or clock lines.andP;  The bias lines, clock line, and signaltrace all converge next to the IC.andP;  Small bonding pads are provided tosimplify wire-bonding to the IC.andM;Additional pads on all traces are provided for ground bonds, which are usedfor electrostatic discharge protection during the assembly process.andP;  Althoughthe same IC is used on both sides of the microcircuit, the two substrates arenot mirror images, since one IC is rotated 180 degrees relative to the otherto place the switchable 50-ohm termination on the proper side.andM;Probably the most challenging part of this design was understanding thefactors that determine isolation across an IC and a package.andP;  Even when thesignal path is brought right to the side of an IC and bond wires to the ICare kept short, large loops can be created by circuitous ground paths.andP;  Asdepicted in Fig.andP;  5, when the IC is in the off state, signal current flowsfrom the microstrip line on the substrate across the bond wire to the ICinput, down through a shunt FET switch and a 50[Omega] terminating resistor,through ground bond wires to the pedestal, down the side of the pedestal, andonto the carrier, then returns to the source on the ground plane plated ontothe bottom side of the sapphire substrate.andP;  On the other side of the IC(right side of Fig.andP;  5) a current loop is formed by the bond wire from themicrostrip line on the center substrate to the IC, then through a shunt FETswitch, through ground bonds to the pedestal, down the side of the pedestalto the carrier, down the side of the carrier to where it contacts the packagebase, and then up the package wall to where it contacts the ground plane ofthe center substrate.andP;  The mechanical arrangement was chosen to make thecircuit manufacturable, with only the center substrate being difficult toremove from the package (it is attached with conductive epoxy).andP;  The drawbackof this arrangement is that the carrier contributes a significant proportionof the loop size on the side of the IC attached to the center substrate.andO;Substrate thickness is important because it determines the minimum height ofthe loop.andP;  Originally a 0.025-inch ceramic substrate was used beforeswitching to 0.010-inch to meet isolation specifications.andP;  The other criticalfactor determining loop area is how close together the substrates, pedestal,carrier, and package wall are.andP;  The assembly process minimizes gaps bypushing the pedestal to the edge of the carrier, then pushing the substrateagainst it.andP;  When the carrier is installed, it is pushed up against thepackage wall.andM;An ideal arrangement to get high isolation would have the substrates buttingright up to the IC with a common, continuous ground plane.andP;  Because thiswould require cutting a hole or slot into a substrate, adding a substrate, orgetting rid of the carriers, all of which increase cost or reducemanufacturability, this alternative was not chosen for this design.andM;One assumption made in the design was that the bottoms of the carriers andthe package base are flat and make contact or are very close to each othereverywhere.andP;  If this is not true, the size of the current coupling loop canincrease, degrading isolation.andP;  This has been observed in some instances.andM;Pulse IC DesignandM;Designing a pulse modulator requires trading off insertion loss forisolation.andP;  For this design, as little insertion loss as possible wasdesired, but it was decided that less than 4 dB to 4.2 GHz was adequate.andO;Isolation had to be good enough to meet the industry standard for microwavegenerators, an 80-dB on/off ratio.andP;  Since it was improbable that this couldbe done with one IC, the goal was to do this with just two ICs, with aspecification of 45-dB isolation and 1.5-dB insertion loss for each IC.andP;  Forthis application, the modulator only needs to switch between on and off,functioning as a single-pole, single-throw (SPST) switch.andP;  Commerciallyavailable ICs have been designed to perform this function, but only in thelast two years have they come close to the needed isolation.andP;  A FET used asan SPST switch can be connected as a shunt switch (shorting the signal toground), or as a series switch (opening the signal path).andP;  The two types canbe combined (for even more isolation.andM;FET Modeling.andP;  A simple model for a FET in the pinched off state is acapacitor from drain to source, [C.sub.ds], a capacitor from gate to drain,[C.sub.dg], and one from gate to source, [C.sub.gs].andP;  The resistances atpinchoff are large enough to be considered infinite.andP;  The on state model issimply a resistor, [R.sub.ds(on)], connected from drain to source, with equalvalue capacitors, [C.sub.dg] and [C.sub.gs], connected from gate to drain andgate to source.andP;  Depending on the accuracy needed, the resistance of theohmic contacts must also be considered.andP;  In many cases it is sufficientlyaccurate to combine the contact resistance with [R.sub.ds].andP;  In the on state,the drain-to-source capacitance, [C.sub.ds], can be ignored, because a muchlower impedance, [R.sub.ds(on)], is in parallel with it.andM;A shunt switch in the off state uses the FET in the on (low-resistance)state.andP;  Fig.andP;  6 shows this configuration along with parasitic elements.andP;  Theamount of signal attenuation achieved depends on the ratio of [R.sub.ds(on)]to the source impedance seen at the switch input terminals.andP;  A larger FETwill have lower on resistance and provide more signal attenuation.andP;  At highfrequencies, the inductance of the wire bonds connecting the FET to groundcauses the total impedance to ground to increase proportionally to frequency,degrading the switch isolation.andP;  Ground bonds need to be kept as short aspossible.andP;  Several can be placed in parallel to reduce inductance.andP;  Thisdesign uses three very short bonds in parallel for about 0.1 nH ofinductance.andM;In the FET shunt switch in the on state (see Fig.andP;  6), the off FET parasiticcapacitances mentioned earlier cause a mismatch on the signal trace, whichmust be considered as a transmission line at high frequencies.andP;  This mismatchwill cause some of the input power to be reflected back to the source insteadof all going to the load.andP;  This loss can be about 2 dB at 4.2 GHz unless itis reduced by adding inductive matching elements in series with the switch.andO;Another problem that can occur, and had to be fixed in this design, is thatif a low resistance is connected in series with [C.sub.dg], then at higherfrequencies, some of the signal that is supposed to be passing through theswitch to its output will be capacitively coupled to the resistance, causingsignal attenuation.andP;  The solution used here is to place a moderately largeresistance in series with the gate to minimize signal loading.andP;  The value ofresistance is not so large that it degrades the switching time of the FET.andM;For a series switch in the off state (see Fig.andP;  6), the FET is also off.andO;When a FET channel is pinched off, the resistance between between drain andsource is so large that any signal leakage through the switch can beattributed to capacitive coupling through [C.sub.ds] or the seriescombination of [C.sub.dg] and [C.sub.gs], even at low frequencies.andP;  FET sizecan be reduced to decrease feedaround, but this will increase the onresistance of the FET, resulting in higher insertion loss when the switch ison.andP;  The sizes of FETs in series switches are generally chosen based on thedesired insertion loss and distortion characteristics.andP;  As was the case withthe shunt switch, a low resistance connected to the gate can cause excessinsertion loss.andP;  This design avoids that problem because the series FET gateis connected to the drain of a driver FET, which is pinched off when theseries FET is on.andP;  The gate of the series FET then sees a very highimpedance, minimizing any loading of the signal via the source-to-gate ordrain-to-gate capacitance.andM;Matching.andP;  To increase isolation, the IC design uses three shunt switchesalternating with two series switches (see Fig.andP;  7).andP;  This increases theisolation to over 50 dB at 4.2 GHz while keeping insertion loss to around 1.5dB at the same frequency.andP;  One of the shunt switches is used to connect a50[omega] resistor from ground to the signal trace, thus terminating theinput of the IC with a good match to the transmission line.andP;  This isnecessary because the series switch that follows is an open circuit when off,and would cause undesirable reflections of the incoming signal back to thesignal source.andP;  The switchable resistor is located on the left side of the IC(also called the &quot;out&quot; side).andP;  The out side is connected to the transmissionline that leads to the RF connector on the side of the package.andP;  One IC isrotated 180 degrees to connect the nonterminated sides (the &quot;in&quot; sides)together.andP;  Because the series switch that follows the 50[omega] load isolatesthe input from the capacitance of the shunt FETs that follow, the match isvery good in the off state, typically better than 20 dB return loss, even at4.2 GHz.andM;In the on state, matching is mainly dependent on the approximately 0.6-nHinductance of the bond wires connecting to the IC.andP;  The inductance cancelssome of the capacitance to ground of the shunt FETs.andP;  The resistance of theseries FETs also affects the match, raising the input impedance.andP;  The matchis not nearly as good in the on case, but return loss is usually better than12 dB.andM;Distortion.andP;  In a series switch, all the signal current must flow through theFET.andP;  Even with the gate-to-source voltage equal to zero, sufficient currentthrough the channel will cause it to saturate and act as a current sourceinstead of a resistance.andP;  This means that for small voltages, the currentthrough the FET is linearly proportional to the input voltage, but at highvoltages, the FET cannot supply more than the saturation current [I.sub.dss],which is determined by its size.andP;  Depending on the distortion level required,the signal current must be kept to some fraction of [I.sub.dss].andM;Another important element in the design of a series switch is how thegate-to-source voltage is held to zero, which allows operation at minimumresistance and maximum [I.sub.dss].andP;  In many series FET switches, a voltagesource is used to change the gate voltage.andP;  When the switch is on, the gatevoltage is held at zero, and [V.sub.gs] is approximately zero when the signalvoltage is small.andP;  For a low-loss switch, most of the signal voltage at theswitch input appears at its output, across the load.andP;  A voltage impinging onthe switch will cause the source and drain voltages to rise relative to thegate voltage.andP;  As this voltage differential increases, the conductance of thechannel decreases, and the channel will eventually pinch off if the signallevel is large enough.andP;  This can cause severe signal distortion.andP;  One methodto reduce this problem that works at higher frequencies is to place aresistor in series with the FET gate.andP;  If the resistance is larger than theimpedance of the gate-to-source or gate-to-drain capacitance, most of anysignal voltage on the source or drain will couple onto the gate, causing thegate voltage to track this signal voltage, keeping [V.sub.gs] at zero anddistortion low.andP;  This technique fails at low frequencies because thecapacitive impedance from signal trace to gate becomes large compared to apractical resistor value.andP;  On an IC, FETs are readily available, so a100-[mu]m device is used to drive the gate of the series FET.andP;  A 50-[mu]m FETis used as an active pull-up for the driver.andP;  The source of the driver isconnected to the negative voltage supply ([V.sub.h]) used for reverse-biasingthe gates of the switch FETs.andP;  The drain is connected to the gate of theswitch FET.andP;  The gate and source of the active pull-up are connected to thedriver drain, and its drain is connected to the signal trace.andP;  When thedriver FET is off, the pull-up FET shorts the gate of the switch to thesignal trace.andP;  The beauty of this approach is that almost all the sourcevoltage at the switch source or drain also appears at its gate because thegate is essentially open-circuited (the driver FET loads the gate of theswitch FET very little).andP;  Distortion is very low at all frequencies.andP;  Placingan open circuit in series with the gate also makes the capacitive loading ofthe signal trace by [C.sub.dg] or [C.sub.gs] negligible.andM;The shunt FET switches can also cause distortion.andP;  To switch the signal off,the shunt switch FET gates are held at some voltage below the pinchoffvoltage.andP;  Large negative signal swings can reduce the gate-to-drain voltageenough that conduction occurs either through the channel or by capacitancemodulation.andP;  This type of distortion can be remedied by making thegate-to-source voltage more negative.andM;Video Feedthrough.andP;  Video feedthrough in FET switches is fairly small becausethey are voltage-controlled devices with low capacitance.andP;  High-speedswitching can pull current through the gate capacitance in the form of narrowspikes.andP;  In this design, a larger effect masks this phenomenon.andP;  Duringswitching, the bias for the series FET drivers is pulled out of the RF trace.andO;The current normally comes through the center shunt FETs, which are on whenthe series drivers pull current.andP;  The result is a negative-going, 1-ns-widespike at the leading and trailing edges of the pulse.andP;  The energy in thesenarrow spikes is small enough that they are not a problem in mostapplications.andM;Switching.andP;  As mentioned elsewhere, the pulse modulator IC uses three shuntswitches and two series switches.andP;  A complementary drive signal must beapplied to the gates of the series and shunt switches.andP;  An integratedinverter is used to do this job, with its output connected to the shuntswitches and its input connected to the series switches.andP;  Two more invertersare cascaded in front of the control line for the series switches.andP;  Theseinverters serve to sharpen the edge of the external clock signal, making therise and fall times of the IC insensitive to the clock rise and fall times.andO;Both inverter outputs are brought out to a pad at the chip edge to makeprobing their voltage possible.andP;  The inverters all operate with two negativebias voltages, [V.sub.h] and [V.sub.l].andP;  The outputs of the inverters swingapproximately between these two levels.andP;  The threshold voltage is the levelwhere the input FET in the inverter operates at one half its saturationcurrent, [I.sub.dss], which is about a volt below [V.sub.h], the lessnegative of the two supplies.andP;  The FET current sources used for biasing thevoltage follower in the inverter output stages have a resistor network tiedto their gates and brought out to a bonding pad.andP;  Decreasing the voltage onthis pad will shift the output voltage swing of the inverters downward.andO;Although it has not been needed, this pad was added for process variationcontrol (PVC in Fig.andP;  7).andP;  The external clock input to the first inverter hasESD protection added in the form of a 300[omega] series resistor and clampdiodes to [V.sub.h] and [V.sub.l].andM;The shunt and series inverter outputs do not drive the shunt and series FETgates directly.andP;  As mentioned elsewhere, a driver with an active pull-up isused to control the gates.andP;  The sources of the driver FETs are tied to[V.sub.h], so that the switching threshold is the same as for the inverters.andO;One advantage of using driver FETs for each switch is that isolation isimproved.andP;  Signal leakage through a series FET to the gate of the next seriesFET is reduced by the isolation of two driver FETs.andP;  The driver FETs alsoprovide an extra stage of amplification, further sharpening the edges of theexternal clock.andP;  The switching time of the pulse modulator is about 1 ns,even using a clock signal with a 14-ns rise time.andM;Several factors can cause the rise and fall times of the modulator to belonger than 1 ns in practice.andP;  When the pulse modulator is off, the poweramplifier still generates a signal.andP;  This signal reflects from the modulatorand then from the power amplifier again.andP;  It takes twice the time delaybetween the power amplifier and the modulator for the first reflection fromthe modulator to return to it again.andP;  This round-trip delay time is about 5ns in the HP 8665A.andP;  When the pulse modulator switches on, the signalpreviously reflected from the modulator adds to or subtracts from theamplifier signal and passes through the modulator.andP;  Five nanoseconds later,the signal reflected from the modulator after it turned on adds to theamplifier signal (this analysis assumes a slow ALC loop time constantrelative to the pulse switching time).andP;  The new doubly reflected signal mayadd to the amplifier signal with a phase and magnitude different from theprevious one, causing a change in level.andP;  This new level will be thesteady-state level.andP;  The result of the reflected signals adding to thetransmitted signal may be a shelf lower than the steady-state voltage or apedestal higher than the steady-state voltage.andP;  The shelf or pedestal will beabout 5 ns in length, starting at the leading edge of the pulse.andP;  If theshelf is less than 90% of the final amplitude, the 10%-to-90% rise time isdegraded.andP;  To avoid this problem in the HP 8665A, the amplifier match and thepulse modulator match are made good enough that the doubly reflected signalis less than 10% of the transmitted signal.andP;  Another method can also be used,that is, to design the modulator so that the reflection coefficient is thesame in both on and off modes.andP;  However, this will not reduce problems causedby mismatches beyond the pulse modulator.andM;A similar set of reflections can occur on the output side of the pulsemodulator, and will affect the trailing edge of the pulse by causing a pulsethat does not die out until after twice the delay between the pulse modulatorand the load.andP;  Again, both the pulse modulator match and the load matchshould be made as good as possible.andM;During the pulse rise time, the pulse modulator match is not controlled, andlarge reflections can result during this 1-ns period.andP;  These reflections canshow up about 5 ns later as a &quot;blip&quot; or &quot;dimple&quot; on the pulse envelope, about1 ns wide.andP;  Whether the envelope is increased or decreased depends on how thereflection adds to the carrier, which is determined by frequency, reflectioncoefficient, and cabe length.andM;It is desirable for these waveform distortions to occur near the pulse edge,if they have to occur at all.andP;  This implies that pulse modulator systems suchas this should be as compact as possible, with minimum cable lengths betweencomponents.andP;  In the HP 8665A, the cables are longer than optimum because ofthe block diagram, which uses three different power amplifiers and only onepulse modulator.andP;  However, this is not a major problem, because the poweramplifier match is reasonably good.andM;AcknowledgmentsandM;Fred Ives did the first pulse IC design.andP;  Tom Higgins did significant furtherdevelopment and modeling of the IC before handling it off.andP;  Rob Dickersonalso contributed to the pulse IC design.andP;  At the Microwave TechnologyDivision, Val Peterson, Scott Trosper, Don Montgomery, and Andy Teetzel putin many hours helping with the development and testing of the IC.andP;  Pat Herrondid the mechanical design of the Microcircuit package.andP;  Keith Fries designedmuch of the internal pulse generator.andP;  Mark Stambaugh was responsible for thefirmware control and calibration algorithm of the internal pulse generator.andO;Joyce Smith took sketchy documentation and turned a handful of parts intoassembled microcircuits in record time.andP;  Dick Waite, Todd Wendle, KimballMcKeehan, and Joyce all provided support in setting up the production processand provided valuable feedback on the design.andP;  Marc Brodeur developed theproduction test system for the pulse modulation option.andP;  The lab procurementgroup was instrumental in keeping the schedule on track.andP;  The quickturnaround time from the Microwave Technology Division thin-film group alsohelped greatly.andP;  Special thanks are in order to Tim Halloran for marketingsupport, Matt Dixon for long hours of testing and troubleshooting, and DavePlatt for overall project coordination and support.andM;ReferencesandM;[1] W.W.andP;  Heinz and P.A.andP;  Zander, &quot;2-to-26.5-GHz Synthesized Signal GeneratorHas Internally Leveled Pulse Modulation,&quot; Hewlett-Packard Journal, Vol.andP;  34,no.andP;  5, May 1983.andM;[2] R.K.andP;  Larson and L.A.andP;  Stark, &quot;A Wideband YIG-Tuned Multiplier and PulsedSignal Generation System,&quot; Hewlett-Packard Journal, Vol.andP;  34, no.andP;  5, May1983.andM;[3] D.R.andP;  Chambers and S.N.andP;  Sanders, &quot;Solid-State Microwave SignalGenerators for Today's Exacting Requirements,&quot; Hewlett-Packard Journal, Vol.andO;33, no.andP;  7, July 1982.andM;[4] J.F.andP;  Catlin, &quot;A Wide-Dynamic-Range Pulse Leveling Scheme,&quot;Hewlett-Packard Journal, Vol.andP;  33, no.andP;  7, July 1982.andM;[5] R.B.andP;  Collison, J.B.andP;  Summers, M.W.andP;  Wagner, and B.D.andP;  Ratliff,&quot;Wide-Frequency-Range Signal Generator Output Section Design,&quot;Hewlett-Packard Journal, Vol.andP;  36, no.andP;  12, December 1985.andM;[6] M. Fleischer, H. Rossnes, and U. Neumann, &quot;A New Family of Pulse andPulse/Function Generators,&quot; Hewlett-Packard Journal, Vol.andP;  34, no.andP;  6, June1983.andM;[7] C. Hentschel, A. Leiter, S. Traub, H. Schweikardt, and V. Eberle,&quot;Designing Bipolar Integrated Circuits for a Pulse/Function GeneratorsFamily,&quot; Hewlett-Packard Journal, Vol.andP;  34, no.andP;  6, June 1983.andO;</TEXT></DOC>