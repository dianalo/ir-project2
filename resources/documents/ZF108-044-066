<?xml version='1.0' encoding='UTF-8'?>
<DOC><DOCNO>  ZF108-044-066  </DOCNO><DOCID>08 044 066.andM;</DOCID><JOURNAL>EXE  Dec 1989 v4 n7 p68(2)* Full Text COPYRIGHT Process Communications Ltd. (England) 1989.andM;</JOURNAL><TITLE>Great embedded systems of the world: the Docklands Light Railway.andM;</TITLE><DESCRIPT>Topic:     EnglandRailroad IndustryEmbedded SystemsTravel IndustryAutomation.andO;Feature:   illustrationphotographchart.andO;Caption:   Inter-related functions of automatic train control. (chart)andM;</DESCRIPT><TEXT>GREAT EMBEDDED SYSTEMS OF THE WORLDandM;The small locomotove car, Number 4, came whining and buzzing up the gradientfrom Westferry with a full load passengers.andP;  Four young children were sat atthe front of the train, sometimes with noses pressed to the windscreen,mostly laughing and pointing to the track ahead.andP;  The train appeared roundthe corner, flanges grinding noisily on the tight curve, with loud threats ofspeed, but as it reached West Indian Quay...andP;  Hold the DH Lawrence, what doyou mean the children were sat at the front of the train?andP;  What happened tothe driver?andM;The Docklands Light Railway, opened by HM the Q in 1987, with 12.1 km oftrack in a 'Y' shape, running from the City of London in the west andStratford in the east down to the tip of the Isle of Dogs; boasting 15stations (14 of which were purpose-built), 11 electrically-powered passengertrains, each consisting of a single 90 ft car with an articulated joint inthe middle; and more brick via-ducts, cuttings, embankments and elevatedconcreate sections than you could find in five years' worth of Hornbycatalogues.andM;But to return to the trains themselves.andP;  Beneath the smart red, white andblue livery, each car boast an ability previously only vouchsafed to Thomasthe Tank Engine and his friends: the ability to think for itself.andP;  A host ofassorted onboard micropocessor collaborate to drive the train from station tostation, accelerating away smoothly, slowing on corners and speeding up forthe straight bits, going faster if the train is behind schedule, pulling intothe station, halting accurately alongside the platform so that passengers canget out - a skill that sometimes eludes human drivers on the LondonUnderground - and unlocling the doors.andP;  Other (independent) system watchsuspiciously, ready to hit the brakes if their silicon colleagues drive thetrain to fast, or place themselves on a collision course.andM;Technophobes will be pleased to hear that the trains are not entirelyautomatic.andP;  Each vehicle carries a DLR employee, grandly titled the 'traincaptain', who closes the doors and authorises the train to proceed to thenext station.andP;  He (or she) accomplishes this using a key-switch control setinto the lintel of the doors, duplicated at each of eight positions so thathe may wander freely around the car.andP;  Between stops, he checks the tickets.andM;Smart trainsandM;Figure 1 shows a schematic diagram of the various components of the automatictrain control.andP;  The ATO (Automatic Train Operation) system is what Tomorrow'sWorld might term 'the train's brain'.andP;  This is a Motorola 68000 processorbased system, mounted in a VME bus rack together with various intelligent I/Oboards.andP;  The processor runs the pSOS real time operating system, usingapplication software written in C.andP;  It is this software that is responsiblefor driving the train from one station to the next.andP;  The sequence of eventsis as follows.andP;  At each station, the ATO establishes contact with a centralcomputing system via a docking data link (DDL) - a box placed on the sleepersin between the rails.andP;  Information transmitted to/from the DDL to the vehiclelets the scheduling computer keep track of all the trains in the system.andM;When the train is safely 'docked' at a station - ie is communicatingsuccessfully with the DDL - the ATO unlocks the doors on the platform side.andO;A few moments before the train is scheduled to leave, a tone is sounded overthe PA system, to remind the train captain to close the doors.andM;Once the train has left the station, the ATO is on its own.andP;  It has stored inROM a set of 'run profiles', which provide instructions for negotiating thesection of track between any pair of adjacent stations: 'Accelerate to reach60 km/h in 200 metres, hold speed for 400 meters, apply brake to reachcrawling speed within 50 metres, crawl until DDL link is reached, then halt'.andO;Data from the vehicle's axles enables the ATo to determine the current speedand distance travelled.andP;  Two run profiles are held for each track section.andO;One is for minimum journey time, and is used only when the train is runninglate.andP;  The other, which compared with the first saves about 30% of the energyat a cost of a 10% increase in journey time, is an energy saving profilewhich allows the car to coast whenever possible.andM;Not all the scheduling consits of straightforward station-to-station runs.andO;The most striking example of a complication, which will be familiar to thoseof you who have ridden on the DLR, is the Canary Wharf stop.andP;  A glance at thetube map in the front of your diary will show you that, if you think of theDLR layout as a 'Y', then Canary Wharf station is situated on the upright,one station from the junction.andP;  In order to assign priorities to northboundtrains crossing the junction (known as the Delta Junction), the schedulingcomputer at Poplar - actually two DEC minis running in synch, one providing'hot backup' for the other - expects all trains to stop at Canary Wharf.andO;There is just one teeny problem with this: when the DLR was opened, anddespite the fact that it appeared on all the maps of the railway, CanadyWharf station had not been built.andP;  Trains stopped for quarter of a minute inthe middle of an elevated section, with nothing either side of the trackexcept a 400 foot drop to the concrete of the dock.andP;  Since the station wasgoing to be built in any event, and there were more pressing mattersrequiring money spent than aesthetic alterations to the software, it wasdecided to let trains continue to pause at that bleak spot.andP;  They still do -but the construction of Canary Wharf station now proceeds apace.andM;Safety measuresandM;The ATO system drives the train, but the ATP (Automatic Train Protection)system looks after the passengers' best interests.andP;  It has tworesponsibilities: to enforce speed limits and to prevent 'unsafe trainmovements' - eg two trains entering the same track section.andP;  The ATPdetermines the speed of the vehicle by means of cables laid across the trackat intervals.andP;  The gaps between the cables are contrived so that a traintravelling at the maximum permitted speed will cross a cable once a second.andO;A signal transmitted by these cables is picked up by a coil mounted on thecentre bogie as it passes overhead, and an 8749 microprocessor based systemis informed of the transition.andP;  If another cable transposition is detectedwithin one second then the 8749 will apply the brakes.andP;  Naturally, this issomething that should never happen if the ATO is functioning correctly.andP;  (Thespeed monitor system is actually based on dual 8749 processors.andP;  This is asafety critical feature.andP;  The two processors execute similar code,duplicating calculations and comparing results.andP;  If any discrepancy is foundbetween these results, the emergency brake is applied.andP;  This design principalis used in other areas; for example, the DDL contains dual 68008 processors.)andM;The other side of the ATP's duties - the prevention of unsafe train movements- is accomplished with a modified version of a standard BR signalling systembased on Solid State Interlockings.andP;  These establish paths for the trainsfrom one signal to the next.andP;  Audio frequency reed track circuits detect thepresence of trains and transmit the data to a central group of SSIs.andP;  (TheSSIs contain three processors which triplicate calculations, but require onlytwo in agreement to function.andP;  This allows the high safety standard to bemaintained, while supplying a degree of redundancy necessary for practicaloperation of the railway).andP;  The transfer of information to the trains differsgreatly from the conventional system.andP;  Excepting those areas of track notunder computer control - for example at the Operation and Maintenance Centrewhere the trains are 'stabled' (correct jargon) - there are no coloured lightsignals.andP;  Instead of getting the green light to move forward, DLR vehiclesdetect a 408 Hz signal, interpreted as 'permission to proceed', which istransmitted along the rails and picked up by two coils mounted ahead of theleading axle.andP;  If, for any reason, the signal should stop, then the ATPensures that the train stops too.andM;The DevelopersandM;The DLR's automatic control system was designed and built by GEC GeneralSignals at the company's Borehamwood and Manchester sites.andP;  Although thesoftware component part of the project naturally employed systematicdevelopment techniques (such as source code configuration control), there wasno used of CASE, or mathematical proving of systems.andP;  GEC had a very rigorousapproach for the validation of safety-critical code, which useddesign-independent personnel to inspect code after it had been finished andtested.andP;  Since the work was done some years ago, the Ada language was not anoption.andP;  It is interesting to note the use of C on this project.andP;  In thewriter's opinionK, it is this type of work, rather than its frequent andvoguish use for MS-DOs applications, which best exploits C's high level/lowlevel features.andP;  Cross-development for the embedded microprocessors wasmostly done using HP host systems and development tools.andP;  The company is nowextending the systems for the DLR extensions.andP;  These include an extra tracksection, running underground into the City of London, and new two-car trains,which will increase the capacity of the railway.andM;Finally, please spare a thought for the DLR's train captains, whose job (and,if they are human, surely their secret hope) is to drive the train in theevent at ATO failure.andP;  Conventional trains have a 'dead man's handle',allowing automatic systems to take over if the driver is taken ill.andP;  On theDLR, they put in a human to step in and snatch the controls in case the trainfaints.andO;</TEXT></DOC>