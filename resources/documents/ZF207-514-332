<?xml version='1.0' encoding='UTF-8'?>
<DOC><DOCNO>  ZF207-514-332  </DOCNO><DOCID>07 514 332.andM;</DOCID><JOURNAL>UNIX Review  August 1989 v7 n8 p48(6)* Full Text COPYRIGHT Miller Freeman Publications 1989.andM;</JOURNAL><TITLE>Rites of passage. (database interoperability)</TITLE><AUTHOR>McGuckin, Paul.andM;</AUTHOR><SUMMARY>A database transparency layer could make multi-vendors' databasemanagement systems conform to a standard remote-data-access model.andO;Although this layer is still in the theoretical stages, it wouldneed to include a comprehensive structured query language (SQL)specification, transaction and concurrency control, messagepackaging and transmission.andP;  For a first step toward such a layer,the National Standards Institute adopted a standard for SQL;however, it lacks definition of the language and standardizationof methodology.andP;  The standard, SQL-1, does provide COMMIT WORK andROLLBACK WORK operations specifying whether a given transactionshould be applied to the database or undone.andP;  It does not providefor message packaging and transmission.andP;  The InternationalStandards Organization is attempting to standardizedatabase-related message packaging and transmission.andM;</SUMMARY><DESCRIPT>Topic:     Applications ProgrammingInformation Storage and RetrievalSoftware MigrationQuery LanguagesGateways (Connector)Data Base Management Systems.andO;Feature:   illustrationchart.andO;Caption:   The hypothetical data-transparency layer. (chart)The Oracle gateway to DB2 requires three layers. (chart)The CL/1 server. (chart)andM;</DESCRIPT><TEXT>RITES OF PASSAGEandM;In a perfect world, software developers would be able to write applicationsusing whatever software tools were the most convenient and would guaranteethe highest productivity.andP;  These tools might include non-proceduraldevelopment environments, 4GLs, and artificial-intelligence-based programgenerators supplied by a number of vendors.andP;  Completed applications wouldthen be able to access data wherever it resided, without regard for:andM;* the form in which the data was stored--a relational database managementsystem (RDBMS), a non-relational DBMS, or operating-system-maintained files;andM;* the semantics of the language used to manipulate the data--SQL, proprietaryquery language, or low-level I/O functions;andM;* the implementation choices made by a specific vendor--the SQL dialect, orclient/server message format used, for example.andM;Obviously, today's application developers know no such utopia.andP;  Applicationswritten using vendor A's tools typically must be run against vendor A's datamanager.andP;  Given this situation, two pertinent issues come to the fore.andP;  Thefirst concerns the features a hypothetical database transparency standardwould need in order to bring us closer to the application developers' utopiadescribed above.andP;  The second is the role database gateways can play inproviding some degree of database transparency.andM;Figure 1 illustrates a hypothetical database transparency layer implementedin four relational, SQL-based DBMS products.andP;  Conceivably, this layer couldmake each vendor's DBMS conform to a standard remote-data-access model, thusallowing free and transparent communication among all four.andP;  At a minimum,the model would need to include the features described below.andM;A Comprehensive SQL Specification.andP;  In 1986, the American National StandardsInstitute (ANSI) adopted a standard for the SQL language which we willhereafter refer to as SQL-1 [1].andP;  Although the relevant ANSI documentdescribes the semantics of the language in detail, database researcher C.J.andO;Date has noted that [2]:andM;...  many aspects of standard SQL are explicitly stated to be eitherundefined or implementation-defined (and certain aspects are implicitlyundefined also--presumably unintentionally).andP;  Even if two implementations areboth conforming, therefore, there is still no guarantee of applicationportability.andM;Among the ill-defined features of the language that require further attentionare:andM;* Data Definition Language (DDL).andP;  The SQL-1 specification defines theoperations CREATE TABLE and CREATIVE VIEW, but provides no standardizedmethod for dropping tables or views, altering tables, or creating or droppingindexes.andP;  Application programs are therefore provided with no standard way tomanage the tables they may require for internal use (such as for storinginitialization parameters or operating-system-independent terminaldefinitions) or the temporary tables they may need to create.andP;  ANSI'sproposed extension to SQL-1, hereafter referred to as SQL-2, provides DROPTABLE, DROP VIEW, and ALTER TABLE operations, but it does not standardize thehandling of indexes [3].andM;* Catalog Formats.andP;  Application programs do not always contain specificinformation about the structure of the database tables they will bemanipulating--in fact, general-purpose programs definitely do not containsuch information.andP;  In the absence of a &quot;describe table&quot; operation, anapplication must interrogate the data dictionary directly in order todetermine the nature of a table's component columns.andP;  Oracle, for example,provides two views that hold such information (TABLES and COLUMNS) and thatcan be queried using standard SQL.andP;  The SQL-1 specification is silent on thetopic of catalog formats, but the SQL-2 specification proposes to provide&quot;schema information tables&quot; that could contain the necessary information.andM;* Return Codes.andP;  The only standardized return codes specified by SQL-1 are 0for &quot;successful completion&quot; and +100 for &quot;no rows found&quot; (the latter isspecified in an ANSI SQL-1 addendum).andP;  All other return values areimplementation-specific, which poses serious problems for the portability ofapplication programs.andP;  SQL-2 proposes to provide extensive diagnosticinformation when an exception occurs, both through an SQLSTATE characterstring and through an SQL__DIAGNOSTICS table.andM;* Dynamic SQL.andP;  Application programs need to be able to generate SQLstatements about which nothing is known in advance, and to have themexecuted; the tables and columns affected (including the number of columnsand their data types), as well as the &quot;where&quot; clause, are generated on thefly.andP;  This capability is crucial to the construction of generalizedapplication programs.andP;  Although some vendors (including Oracle and IBM)currently provide it, the SQL-1 standard is silent on the topic.andP;  SQL-2,however, proposes a dynamic SQL standard, which would implement the neededcapability.andM;Transaction and Concurrency Model.andP;  SQL-1 provides COMMIT WORK and ROLLBACKWORK operations that specify whether a given transaction (that is, the workundertaken since the previous COMMIT or ROLLBACK statement) is to beirrevocably applied to the database (COMMIT) or undone (ROLLBACK).andP;  Changesmade by one user cannot be seen by other users until a transaction has been&quot;committed&quot;.andP;  Such coordination of user operations on the database is calledconcurrency control.andM;Within this extremely loose framework, vendors must make decisions about howto implement concurrency control.andP;  For instance, when a user intends toupdate a database row, that user must typically acquire a lock in order toguarantee that no other user will update the same row for the duration of thefirst user's transaction.andP;  Vendors may implement this lock as a table lock(preventing other users from modifying any row in the table), a page lock(preventing modification of any row that shares the same disk block as thetarget row), or a row lock (preventing modification of the target row only).andM;Queries, like users, may also need to acquire a designated kind of lock.andP;  Onevendor may prevent a query from examining a page that contains a row that iscurrently locked (causing the query to be suspended until the page lock isreleased), while another vendor may implement a multiversion read-consistencyscheme under which each query sees a version of the database as it existed atthe moment the query began.andM;It is not our intention to debate the advantages and disadvantages of thedecisions that underlie different vendor implementations.andP;  However, if theconcurrency model that is implemented by a vendor is significantly differentfrom the model expected by an application program, problems can arise.andP;  If anapplication program expecting row-level locking is run against atable-locking DBMS, for example, deadlocks may occur at runtime.andP;  Similarly,if an application program that expects a multiversion read-consistency modelexecutes an hourly subtotal query against a page-locking DBMS, the programmight receive incorrect results.andP;  Vendor differences over concurrency-controlstrategies are exacerbated by language extensions that some vendors implementto control the model used, especially when the default model may be the leastdesirable option.andM;SQL-2 proposes to implement a SET TRANSACTION operation that may provide asolution for some of the practical--if not the philosophical--issuesdescribed above [4].andM;Message Packaging and Transmission.andP;  In neither SQL-1 nor SQL-2 is thespecific message format used to send an SQL statement from an applicationprogram to a DBMS server defined.andP;  Likewise, the format used to return theresulting data is left undefined.andP;  Furthermore, dealing with heterogeneouscomputing environments requires vendors to resolve issues surroundingdata-type representations (including byte ordering) and character sets(including collating sequences).andM;ISO, the International Standards Organization, has a project under way incooperation with ANSI to standardize database-related message packaging andtransmission.andP;  Known as the Remote Database Access Service and Protocol (RDA)project [5], it is composed of two complementary subprojects, one aimed atspecification of a generic protocol, and the other at a standard for eachparticular language supported.andP;  The only language currently supported isSQL-1 (there are plans to support SQL-2 as well as future specifications).andO;The RDA protocol operates as an application-layer protocol (layer 7 in theOSI Reference Model) and therefore relies on lower OSI layers to handledata-type and byte-order conversion.andM;Although the RDA standard will not be completed for at least a year, twogroups have recently begun to deal with the practical problems involved inthe implementation of an RDA-based protocol.andP;  These are the NationalInstitute of Standards and Technology (NIST) OSI Implementors WorkshopSpecial Interest Group on RDA, and an industry group--led by Tandem ComputersInc.--known as Open SQL.andM;Work is under way, then, to resolve 95 percent of the issues that are crucialto the implementation of our utopian &quot;database transparency standard&quot;.andP;  Thefinal version of those standards--not to mention their implementation byvendors--is many years away.andP;  Meanwhile, vendors are constructing databasegateways that will allow their tools and DBMSs to communicate with othervendors' DBMSs.andM;The purpose of a database gateway is to make a foreign DBMS look as much aspossible like a vendor's proprietary DBMS.andP;  Gateways stand in sharp contrastto database transparency layers, whose goal is to make a proprietary DBMSlook as much as possible like a &quot;standard&quot; DBMS.andM;One example of a database gateway is Oracle's SQL*Connect, which links theOracle database to IBM's DB2 (see Figure 2).andP;  This gateway is implemented asa separate task running under IBM's MVS operating system.andP;  Seen from theOracle side (which can run either on an IBM machine or on another computersomewher on the same network), the gateway looks like an Oracle DBMS server.andO;Seen from the DB2 side, it looks like a DB2 application.andP;  Conceptually, thegateway is composed of three layers:andM;* The NetWorking Layer.andP;  Oracle's SQL*Net application-layer protocol runs ontop of an OS-supplied protocol (such as LU6.2 or TCP/IP).andP;  In addition tohandling the establishment and termination of connections between the Oracleside and the gateway, this layer is responsible for resolving connectionsbetween heterogeneous systems--systems with different data-type mappings,byte orderings, or character sets.andP;  At connect time a sign-on string ispassed from the Oracle side to the gateway; a string that arrives garbled isa sign that a connection has been made with an incompatible system(underlying protocols guarantee that messages will be delivered intact).andO;Character-set translation tables and other system-specific details are thenexchanged, and a basis for communication is established.andM;* The Translator.andP;  The heart of any database gateway is the translationlayer, which in this case receives incoming mesages from the Oracle side.andO;Most of these messages are SQL statements that have been packaged withappropriate vendor-specific header information.andP;  The translator strips offthe headers and constructs appropriate dynamic SQL statements, which are thenpassed to the DB2 Dynamic SQL layer.andP;  It is also responsible for emulatingOracle's catalog (or data-dictionary) tables by translating the queries intoDB2 format.andM;On the return trip--DB2 to Oracle--the translator is responsible fortranslating DB2 data types into Oracle data types before packaging messagesthat are then returned to the Oracle side.andP;  Error messages are formatted intotwo parts:  a reserved Oracle error number assigned to flag DB2 errors, andthe actual DB2 error message.andP;  DB2 return codes are mapped into familiarOracle values.andM;* DB2 Dynamic SQL.andP;  DB2 allows application developers to construct programsthat can accept and process dynamic SQL.andP;  This layer of the gateway acceptsthe dynamic SQL statements framed by teh translator and submits them to DB2.andO;It allocates memory to hold the values that will be returned from DB2, and itchecks the appropriate DB2 error flags.andP;  The returned values (or errormessage) are passed back to the translation layer.andM;The gateway allows Oracle tools, application programs containing embedded SQL(linked with vendor-specific SQL libraries), and Oracle DBMS servers to gainaccess to DB2 transparently.andP;  Assumping they have the proper permissions,they can query, update, insert, and delete DB2 tables just as they manipulateOracle tables.andP;  The gateway allows DB2 to participate in Oracle-distributedqueries (joining an Oracle table to a DB2 table, for example), thus providinga transparent way for users to view data relationships without regard to thedata's physical or logical configuration.andM;Network Innovations, an Apple subsidiary, has taken a somewhat differentapproach to building database gateways [6].andP;  The company is not itself a DBMSvendor, but rather provides gateways to other vendors' DBMSs.andP;  CL/1, itsprocedural, SQL-like call library, is used to develop applications on aclient system, typically a Macintosh or PC.andP;  Such applications can then berun agaisnt any DBMS for which Network Innovations has constructed a CL/1server (see Figure 3).andP;  The server, acting as a DBMS gateway, performs thetranslation and formatting functions appropriate for the target DBMS.andM;Until now, we have considered only the connection of SQL-based RDBMSs withother SQL-based RDBMSs.andP;  Other fundamental issues are involved in connectingthem to non-relational systems.andM;Data Model.andP;  The only data type an RDBMS shares with a non-relational DBMS,such as IBM's IMS, is the character.andP;  IMS's unit of storage is a segment,which can contain multiple, unnamed, overlapping data items, whereas SQL'smodel is a row composed of named, atomic columns.andM;Although IMS's hierarchical relationships could be mapped into a relationalrepresentation, such work would have to be done by an IMS/SQL expert, whocould then present these representations to users [7].andM;SQL Processor Construction.andP;  The &quot;translation&quot; layer of the gateway between ahierarchical and relational database is much more difficult to construct thanis an SQL-to-SQL translator.andP;  In the case of the IMS gateway, the translationlayer would need to parse SQL statements and construct DL/I calls toaccomplish the effects desired.andP;  However, the list of SQL operations thatcould not reasonably be accomplished in IMS is relatively long [7], andeither these operations would need to be screened out or some emulation ofthem would need to be performed.andP;  In any case, users would have to beprepared to live with serious restrictions.andM;Oracle Corp. is currently working to develop an IMS gateway.andP;  In addition,Network Innovations' CL/1 provides operations for traversing hierarchicaldata structures, though no CL/1 server for IMS currently exists.andM;With flat file systems, no data model exists.andP;  The challenge, therefore, isto determine how an SQL processor can impose definition and meaning on thecontents of a file.andP;  One method is to rely on an external definition of thefile's contents--such is the approach taken by Network Innovations in itsCL/1 serer for VAX/VMS RMS files, which requires the presence of CDD andDatatrieve.andM;Database gateways provide great benefit to the customers of a vendor thatimplements them by allowing applications to run without modification againsta specific foreign DBMS.andP;  However, gateways are a one-way street: while theyadd value to the implementing vendor's tools and DBMS, they do nothing to&quot;deomcratize&quot; database access.andP;  In most cases, vendors implement gateways tothose DBMSs (such as IBM's DB2) with which their own product must, forpractical reasons, coexist.andM;The standards bodies mentioned earlier are grappling with the job of layingthe foundations of an application developers' utopia.andP;  We can only hope thatthis goal, rather than parochial claims or bureaucratic minutiae, will bestandards committees' highest priority.andM;Paul MCGuckin is currently director of technical marketing in the UNIXdivision at Oracle Corp. (Belmont, CA), where he earlier spent three years asdirector of OEM support and was responsible for the technical management ofporting Oracle products to 30 UNIX and non-UNIX platforms.andP;  Before joiningOracle, McGuckin worked for Plexus Computers and, back in the days beforeUNIX was respectable, was president of a systems integration company thatspecialized in UNIX.andP;  He describes himself as one of a daying breed ofself-taught hackers.andM;AcknowledgementandM;Special thanks to Dr. Jerry Baker or Oracle Corp. for many of the conceptsdeveloped in this article.andM;ReferencesandM;[1] American National Standards Institute, Database Language SQL, DocumentANSI X3.135-1986.andM;[2] C. J. Date, A Guide to The SQL Standard, Addison-Wesley (1989), p. 163.andM;[3] American NAtional Standards Institute/International StandardsOrganization,  ISO-ANSI Database Language SQL2 (working draft), Document ANSIX3H2-88-259/ISO DBL SYD-2.andM;[4] Date, p. 133.andM;[5] International Standards Organization, Generic Remote Database AccessService and Protocol, Project JTC1.21.31 (1989).andP;  See also Remote DatabaseAccess: SQL Specialisation, Service and Protocol and Remote Database AccessTutorial (same ISO project number).andM;[l] Network Innovations, CL/1 Connectivity Language: Language Description(1988).andM;[7] C. J. Date, &quot;Why Is It So Difficult to Provide a Relational Interface toIMS?&quot;, in Relational Database: Selected Writings, Addison-Wesley (1986).andO;</TEXT></DOC>