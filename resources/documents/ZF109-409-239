<?xml version='1.0' encoding='UTF-8'?>
<DOC><DOCNO>  ZF109-409-239  </DOCNO><DOCID>09 409 239.andM;</DOCID><JOURNAL>Hewlett-Packard Journal  August 1990 v41 n4 p64(15)* Full Text COPYRIGHT Hewlett Packard 1990.andM;</JOURNAL><TITLE>500-MHz and 300-MHz programmable pulse generators.andO;(Hewlett-Packard's 8131A and 8130A)</TITLE><AUTHOR>Berkel, Werner; Koffmane, Gerd; Eatock, Frederick L.; Schmid,Patrick; Hopke, Heino; Snackers, Hans-Jurgen.andM;</AUTHOR><SUMMARY>Hewlett-Packard's 8131A 500-MHz and 8130A 300-MHz pulse generatorsuse the same basic building blocks in their designs, the primarydifference being the 8130A slope generator and output amplifier.andO;The HP 8131A has fixed 200-picosecond rise and fall times, makingit suitable for testing the most advanced CMOS, BiCMOS, ECL andGaAs devices, while the HP 8130A has rise and fall timesprogrammable from one nanosecond to 100 microseconds and pulseperiods programmable from 3.33 nanoseconds to 99.9 milliseconds.andO;A transducer mode in the 8131A allows it to convert an externalsine wave at a frequency of up to 1 GHz to a square wave with200-picosecond transition times and selectable amplitude up to 5V.andO;A single timing board was used in the design of both boards; itconsists of three timing circuits to generate period, delay andwidth, and the trigger input stage.andM;</SUMMARY><DESCRIPT>Company:   Hewlett-Packard Co. (product development).andO;Ticker:    HWP.andO;Product:   HP8130A (Test equipment, electronic) (design and construction)HP8131A (Test equipment, electronic) (design and construction).andO;Topic:     Integrated Circuit FabricationSemiconductor Production EquipmentInstrumentsAutomatic Test EquipmentCircuit DesignVery High Speed Integrated Circuits.andO;Feature:   illustrationphotographgraphchart.andO;Caption:   Typical HP 8131A output waveforms. (graph)Block diagram of the HP 8131A and HP8130A pulse generators.andO;(chart)andM;</DESCRIPT><TEXT>[FIGURES HAVE BEEN OMITTED]andM;These instruments are capable of testing the most advanced CMOS, ECL, andGaAs devices.andP;  A custom bipolar /C generates the timing parameters.andM;THE PULSE GENERATOR is a versatile and fundamental instrument that is widelyused for parametric measurements on digital devices in automatic test andbench Randamp;D applications.andP;  Using a fast pulse generator at the input of adevice under test and a fast sampling oscilloscope at the output,measurements of setup and hold times, propagation delays, maximum togglefrequencies, input level sensitivities, and many other parameters can be madeat normal operating speeds.andP;  The pulse generator is also well-suited forcharacterizing transmission lines.andP;  It can be used to measure crosstalk,loss, impedance matching, and other characteristics.andM;In fast bipolar digital technology and the fast-growing GaAs field we saw ademand for a fast pulse generator.andP;  After the initial investigation, wedefined two.andP;  The HP 8131A (Fig.andP;  1) is a 500-MHz pulse generator with fixed200-picosecond rise and fall times.andP;  The HP 8130A (Fig.andP;  2) is a 300-MHzgenerator with variable transition times.andP;  Most of the building blocks of theHP 8131A are used in both instruments, the main exceptions being the HP 8130Aslope generator and output amplifier.andP;  Both instruments are fullyprogrammable via the HP-IB (IEEE 488, IEC 625).andM;500-MHz Pulse Generator The HP 8131A's 200-ps transition times (10% to 90%)and 500-MHz maximum repetition rate are suitable for testing the mostadvanced CMOS, BICMOS, ECL, and GaAs devices.andP;  For higher repetition rates, atransducer mode allows the generator to convert an external sine wave at afrequency up to 1 GHz to a square wave with 200-ps transition times andselectable amplitude up to 5V.andM;The pulse period (50% level) is programmable from 2 ns to 99.9 ms.andP;  The pulsewidth (50% level) is programmable from 500 ps to 99.9 ms, the maximumdepending on the period.andP;  Timing resolution is three digits-10 ps best case.andM;The output swing is programmable from 100 mV to 5V in a  5V offset windowinto 50 ohms.andP;  An optional second channel provides two different butsynchronized signals for simulating clock and data signals for setup and holdtime measurements.andM;Fig.andP;  3 shows typical HP 8131A waveforms.andP;  300-MHz Variable-Slope PulseGeneratorandM;The HP 8130A's rise and fall times (10% to 90%) are programmable from 1 ns to100 lAs (independently from 2 ns).andP;  The pulse period is programmable from3.33 ns to 99.9 ms, and the pulse width (50% level) is programmable from 1.5ns to 99.9 ms, the maximum depending on the period.andP;  Timing resolution is 10ps best case.andM;The output swing is programmable from 100 mV to 5V in a +/-5V offset windowinto 50 ohms, and an optional second channel is available.andM;Fig.andP;  4 shows typical HP 8130A output waveforms.andP;  Block DiagramandM;Fig.andP;  5 is a simplified block diagram of the two pulse generators.andP;  The toplevel shows the base unit of both instruments excluding the power supply andthe processor unit.andM;The trigger input amplifies and shapes external signals for the externalwidth, external burst, external trigger, and external clock modes.andP;  After theperiod oscillator, which generates the basic pulse train, the signal is splitinto the trigger output channel and the main channels.andP;  The delay generatordetermines the delay between the main channels and the trigger output.andP;  Thedelay generator is followed by the width generator, which determines theoutput pulse width.andM;The second level of the block diagram shows the HP 8131A output system, whichis described in detail in the article on page 79.andP;  A pulse shortener circuitreduces the minimum width of 1 ns generated by the width generator to 500 ps.andO;An ECL signal modified by the normal/complement switch drives the GaAsamplifier.andP;  The 200-ps transition times are fixed for the full amplituderange of 100 mV to 5V.andM;The third level of the block diagram shows the HP 8130A output system, whichis described in detail in the article on page 85.andP;  The variable transitiontimes are generated by two slope generators: a GaAs a fast slope generatorand a slow slope generator built using surface mount technology.andP;  The HP8130A output amplifier includes a vernier stage for output swing adjustmentand is designed to be extremely linear because of the programmable slopes.andP;  Apost-attenuator is used to achieve the output voltage range of 100 mV to 5V.andM;IC Process&quot;andM;One of the major challenges in the pulse generator project was the difficultyof developing the high-performance, high-speed analog circuits.andP;  When theproject began, there was little experience to draw upon in the design ofbroadband linear ICs running from dc to GHz.andM;We needed a 500-Nm timing circuit, a 600-ps slope generator, and anadjustable output amplifier.andP;  A feasibility study to find the best available,most reliable, integrated circuit processes for these requirements led to thechoice of two proprietary HP processes.andM;For the high-speed timing system we chose HP's 5-GHz bipolar process, and forthe output amplifier we chose HP's gallium arsenide RFIC process.andP;  The designof the timing circuits is described in the next part of this article.andP;  TheGaAs amplifier design is covered in the article on page 79.andM;Timing BoardandM;In the IHP 8130A and HP 8131A pulse generators, all of the timing for the two500-NM channels is generated on a single board.andP;  This timing board is used inboth instruments.andP;  It consists of four major parts: three timing circuits togenerate period, delay, and width and the trigger input stage.andP;  In theoptional two-channel version, the delay and width generators are simplyduplicated.andP;  Fig.andP;  6 is a block diagram of the timing board.andM;Timing CircuitsandM;As mentioned above, there are three timing circuits in the standardinstrument and five in the optional two-channel pulse generator.andM;The timing circuits for period, delay, and width generation are very similar.andO;Each consists of one of the 500-MHz bipolar timing ICs described above, a200-MHz bipolar counter, five current sources, one voltage source, and somecontrol circuitry.andP;  The period generator has an additional 10-MHz TTL burstcounter.andP;  Fig 7 is a diagram of the timing circuit.andM;Depending on the mode selected by the digital mode control circuitry, thetiming circuit can operate asandM;* A gateable oscillatorandM;* A triggerable monostable multivibrator (one-shot)andM;* A transparent IC (output signal = input signal).andM;The timing IC and the counter form the core of the timing circuit.andP;  Thetiming IC is capable of generating a pulse train with a period between 2 nsand 100 ns and a pulse width between 1 ns and 100 ns.andP;  This analog timinggeneration is split into two ranges.andP;  In the first range, timing parametersbelow 10 ns are generated and the timing resolution is 10 ps.andP;  In the secondrange, above 10 ns, the resolution is 100 ps.andM;The counter is used to enlarge the period or width by a factor of 10', wheren is between 1 and 6.andP;  This makes it possible to generate timing parametersup to 100 ms.andM;Like the timing IC, the counter is a custom bipolar IC designed in the HP-5process.andM;Timing Parameter GenerationandM;Fig.andP;  8 shows how the period, delay, and width are generated on the timingboard in the normal operating mode.andP;  The period generator works as afree-running oscillator.andP;  Its repetition rate is the period of the pulsetrain.andP;  The output signal is used twice.andP;  It supplies the output triggerstage on the output board and it triggers the delay generator.andP;  The delay andwidth generators work as one-shots, both triggered on the rising edges oftheir input signals.andP;  Thus the delay generator triggers the width generatorafter the programmed delay, which corresponds to the pulse width of the delaygenerator.andP;  The width generator determines the width of the output pulse.andO;The output of the width generator goes to the output board, where it isamplified and becomes the output of the instrument.andM;In addition to the normally used auto mode, the timing board can be used inan externally triggered mode by switching the period generator to atransparent state.andP;  The external input signal then directly triggers thedelay generator and appears at the same time at the trigger output.andM;In the gated mode, the period generator operates as in the auto mode, butwith its gate input enabled.andP;  This makes it possible for an external signalto start and stop the period generator.andP;  Built-in last-cycle-complete logicensures that all pulses of a pulse stream will have the same timingcharacteristics and that no pulse can be shortened by the external inputsignal.andM;In the burst mode, the period generator is started by an external triggerevent and stopped after a predefined number of pulses, selectable from 1 to9999.andP;  The maximum frequency of 200 MHz in this mode is achieved by using thebipolar counter to count the number of pulses.andP;  In the period range above 100ns, this counter is used to enlarge the timing IC's repetition rate, and anextra TTL counter, the burst counter, takes over the pulse-counting role.andM;Triggering the width generator not only on the rising edge of its inputsignal but also on the falling edge results in the double-pulse mode.andP;  Inthis mode the output consists of pairs of pulses separated by a time intervaldetermined by the delay generator.andP;  The maximum repetition frequency in thismode is 277 MHz (t[sub.per]andgt; 7.2 ns).andM;For most of the operating modes of the timing board, an external signal mustbe supplied.andP;  To make it easy for the user to trigger the pulse generator onalmost any interesting signal, a 500-MHz bipolar trigger input stage isimplemented on the timing board.andP;  This trigger input can be set to trigger onthe positive or negative edge of the input signal at a trigger levelprogrammable in a range between + 5V and - 5V.andP;  Timing Board AdjustmentandM;The timing board is completely adjusted by an adjust program.andP;  Therefore,there are no manual adjustments on the board.andP;  All adjustment information isstored in an EEPROM on the board.andP;  This method makes it possible to adjustand test the timing board in less than 30 minutes for a two-channel board.andO;Most of the adjustment and test procedures run automatically, so only forabout 10 to 15 minutes does a technician have to handle the board.andP;  The restof the procedure is performed entirely by automatic test equipment.andM;As explained previously, the principle of timing generation is very simple.andO;A capacitor is charged by a certain current.andP;  The voltage on the capacitorincreases until it reaches the upper threshold of a Schmiff trigger.andP;  Thecapacitor is then switched to a negative current to discharge it.andP;  Thevoltage decreases until it reaches the lower threshold of the Schmitttrigger.andP;  The current source is switched again, recharging the capacitor, andthe cycle repeats.andP;  If the timing IC is used as a period generator, thischarging/discharging cycle runs continually, while it runs only once if delayor width is being generated.andM;To adjust the timing parameters, it is necessary to align the parameters inthis circuit, which can vary in production between individual timingcircuits.andP;  These parameters are:andM;* The value of the ramp capacitorandM;* The charging and discharging currentsandM;* The internal propagation delay of the timing IC.andM;Because of the complex circuitry necessary to stimulate and control thetiming IC, at least 10 to 12 potentiometers would have to be implemented toadjust one timing circuit.andP;  On a complete timing board, this would result in50 to 60 potentiometers.andP;  To make the problem more difficult, there would beseveral interdependencies between the potentiometers and there are somelimits to observe.andP;  Obviously, a better solution had to be found.andP;  As alreadymentioned, the solution was to adjust the timing board automatically, bymeans of a program.andP;  All of the components needed for complete softwarecontrol were available.andP;  The HP 54120A, a fast digital oscilloscope, could beused for accurate high-speed timing measurements, and because the pulsegenerator was designed to be programmable, digital-to-analog converters(DACS) were already implemented on the board.andP;  It was only necessary to makethese 12-bit DACs instead of the 10-bit DACs that would normally have beenrequired.andP;  The improved DAC resolution makes adjustment possible over a widerange while maintaining the required timing resolution.andM;TheoryandM;The most direct approach to software adjustment is to find the DAC values forsome equidistant timing values within a particular timing range, as shown inthe following example:andM;Period (ns)      : 2.0 2.5 3.0 3.5 4.0 4.5 5.0...andM;DAC Values       : 100 150 190 250 310 350 400...andM;For each timing value, the corresponding DAC value has to be found asaccurately as possible.andP;  This usually takes a few iterations.andP;  Once found,these DAC values can be stored in an EEPROM.andP;  The microprocessor in the pulsegenerator would access these values and calculate intermediate values usinglinear interpolation.andM;The disadvantage of this method is that it is necessary to measure a largenumber of timing values very accurately to ensure small deviations across theentire timing range.andP;  For this reason, a faster solution was wanted.andM;Our solution is to calculate the dependence between each timing parameter andthe control mechanism-for example, the period of the timing IC as a functionof the DAC value-taking all possible variations into account.andP;  A realisticformula for the dependence between the delay or width and the chargingcurrent is:andM;T = [C.sub.ramp.][V.sub.hyst] / [I.sub.C] + [kt.sub.pd]andM;where T is the timing value  delay or width), [V.sub.hyst] is the voltagewindow of the Schmitt trigger, Cramp is the ramp capacitance, [I.sub.C] isthe charging current, [t.sub.pd] is the internal propagation delay of theSchmitt trigger, and k is a factor greater than or equal to 2.andM;The timing value T is proportional to 1/[I.sub.C].andP;  To operate the DAC in areasonable manner, the timing should be proportional to the DAC value.andP;  Toachieve this, the current has to be proportional to 1/Z, where Z is the DACvalue.andP;  Therefore, the dependence between the current and the DAC value isgiven by:andM;[I.sub.C] =  [Z.sub.max] / Z ,andM;[I.sub.ref] + [I.sub.o]andM;where [Z.sub.max] is the maximum DAC value (e.g., 4095), Z is the actual DACvalue, [I.sub.ref] is the DAC reference current, and [I.sub.o], is anadditional current offset.andM;Combining equations 1 and 2, the relation between the DAC value and thetiming can be calculated as:andM;T = [C.sub.ramp][V.sub.hyst]/ [Z.sub.max] / Z ,andM;[I.sub.ref] + [I.sub.o]andM;or, written in other terms:andM;T =  1 / A/Z + B , + CandM;A, B, and C are characteristic values of the function that depend on theindividual timing circuit.andP;  This formula can be inverted to calculate the DACvalue for a given T:andM;Z =  A / 1/(T - C) - BandM;1/(T - C) - BandM;This function is implemented in the adjust program for the timing board.andP;  Theprogram only has to determine DAC values for a few timing values and can thencalculate A, B, and C. These characteristic values are stored in the EEPROM.andO;The system microprocessor in the pulse generator reads them and calculatesthe DAC values according to equation 5 .andM;The advantage of this procedure is that fewer measurements are necessary thanin the normal procedure.andP;  In addition, these measurements don't have to be soaccurate, because the function doesn't need exact timing to calculate A, B,and C. Practical ExperienceandM;Using this procedure in production showed that it was possible to do anaccurate adjustment very quickly.andP;  The run time for the adjust program isabout 15 minutes for a two-channel timing board.andM;A few problems were encountered.andP;  One of them was that in the highestfrequency range, the timing IC's characteristic is nonlinear.andP;  Therefore, inthis range the algorithm to calculate the characteristic values has to bechanged to get good results.andP;  Another problem, a disadvantage of doing theadjustment using a relatively complex function, is that if the adjust programfails, it is impossible to correct the values stored in the EEPROM, becausethey do not represent a single DAC value but a part of a function.andP;  For thisreason, the program had to be designed very carefully, using error trappingroutines to catch any error that might occur.andM;500-MHz Universal Pulse Timing ICandM;A custom bipolar integrated circuit realized using HP's 5-GHz IC processprovides all of the pulse timing capabilities necessary for the HP 8131A andHP 8130A pulse generators.andP;  Fig.andP;  9 shows its functional block diagram.andP;  Itconsists mainly of a spike generator block, a timing generator block, andsome logic to control the signal paths.andM;The spike generator is the first block in the signal path starting with thetiming IC's trigger/gate input PTG.andP;  Depending on the operating mode (gated,triggered, or transparent) the spike generator either passes the incomingsignal unchanged to its outputs or generates short pulses corresponding toeither the positive edge or both the positive and negative edges of theincoming signal.andP;  The short pulses are generated in an emitter-coupledmonostable multivibrator (one-shot) and are typically around 800 ps wide.andM;In transparent mode the input signal is guided directly to the timing IC'smain outputs POUT and POUTB by activating the control signal LREN.andP;  In thiscase the timing generator block is disabled by LTEN.andM;In all other modes the timing generator operates as a multigated VCO.andO;Free-run mode is obtained by keeping the PTG input active.andP;  In triggered modethe short pulses from the spike generator are used to gate one period only,thus operating the timing generator as a one-shot.andP;  For frequencies from 10MHz to 500 MHz or one-shot times from 1 ns to 100 ns, the timing generator'soutput PCOUTB  connected externally to PCIN) is routed to POUT and POUTB bycontrol signal LFRIM.andP;  The external range counter is inhibited.andP;  Forfrequencies lower than 10 MHz or pulse widths larger than 100 ns, theexternal range counter (clocked by PCLK) is enabled and ORs its terminalcount signal via HGTE with the gate signal.andP;  The third gate input, HBGTE, iscontrolled by the terminal count signal of a burst counter (clocked by PBCLK)and is used in the period generator only.andP;  PCOUTB and PCLK are externallysingle-terminated CML outputs.andP;  POUT and POUTB are double-terminated EECLoutputs with source termination on the chip.andP;  Fig.andP;  10 shows an example ofmultiple gating for the case of a slow four-pulse burst with the rangecounter dividing by a factor of 4.andP;  In reality, the range counter divides bypowers of 10.andM;Spike GeneratorandM;To meet the performance specifications of the instruments, a number ofperformance goals were established for the spike generator.andP;  These includedthe generation of tightly controlled 800-ps-wide pulses at repetition ratesexceeding 500 MHz with low pulse jitter, widths independent of the supplyvoltage, and a low residual temperature coefficient.andM;Fig.andP;  11 shows a functional block diagram of the spike generator including asimplified schematic of the pulse generation circuitry.andP;  With the HGLT modecontrol input held low, a square wave applied to the PTG input produces twocomplementary 800-ps-wide pulse trains at outputs D and G1, synchronized tothe positive edges of the PTG signal.andP;  At the same time, a secondcomplementary train of 800-pswide pulses is produced at the terminals X andY, but synchronized to the negative edges of the PTG signal.andP;  Holding HGLThigh causes the PTG input to be passed transparently to the D and G1 outputs.andO;In this mode, outputs at X and Y are inhibited.andP;  A pulse width control inputis provided for fine adjustment of the pulse width and to accommodate theprocess spread of the on-chip components that define the pulse width.andM;In the pulse generator mode, a signal applied to the PTG input is levelshifted and applied to a differential amplifier composed of transistors[Q.sub.A] and [Q.sub.B].andP;  The amplifier outputs are applied to a pair ofemitter followers, [Q.sub.C] and [Q.sub.D], which drive the timing capacitorC. Referring to nodes V, through [V.sub.4], on the negative-going edges of V,and V2, transistors [Q.sub.C] and [Q.sub.D], respectively, will be turned offfor a period of time proportional to the slew rate of the voltages at nodesV, and V,.andP;  This cutoff period defines the pulse width, and is determined bythe value of capacitor C and the currents I drawn by the current sources fortransistors [Q.sub.C] and [Q.sub.D].andP;  During the time that Q is off, thevoltage at node [V.sub.5] is high.andP;  Voltage [V.sub.5] is then buffered anddirected to outputs D and G1.andP;  A second buffer connected to the collector oftransistor QD provides outputs at X and Y. In the transparent mode ofoperation, signals applied to the PTG input are amplified, passed with smalldelay, and wire-ORed to node V, where they are also buffered to the D and Gioutputs.andP;  Fi .andP;  12 shows simulation waveforms for the circuit in the pulsegeneration mode of operation.andP;  Mathematical analysis of the circuit showsthat pulse width can be estimated by the function:andM;[t.sub.w] = KRCandM;where K is a constant of proportionality determined by on-chip resistorratios, and R and C are on-chip circuit elements as shown in Fig.andP;  11.andM;Timing GeneratorandM;Fig.andP;  13 shows the functional block diagram of the timing generator togetherwith external control voltage and current sources.andP;  In the center is the rampcapacitor C,, which is charged by current [I.sub.POS] and discharged bycurrent [I.sub.NEG].andP;  These currents are alternatively switched to the rampnode R by the diode bridge, resulting in a triangular voltage at the rampnode.andP;  A Schmitt trigger circuit senses the ramp voltage.andP;  When the rampcrosses the switching point, the Schmitt trigger switches the diode bridge,thus inverting the current flow through the capacitor.andP;  A second capacitor,[C.sub.2] can be switched in parallel with C, by a saturated transistor toincrease the timing range by one decade.andP;  With the gate input G low(inactive), the ramp node R is held high by the bridge through the ORedtransistors with the Schmitt trigger's inverting output 0 being low.andP;  Whenthe gate signal G becomes high (active), the ramp is released and startscycling.andP;  A comparator compares the gate signal with the switching status ofthe diode bridge.andP;  When the gate signal becomes asynchronously low(inactive), the comparator prevents the downgoing ramp from beinginterrupted, which would lead to an incomplete pulse.andP;  Only if the ramp isupgoing with the gate input low will the ramp be latched at its high levelthrough the diode bridge.andP;  This stop state is very stable because of thepositive feedback loop formed by the output comparator, the OR gate, and thepositive input comparator.andP;  Fig.andP;  14 shows the principle of the synchronousgate and trigger operation.andM;The diode bridge switching signal S is connected to the output amplifier,where it is split into the complementary output signals PCLK and PCOUTB.andM;The last block is a compensation network with a second diode bridge andinverse charging currents [I.sub.POSC] and [I.sub.NEGC] connected to abuffer.andP;  This circuit is used to compensate offset errors of the switchingdiode bridge and will be explained later.andM;The hysteresis of the Schmitt trigger can be controlled in amplitude andoffset by [I.sub.HYST1] and [V.sub.HYST2], respectively.andP;  Operating ModesandM;If the timing IC is used as a period generator, the timing generator works asa VCO and is operated with variable, symmetrical charging currents[I.sub.POS] and [I.sub.NEG].andP;  This leads to an output duty cycle of 50%.andM;With [I.sub.C] = |[I.sub.NEG]| = [I.sub.POS], the period is given by:andM;[t.sub.per] [arrox.equals] [2C.sub.ramp.] [V.sub.hyst] /andM;[I.sub.C], + [4t.sub.pd]andM;where [C.sub.ramp] is the effective ramp capacitance, [V.sub.hyst] is thepeak-to-peak voltage between the Schmitt trigger's switching levels(hysteresis amplitude), [I.sub.C] is the variable charging current([I.sub.C.] = [I.sub.POS] = [I.sub.NEG]), and [t.sub.pd] is the propagationdelay from the time the Schmitt trigger reaches the switching level until thecharging current is reversed.andM;To generate steep ramps for short periods, a small [C.sub.ramp] and a large[I.sub.C] are used, and the propagation delay [t.sub.pd] becomes the dominantspeed-limiting factor.andP;  This is also true for the Schmitt trigger's internalpositive feedback loop, which becomes a negative feedback loop for shortperiods because of the phase shift resulting from the internal propagationdelay.andP;  To compensate for the propagation delay, the hysteresis amplitude[V.sub.hyst] has to be decreased.andM;However, if [V.sub.hyst] is small, it is necessary to use a very small[I.sub.C] to get the VCO oscillating with a large period.andP;  A small chargingcurrent [I.sub.] will be more noisy, and this noise will be transformed intohigh timing jitter by the flat ramp.andP;  The small hysteresis together with theflat ramp slope also leads to very slow transitions at the Schmitt trigger'soutput because of its relatively low closed-loop gain.andP;  Fig.andP;  15 shows theinfluence of the Schmitt trigger's hysteresis on the VCO's behavior for largeand small periods.andP;  To realize both high speed and low jitter, the Schmitttrigger's hysteresis has to be set according to the period.andP;  For periodssmaller than 10 ns this is done by controlling  HYSTI and VHYST2 togetherwith [I.sub.POS] and [I.sub.NEG].andP;  For periods larger than 10 ns, thepropagation delay becomes more and more negligible, and the hysteresis can bekept constant.andM;When used as a delay or width generator, the timing IC has to be operated asa one-shot for widths up to 100 ns and as a VCO for widths larger than 100ns.andP;  The width is determined by the rising ramp only.andP;  The falling rampcreates an inevitable dead time, which limits the retrigger period.andP;  Becausethis leads to a limited delay and width range for the instrument, this deadtime has to be kept as short as possible.andP;  Therefore, a variable [I.sub.pos]is used to control the width and a large, fixed [I.sub.NEG] is used tominimize the dead time.andM;The dead time is given by:andM;[t.sub.dead] = [C.sub.ramp][V.sub.hyst] / [I.sub.NEG.],andM;+ [t.sub.pd] (1 + [I.sub.POS]/[I.sub.NEG]andM;The width is defined as:andM;[t.sub.w] = [C.sub.ramp][V.sub.hyst] /[I.sub.POS],andM;+ [t.sub.pd] (1 + [I.sub.NEG]/[I.sub.POS].andM;The period in VCO mode or the retrigger time in one-shotandM;mode is:andM;[t.sub.per] = [t.sub.dead] + [t.sub.w].andM;Fig.andP;  16 shows the principle of the delay/width operation.andM;Because of the large fixed [I.sub.NEG] and the variable [I.sub.POS], thediode bridge has to operate with changing asymmetrical currents over thetiming range.andP;  This leads to a changing offset voltage across the diodebridge.andP;  Without compensation of this offset voltage, the rising ramp wouldbe clamped by the diode bridge near or even before the upper switching levelof the Schmitt trigger, resulting in increased jitter or even in malfunction.andO;The offset is compensated by offsetting the Schmitt trigger's output signalby exactly the same offset voltage, but in the opposite direction.andP;  Becausethe offset voltage is a fairly complex function of diode voltage drops atdifferent diode forward currents, the easiest way to generate thiscompensation offset voltage is to use the same diode bridge with inversecharging currents [I.sub.POSC] and [I.sub.NEGC] together with a bufferamplifier.andP;  These currents are shown in Fig.andP;  13.andM;RealizationandM;The timing IC was realized using the HP-5 bipolar process, which has an[f.sub.T] Of 5 GHz.andP;  The analog blocks are custom designs down to thecomponent level.andP;  For the logical blocks, cells from a cell library weremodified and used.andP;  The 2.7-mm-by-3.0-mm die, together with four surfacemount parts, is assembled into a custom 72-pin multi-layer PCPGA (printedcircuit pin-grid array) package.andP;  Fig.andP;  17 shows the assembled package withthe lid removed.andP;  The decision to use a custom PCPGA package was drivenmainly by the need to place the timing and bypass capacitors very close tothe die.andP;  Another reason was the possibility of designing 50fl lines for allsignal inputs and outputs and wide, low-impedance lines for ground and powersupply purposes.andP;  The die is directly mounted on a copper slug connected to athree-fin heat sink.andP;  This keeps the junction temperature below 105'C with 2watts worst-case power dissipation and under worst-case environmentalconditions.andM;Firmware ArchitectureandM;The system architecture can be described as a layered model consisting offour layers, the first three software and the last hardware.andP;  The top layercontains the human interface, which is the bridge between the outside worldand the instrument and contains the front-panel controls and the HP-IBinterface.andP;  The next layer is a real-time multitasking operating system,which performs the internal system control.andP;  The lowest software layercontains the drivers for the hardware.andM;Each parameter (period, width, etc.) of the device is assigned to a driver.andO;If a parameter has changed, the corresponding driver number will be storedinto a buffer called the driver queue.andP;  A specific task of the operatingsystem (the hardware task) takes this number and calls the correspondingdriver routine to change the hardware state.andP;  These driver routines use theadjust values stored in EEPROM on the board to calculate the correct digitalvalues to program the pulse parameters.andM;The lowest layer of the architecture is the hardware layer.andP;  A simplifiedblock diagram of the BP 8131A and HP 8130A two-channel version is shown inFig.andP;  19.andP;  It consists mainly of a timing board, one or two output boards,and the microprocessor board.andP;  The boards are connected by an internal devicebus.andP;  In the BP 8131A pulse generator there is an EEPROM on the timing board.andO;In the HP 8130A there are additional EEPROMs on the output boards for storingcalibration constants.andP;  All calibration constants are measured and calculatedby the adjust program described earlier and are stored into the EEPROMsautomatically.andP;  The firmware uses these adjust values to calculate thedigital values to program the boards.andM;HP-IB ProgrammingandM;All modes and parameters are programmable via the HPIB.andP;  The standardversions of the instruments have one channel.andP;  In the optional dual-channelversion all parameters are independently adjustable except that the periodgenerator, the trigger logic, the burst counter, and the modes are common forboth channels.andP;  The HP-IB interface conforms to three standards-two externalstandards and one internal HP standard.andP;  The first is EEEE 488.1, StandardDigital Interface for Programmable Instrumentation, the original HP-IB.andO;Because each company using this standard handled message protocol and dataformatting in a different manner and instruments were programmed by differentcommand sets for similar functions, the EEEE 488.2 standard was developed.andO;This standard describes a set of codes, data formats, message protocols, andcommon commands to use with the EEEE 488.1 standard.andP;  The instrumentinterface can be divided into several functional layers, as shown in Fig.andO;20.andP;  The lowest layer is the remote interface messages layer or the BEEE488.1 bus.andP;  This layer is the physical interface.andP;  It includes the mechanicalconnector, wiring, and electrical signals.andP;  The EEEE 488.2 standard definesthe middle two layers.andP;  These consist of the syntax and data structures layerand the common commands and queries layer.andP;  The syntax and data structureslayer defines how data is communicated between devices.andP;  For example, itdefines the use of the ASCH character set for data representation.andP;  It alsodefines data formats for binary numbers.andP;  The final layer is the devicedependent message layer, which each manufacturer defines.andP;  These messages arethe device commands for programming an instrument over the HP-IB.andM;Based on these standards  EEEE 488.1 and EEEE 488.2) Hewlett-Packard hascreated an internal standard called the Hewlett-Packard System Language, orHP-SL.andP;  This internal standard is written as a designer's guide for messagesto be included in HP programmable instrumentation.andP;  Fig.andP;  21 shows the subsetof the HP-SL that is used to program the HP 8131A and HP 8130A pulsegenerators.andM;AcknowledgmentsandM;During this project we received a great deal of good advice and assistancefrom Tom Hornack's group in BP Laboratories and from Val Peterson's group atthe MicrowaveandM;Technology Division.andM;The authors want to thank all the people involved in the design, layout,production, and test of the timing IC.andP;  Special thanks go to Bill Brown andhis team at the HP Santa Clara Technology Center for their support during thedesign phase.andP;  Particular thanks go to Jim Grace for his contributions to thedesign and to Jean DeGrenier, Kazuko Kikuta, and Jennifer de Neve for takingcare of the IC layout.andP;  Special thanks also to Mike Oshima, the responsibleproduction engineer, and to Don Riccomini, SCTC marketing, for their effortsto coordinate all the people involved in the design.andP;  Thanks also to JoeGaribaldi, test engineer, and Kevin Martin, reliability engineer.andP;  Last butnot least, particular thanks to Craig Tanner at the HP Colorado IntegratedCircuit Division for handling the packaging and assembly issues.andM;It is impossible to mention all the people who have contributed to make thisproject feasible, but we would like to take this opportunity to extend manythanks to all the people who were involved.andO;</TEXT></DOC>