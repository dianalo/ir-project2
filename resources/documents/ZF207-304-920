<?xml version='1.0' encoding='UTF-8'?>
<DOC><DOCNO>  ZF207-304-920  </DOCNO><DOCID>07 304 920.andM;</DOCID><JOURNAL>Digital Review  May 22 1989 v6 n20 p31(3)* Full Text COPYRIGHT Ziff-Davis Publishing Co. 1989.andM;</JOURNAL><TITLE>How to satisfy a voracious NFS appetite. (Network File System)(Hardware Review) (Epoch System's Epoch-1 Infinite Storage Server)(Tech Report: Connectivity) (evaluation)</TITLE><AUTHOR>Haskin, Denis W.andM;</AUTHOR><SUMMARY>The Epoch-1 Infinite Storage Server, from Epoch Systems, providesan inexhaustible supply of data storage for Unix users.andP;  Thesystem expands Sun Microsystems Inc's Network File System (NFS) byusing write-once, read-many (WORM) optical disks as backup storagefor magnetic disks.andP;  WORM storage is cheaper, can support randomaccess, is removable, faster and longer-lasting, and has highstorage density.andP;  The Epoch-1 can relieve system managers from thetime-consuming task of transferring infrequently-used files toless-expensive storage media.andP;  A minimal configuration costs$89,000.andP;  A more practical configuration is priced at $157,000.andO;Additional optical disk drives are $16,000.andM;</SUMMARY><DESCRIPT>Company:   Epoch Systems Inc. (products).andO;Product:   Epoch Systems Epoch-1 InfiniteStorage Server (Disk drive).andO;Topic:     EvaluationStorage MediaStorage Allocation.andO;Feature:   illustrationphotographgraph.andO;Caption:   Performance comparison: Epoch-1 vs. local disk drive. (graph)Read times: magnetic vs. optical media. (graph)andM;</DESCRIPT><TEXT>HOW TO SATISFY A VORACIOUS NFS APPETITEandM;PRODUCT SUMMARY PRODUCT: Epoch-1 Infinite Storage Server VENDOR: Epochsystems Inc. 313 Boston Post Road W. Marlborough, MA 01752 (508) 481-3717andM;DESCRIPTION: NFS file server with optical disk storageandM;Test configuration: System unit with 8MB of memory, one optical drive, threemagnetic drives and one 8mm cartridge tape drive; one Optical Library Unit(OLU) with one optical drive PRICE AS TESTED: $188,000andM;PROS: * As much as 28.8GB of storage is directly on-line with each OpticalLibrary Unit * As many as five OLUs can be provided, for a total of 144GB *Is completely transparent to users * Has enhanced backup and restoreutilities with command-line or forms-based user interface * Has dualprocessors, SCSI buses and Ethernet interfacesandM;CONS: * Drives are more expensive than those available from other vendorsandM;READER SERVICE: Fill In No.andP;  400 on Reader Service CardandM;The legendary&quot; bottomless&quot; cup of coffee found at all the best truck stopshas finally made it to the world of computing.andM;The Epoch-1 Infinite Storage Server from Epoch Systems can truly provide--fora hefty price--a virtually inexhaustible supply of data storage for Unixusers with insatiable appetites for disk space.andM;Ever site has them: health researchers with their imaging data, CAD/CAMengineers with complex board layouts or document systems with archivedimages.andM;Many system managers spend a good portion of their time designing, managingand performing archival operations designed to move infrequently used filesto less expensive storage media--typically magnetic tape of one format oranother--to free up precious magnetic disk space.andM;One approach already in use by many managers, especially in workstationenvironments with many single-user machines, is to utilize Sun Microsystems'Network File system (NFS) to allow machines to share disk space via anetwork.andM;Using NFS, a user on a Unix machine can access remote directories and filesas if they existed on the user's own computer.andM;The benefits offered by central file storage are many, including easieradministration, security and backup.andM;The Epoch-1 is an NFS file server, but expands the concept by usingwrite-once, read-many (WORM) optical disks as backup storage for its magneticdisks.andP;  That is, as the unit's magnetic disks fill up, files are copied tooptical disks so space can be made available again on the magnetic disks.andO;The Epoch-1's modified Unix operating system and applications softwarehandles this transparently, without any user involvement.andM;Epoch's approach is an excellent one.andP;  Supporting optical disk storage onUnix transparently is not a trivial matter and would require substantialchanges to the operating system--which would also probably not be veryportable to other hardware platforms.andM;Rather than trying to integrate the optical disk subsystem into a systemdirectly, the use of NFS allows any NFS-supporting Unix machines to make useof this, without any changes to its kernel.andM;The advantages of WORM storage are many: It's substantially cheaper thanmagnetic disk storage, it's removable, it can support random access, it has ahigh storage density for its size, and it's both faster and longer-lastingthan magnetic tape storage.andM;Each WORM cartridge (we used the Maxell OC101-2M) can hold 600MB ofdata--300MB per side--and is housed in a case similar to that housing the3-1/2-inch floppy disk, with a cover protecting the media-access opening.andM;Although a stand-alone optical disk drive can be used with the Epoch-1, withcartridges being loaded and unloaded manually, the Epoch-1 really comes intoits own when accompanied by an Optical Library Unit (OLU), an optical diskjukebox that allows 48 optical cartridges to be &quot;on-line&quot; within seconds, fora total of 28.8GB of storage in a relatively compact cabinet that occupiesonly 480 square inches of floor space (Fig.andP;  1).andM;In the event that more data storage is needed than the 28.8GB that an OLU canhave on-line, an operator can remove and insert additional opticalcartridges.andM;And for true disk hogs, as many as five OLUs can be used with a singleEpoch-1 unit, offering 144GB of on-line optical storage.andM;The Epoch-1 also addresses the issues of backing up all of this data, anon-trivial matter when the data to be archived encompasses tens ofgigabytes.andM;Traditional backup systems on Unix have required that the system be isolatedfrom users for a comprehensive backup, a luxury that often cannot be affordedin a server environment.andM;The Epoch-1 provides a forms-based or command-line backup system that allowsbackup and restore operations on files to be highly automated, adds some filesystem extensions to permit comprehensive backup without taking the serveroff line, and has a library function so that backed-up files can be moreeasily located and restored.andM;Epoch's backup and restore utilities bear strong similarities in operationand concept to the traditional Unix tools, so experienced system managersshould feel comfortable with these programs.andM;Eight-millimeter helical-scan videotape is used as the backup medium on theEpoch-1.andP;  Each tape--about the size of an audio-cassette--can hold 2.3GB ofdata, and multiple backups can be made on a single cassette.andM;The only drawback that we encountered with the Epoch-1 was its inordinatelyhefty price tage.andP;  A very minimal configuration, with a single magnetic disk,a single optical disk, an 8mm tape drive and no OLU, is priced at $89,000.andO;By comparison, for that price users could get a Mips M/120-5 with a fullyloaded SCSI bus--seven drives totaling about 5.2GB of storage.andM;Of course, the Mips M/120-5 lacks the Epoch-1's backup and restorefacilities, its separate processors for applications and I/O, and its dualSCSI buses and dual Ethernet interfaces.andM;A more practical Epoch-1 configuration, with an OLI and a single optical diskdrive, is $157,000.andP;  Additional optical disk drives are $16,000 each, and760MB magnetic disks are $15,000 each.andM;Astute follows of storage pricing will note that Epoch Systems' markup onoptical and magnetic drives is substantial, compared to what one might getdirectly from a distributor.andM;To an NFS client, or even to a local user, the Epoch-1 seems no differentfrom any other 4.3BSD Unix system, with the exception that no programdevelopment utilities or compilers are available, including such niceties asthe awk and bc utilities.andM;All standard Unix file-related calls behave on the Epoch-1 just as they wouldon any other Unix system, and remote procedure calls by NFS clients alsobehave exactly as expected.andM;Behind the scenes, however, things are quite different.andP;  In addition to theUnix disk block map associated with each file, each file on the Epoch-1 alsohas an optical block map associated with it.andM;The data structures associated with each file have flags to indicate whethera given block of a file is located on magnetic or optical media, and--if onoptical media--which volume and its location on that volume.andM;When a local or remote user performs an operation that reads a file, theEpoch-1's file system locates the file transparently and returns the properdata.andP;  The user never knows, or needs to know, where it was stored.andM;Of course, because this is all transparent, one might wonder how the filesget copied to optical storage in the first place.andM;Epoch Systems' Infinite Storage Manager (ISM)--which consists of a collectionof Unix processes--copies files from the magnetic to the optical disks asnecessary to ensure that the magnetic disk never becomes completely full.andM;This migration from magnetic to optical can happen three ways: dynamically,periodically or explicitly.andM;Dynamic file moves are done to keep the magnetic disk from filling up.andP;  Foreach Unix file system, the Unix system manager specifies to the ISM the upperand lower limits for how much disk space can be used in that file system.andO;whenever magnetic disk usage reaches that upper limit, files are flushed tooptical disk until that lower limit is reached again.andM;Periodic file moves occur when the ISM examines file system usage at auser-specified interval and--even if usage is below the upper limit--movesfiles from magnetic to optical disk to bring the file system usage down tothe lower limit.andM;Explicit file moves are done whenever the user directs (via the ep_stagecommand) that a file be moved to optical disk.andM;Directory information for all files, regardless of their physical location,is kept on the magnetic disk so that it is immediately accessible.andM;Also, for periodic or explicit file moves, those files are in fact copiedthere rather than moved from the magnetic disk; the magnetic copy is leftbehined to avoid having to read it back from the optical disk if the file isneeded in the near future.andM;If the magnetic disk then needs to be flushed because the upper limit hasbeen reached, all the ISM has to do is mark those files as deleted, becausethey will have already been copied to optical disk.andM;The system manager--and individual users, to some extent-can control thealgorithm by which the ISM decides which files it moves and when.andP;  Thealgorithm considers the number of days since a file was last accessed, thefile's size and its &quot;magnetic residence priority&quot; to determine if it shouldbe moved.andM;Users can reduce a file's magnetic residence priority so it will be archivedsooner, but they cannot raise its priority.andP;  The superuser can, of course,adjust priority in either direction.andM;A file can be &quot;locked down&quot; onto magnetic disk by a suitably privileged user,thereby preventing it from ever being flushed ot an optical disk.andM;These parameters can be applied to file systems and directories as well as toindividual files.andM;When a file on an optical disk is read, the data is sent straight to the NFSbuffer for transmission to the remote client, but the file is also copiedasynchronously to magnetic disk so that, if needed again, it will be moreimmediately accessible.andM;To compensate for the optical drives' slower transfer rate, the Epoch-1 uses64KB of read-ahead and double-buffering to ensure that it can keep up withfile requests coming from the remote client.andM;DUAL PROCESSORSandM;The Epoch-1 consists of a system unit and one or more optional OLUs.andP;  Thesystem unit, a small 15-by-29-by-24-inch enclosure, contains the processorboard, system disk drive, backup tape drive and power supply.andP;  It can alohave as many as three more magnetic disk drives for additional storage space.andO;It can also--although typically would not--have a standalone optical diskdrive within the system unti itself.andM;The system unit can have either one or two expansion cabinets, of a similarsize, holding additional SCSI devices.andP;  Each expansion cabinet can hold four5-1/4-inch disk drives.andM;Although any 5-1/4-inch SCSI disk drive can be used, epoch uses Maxtor 8760Sdrives, which offer 760MB (unformatted) of storage.andM;The Epoch-1 sports two processors, both Motorola 68020 CPUs running at 25MHz.andM;The first processor, called the Applications Processor (AP), runs a somewhatmodified version of 4.3BSD Unix and is primarily concerned with handling theNFS daemons (detached processes that take care of NFS requests from otherUnix hosts) as well as other Unix housekeeping chores.andM;It supports the full complement of TCP/IP networking utilities, and Epochusers can have use of the telnet, ftp, rlogin, rsh and rcp utilities fortransferring files between the Epoch and other hosts that supports TCP/IP orfor logging in to remote hosts.andM;In addition, a few new commands and utilities have been added for themanagement of the Epoch-1's files and disks.andM;The other processor--known as the Front-End Processor (FEP)--runs ReadySystems' VRTX real-time multitasking kernel and handles all I/O operationsfor the SCSI controllers, two Ethernet interfaces, modem port and systemconsole port.andM;The two processors use shared memory in order to pass data between eachother.andM;The system unit has at least 8MB of memory, of which 4MB is devoted to theUnix operating system and 4MB is used for file system buffers.andP;  Unix tends todo much more buffering of disk I/O than is common under VMS and typicallydevotes at least 10 percent of main memory for this operation.andM;Main memory can be expanded to 24MB, and all except the first 4MB would beused for file system buffering.andM;The Epoch-1 supports two SCSI controllers for a total of 14 SCSI devices.andP;  Italso has a VME bus and a six-slot VME card cage, although at present theseare not used and are not supported by Epoch for any devices.andM;The Optical Library Unit contains one to four optical disk drives, a roboticmechanism to transfer cartridges between drives and storage slots and 48storage slots for the cartridges.andM;Epoch-1's optical disk drives are Hitachi OD101-1 SCSI units, and the entireOLU assembly is manufactured by Hitachi.andP;  It is a closed system: There is noregular user access to the optical drive or storage slots.andP;  Cartridges areinserted through a slot near the top of the unit (referred to as the &quot;inlet&quot;)and are transported by the robot arm to the optical drive and the storageslots.andM;Aside from its power switch, the OLU has just one operator control: thebutton that is pressed to open the inlet and allow a cartridge to beintroduced into the machine.andP;  the OLU control panel includes status lights toindicate when a cartridge can be inserted, when one should be removed andwhether there is a fault.andM;A two-digit diagnostic indicator displays a message code in the event of amalfunction.andM;We found the Epoch-1 quite easy to use, both from a system managementpespective and a user's perspective.andP;  The device arrived with the operatingsystem already installed, including the Monitor software used fordiagnostics, management and configuration.andP;  Most of the Monitor commands arenot needed for general use.andM;To start Unix on the Epoch-1, the user enters the command boot to theMonitor, which begins a regular boot-up sequence.andP;  The system will also bootup automatically when it is first powered on.andM;Next the Epoch-1 runs system diagnostics, and, if these are successful,system software is loaded: The file /vmunix is loaded onto the AP, the file/fep is loaded onto the FEP, and control is passed to the latter, whichbegins all the I/O services and then passes control to the AP.andM;Once Unix has completed its start-up sequence, users can log in to the Epocheither at the system console or from a remote host with telnet or rlogin.andO;When we did so, we found ourselves in a typical Unix C shell environment.andM;We reinitialized one of the magnetic disks supplied with the unit and built afile system on it with the newfs command.andP;  We mounted it at the directorymount point /data2.andM;Next we populated the OLU with optical cartridges, which is done by pressingthe switch to open the inlet and inserting each cartridge in turn.andP;  When theOLU detects the presence of a cartridge, the transport mechanism moves up,loads the cartridge, then moves it down to the optical disk drive, where itis examined for a label.andM;All optical cartridges must first be initialized and given a volume label;the Infinite Storage Manager uses this label when moving files from magneticto optical disk.andP;  The label includes its trail name, volume ID and a sequencenumber, as well as other information.andM;Optical disk cartridges--and backup 8mm tape cartridges--are organized into&quot;trails&quot;.andP;  Each file system on the Epoch-1 is associated with a single trail,although a trail can encompass several file systems.andM;The Mount Queue Manager (mqm) is a screen-based program that allows thesystem manager or operator to initialize and catalog new volumes, view thestatus of optical and tape units and volumes within the system and manage I/Orequests for volumes that are not mounted or not resident in the OLU (Fig.andO;2).andM;We initialized cartridges in our test unit by selecting the desired cartridgefrom the mqm display and choosing the Format option.andM;Once blank cartridges are labeled, and thus known to ISM, the newly createdfile system is then associated with a trail with the conf_ism_filesyscommand.andP;  For example, the command: conf_ism_filesys /data2 d d d d d d&quot;Trail 1&quot; associates the file system /data2 to the trail named &quot;Trail 1&quot; anduses defaults for all of the trail parameters, such as lower and upper limitsfor file system disk usage.andM;By default, the lower limit is 85 percent of the file system's size, and theupper limit is 91 percent.andM;The file system is associated with that trail from that point on, and the ISMwill move files from magnetic to optical disk as necessary to maintain theuser-specified amount of free space on the magnetic disk portion of the filesystem.andM;Once we had initialized the optical cartridges in our test system, wemodified the /etc/exports file to specify that other hosts in the networkcould access the /data2 file system via NFS.andM;On our Mips M/120-5 machine we created a mount point at the directory/epoch_data and gave the command mount epoch:/data2 /epoch_data, which thenmade all directories and files at the /data2 directory on epoch appear at/epoch_data on the Mips.andM;The Epoch-1 includes other utilities to assist in the management of files.andM;As mentioned previously, the ep_stage command moves a file explicitly from amagnetic to optical disk.andP;  (The command is called ep_stage because Epochrefers to the process of moving a file to optical disk as &quot;staging.&quot;)andM;The first time ep_stage is invoked on a file, the initial 8KB of the file isleft on magnetic disk so it will be immediately available for a read request.andO;The second time ep_stage is invoked, the entire file is moved to opticaldisk.andM;Command options in ep_stage allow a file to be copied to optical disk but notimmediately deleted from magnetic disk and to be marked for movement tooptical disk at the next periodic ISM pass.andM;The command ep_set_fctl is used to modify a file or directory's attributes,such as its magnetic residence priority and whether the file or directoryshould be &quot;locked&quot; onto magnetic disk.andM;The ep_get_fctl command displays attributes of files, including how manykilobytes of the file are on magnetic disk and how many are on optical, thevolume name where the file has been copied and other file attributes.andM;The dbreport command produces a report of the status of all optical andbackup volumes known to the ISM, their status and usage and their backupstatus.andM;Source code is provided for the ep_stage, ep_set_fctl and ep_get_fctlprograms so that they can be transported to a client Unix node and compiledthere.andP;  They do require a BSD-compliant system, however, and we found we werenot able to compile them on the Mips M/120-5, which is based on System V Unixwith some BSD extensions.andM;The Epoch-1 is accompanied by a healthy amount of rather typically Unix styledocumentation.andP;  It has a system administrator's guide that describes thesystem and the various hardware and software components and a systemadministrator's reference manual in the usual man format.andM;The system administrator's guide contained an almost overwhelming wealth ofinformation and was a little obtuse in parts.andM;A BRAVE NEW BACKUPandM;Having such a large amount of data in one place naturally places an evengreater burden on backup requirements.andP;  The Epoch-1 addresses this elegantlywith modifications to the file system that permit more comprehensive backups,as well as with new utilities for performing backup and restore operations.andM;The primary difference between Epoch's backup and restore utilities and theusual Unix dump utility is that Epoch-1 uses the usual file system methods ofreading files, while dump opens the &quot;raw&quot; disk device and does not pay muchattention to file system organization.andM;Because Epoch's method uses the file system, it offers more control overwhich files are to be backed up.andP;  It does bear strong similarity to dump,however, and seasoned Unix system managers should be quite comfortable withbackup.andM;Both the backup and the restore utilities have command-line modes and formsmodes.andP;  The forms mode uses the Ingres forms manager to construct amenu-based environment in which backup and restore operations can beinitiated and controlled (Fig.andP;  3).andM;We found the Epoch-1's file backup and restore procedures to be comprehensiveand quite easy to use.andM;The Epoch-1 yielded very good NFS performance.andP;  Because this is the first NFSserver that DR Labs has tested, we did not have any other servers to compareit with.andP;  Instead, we examined the penalty paid for remote file operationsvs.andP;  local file operations, and we looked at the overhead of accessing a filethat had been moved from magnetic to optical disk.andM;We used a pair of relatively simple C language programs to create files.andP;  Oneprogram accepts a name for the file to be created and its size in kilobytes.andO;It then writes the file using 1KB buffers.andP;  The other program reads a namedfile with 1KB reads and then simply discards the data.andP;  Both programs reporton how much time is required to either read or write a file.andM;As we expected, there is a penalty to be paid for using NFS, especially whenwriting files.andP;  It took from five to 10 times as long to write a file to theNFS server as it did to write the file locally (Fig.andP;  4).andP;  By contrast,reading a file from the server incurred only a29 percent to 37 percent lossin performance as compared with a local read.andM;Once our files had been created, we forced them to the Epoch-1's optical diskwith ep_stage command and then red them again.andM;If the cartridge containing the file was already in optical drive, itrequired 2.5 times as long to read it from the optical disk as it did to readthe file from the magnetic disk.andP;  When the cartridge was not in the drive butwas in one of the 48 storage slots, the Epoch-1 took an average of anadditional 13.7 seconds to fetch the cartridge and place it in the drive(Fig.andP;  5).andM;Epoch Systems has taken a novel approach to the problem of integratingoptical disks into a computing environment, and it has been delivered anexcellent implementation.andM;By using the services of NFS, the storage capabilities of optical disks areoffered to every other computer that supports NFS--and these days thatincludes almost every Unix system and large number of other operating systemsas well.andM;The high degree of automation in the Epoch-1's operation, especially inregard to backup and restore, is a big boon to system managers who mightordinarily resist accepting responsibility for tens of gigabytes of data.andM;And the sheer luxury of having almost 30GB of disk storage less than 16seconds away is more than most users--no matter how data-hungry--can evendream of.andO;</TEXT></DOC>