<?xml version='1.0' encoding='UTF-8'?>
<DOC><DOCNO>  ZF108-168-164  </DOCNO><DOCID>08 168 164.andM;</DOCID><JOURNAL>Systems Integration  Feb 1990 v23 n2 p25(3)* Full Text COPYRIGHT Cahners Publishing Co. 1990.andM;</JOURNAL><TITLE>Write non-standard datatypes, without the standard agony.andO;(user-defined DBMS datatypes) (DBMS/Report) (column)</TITLE><AUTHOR>Carnahan, Ron.andM;</AUTHOR><SUMMARY>Database management system publishers now support user-defined,complex datatypes for such operations as describing locations inlatitudinal and longitudinal values.andP;  This facilitatesapplications programming when data does not fit comfortably in thetraditional integer, character string, floating point number,calendar date and amount datatypes.andP;  Coding for such operations asrecording data in feet and inches is complicated and spreadthroughout applications.andP;  The ability to define datatypes and theoperations performed on them will benefit application developersin nearly every industry.andP;  Version 6.3 of the Ingres DBMS has anobject-management subsystem that can be used to define datatypesand operations.andP;  Binary, or basic, large object (BLOB) datatypesmake it easier to support graphical, binary and textualnon-standard datatypes.andP;  Their use is described.andM;</SUMMARY><DESCRIPT>Topic:     Applications ProgrammingData TypesObject-Oriented Data BasesData Base DesignNew TechniqueSoftware PublishersEnhancementsData base management systems.andM;</DESCRIPT><TEXT>Write non-standard datatypes, without the standard agonyandM;New database management systems are coming out that make it easier for you,as an application developer, to swing your way around the globe.andM;That is, DBMS publishers are supporting user-defined, complex datatypes that,among other things, describe locations in latitudinal and longitudinalvalues.andP;  From these, you can calculate great-circle measurements betweendistant points.andM;Such support is important where user data doesn't fit neatly into thetraditional datatypes like integers, character strings, floating-pointnumbers, calendar dates and amounts.andP;  Inadequate support for graphical imagesand free-form text, for example, makes applications involving such fields sodifficult that they are still largely ignored by developers.andP;  (Some relief ispromised in the support of BLOB--binary, or basic, large object--datatypes.)andM;But the problem goes deeper.andP;  Example: In wholesaling, inventory is oftenstored, relieved and valued on the basis of length--usually feet and inches.andO;With traditional DBMS tools, the developer has two options:andM;* Maintain separate feet and inches fields for each record in the itemstable, performing complex data manipulation on both fields whenevercalculating a length;andM;* Store a length value in decimal feet, performing complicated displayroutines whenever length appears on the screen or on printed reports.andM;Either way, coding is complicated and spread throughout the application.andO;And, perhaps worse, ad hoc SQL queries present an undesirable interface.andM;For another example, consider the mental gymnastics of computing bondinterest in the financial world where the year has 360 days, but Feb. 14still falls on Feb. 14.andM;Application developers in almost every industry can benefit from the abilityto define their own custom datatypes and the operations to be performed onthem.andM;The ability to define a datatype and its legal operations reduces the amountof code you need to write for an application: You don't have to sprinklespecial code throughout a software package to translate fractional feet tofeet and inches for display purposes; you don't have to create your own datestorage and display functions for every interest computation.andP;  And, incharting the great-circle route, you need define distance calculation forlatitude and longitude only once per application.andM;Once you build support for these custom datatypes into the DBMS engineitself, the DBMS is able to perform functions like sorting, storing,defaultvalue assignment and domain checking.andP;  And, once the DBMS understandsthe new datatype (via 3GL procedures defined by the user or the DBMSpublisher), programmers no longer have to perform translation on the data asit's received from or delivered to the user.andM;Another benefit: By defining operations, or functions, on a user-defineddatatype, code doesn't have to be included in the application to handlecomparison and manipulation.andP;  These procedures need only be defined once forthe datatype; they can then be used throughout the application.andM;User-defined datatypes at workandM;Among the major publishers, Ingres is a leader in user-defined datatypesupport.andP;  In version 6.3 of its Ingres product, the company has added anobject-management subsystem by which application developers define their owndatatypes and inform the DBMS of the valid operations through 3GL procedureswritten once and embedded in the server at runtime.andM;The key, according to Ed Horst, director of product management, was a libraryof datatype comparison routines, &quot;Abstract Data Type Facility.&quot;andP;  Ingrespermits application developers to extend this library with their ownroutines.andP;  The developer can define new operations/functions for eachuser-defined datatype and stipulate how existing operations/functions (likeaddition, subtraction, multiplication and division) work with new datatypes.andM;A critical moveandM;But isolating the datatype-specific code in a library was critical to makinguser-defined datatype support practical.andM;Says Horst, &quot;None of the code inside the server--the optimizer, the parser,the scheduler and so on--is allowed to understand datatypes; all code mustcall library routines to do the comparison work.&quot;andP;  By forcing all programs tocall the datatype library when running, any new or changed datatype functionsand operations need be defined in only one module to work throughout thesystem.andP;  As a result, Horst claims, developers can add new datatypes toIngres in a matter of a few weeks, just by adding datatypes to the libraryand testing the operations/functions defined on them.andM;The object-management facility will doubtless prove in valuable fordevelopers working in most specialized industries.andP;  And since it is noweasier to add new datatypes, Ingres will likely provide support forspecialized datatypes that were too expensive under its earlier architecture.andO;The company has begun talking with a number of its VARs about creatingpackages of industry-specific datatypes for resale to other developers.andM;BLOBs simplify support for graphical, binary and textual non-standarddatatypes.andP;  David Root, Interbase vice president of operations, describingthe significance of BLOB datatypes says, &quot;The BLOB was meant to address theproblem of the user having something of indeterminate size where the DBMSdoesn't know what's in it.andP;  The user wants to put it into the database and beable to retrieve it.andP;  And the BLOB has to be completely integrated into thedatabase; the DBMS must handle transaction control and concurrency control,and the BLOB data must be backed up when the database is backed up.&quot;andM;To support user-defined operations on BLOBs, Interbase has introduced theconcept of BLOB filters into version 3 of its product.andP;  Using BLOB filtersrequires the definition of a BLOB subtype.andP;  Any BLOBs that have subtypes mayalso have filters.andP;  The filter defines what it means to retrieve a BLOB asone subtype, when it's actually stored as another, and--the reverse--thefilter explains how to put the BLOB into the database as one subtype but haveit stored in the database as another subtype.andM;The developer writes the filter with a 3GL.andP;  Then, when the user accesses theBLOB (through Interbase's &quot;QLI&quot; 4GL, a 3GL application, or throughInterbase's &quot;GDML&quot; compliment to SQL), the DBMS first checks to see if theBLOB is of subtype &quot;text.&quot;andP;  If it's not, the database looks for a filterassociated with the BLOB.andP;  It applies the filter in order to print or displaythe BLOB in the way defined by the 3GL code.andM;Root explains that you can use the filters for other applications as well:translate data across hardware platforms as it moves over a network, reducedisk storage requirements and compress data.andM;Implementing BLOBsandM;Adding BLOB support to a traditional DBMS product is no small effort for thepublisher.andP;  In general, adding a new datatype to a DBMS (or changing thefunctionality of an existing datatye) can be one of the most difficultfeature enhancements a DBMS publisher can make, one that can require manyman-months of modification and testing spread across every aspect of the DBMSproduct.andM;Unify, which recently ported its Accell development toolset to Oracle's DBMS,found that the challenge of adding support for Oracle's datetime interval&quot;involved the single largest volume of changes to modules we had to make,&quot; inthe words of Unify's David Harrington, director of Accell development.andM;Oracle's vice president for both UNIX and IBM Mainframe products, JerryBaker, agrees, &quot;Adding a new datatype to the system is nontrivial.andP;  If youconsider all the different levels of the system, from the highest levelinterfaces all the way down to storing the actual fields themselves on thedisk, nearly every level of the database is affected when you change thenature of a datatype or you add a new datatype.andP;  It's very difficult tolocalize the concept of a datatype within one particular area of thedatabase; it's not like query-optimization or buffer-management changes.andM;The BLOB was, however, an especially difficult addition.andP;  Unlike moretraditional datatypes, the BLOB's size is typically limited only by hardwareconstraints (2G bytes on most UNIX platforms).andP;  With objects that size, itshould come as no surprise that traditional DBMS storage schemes are notappropriate.andP;  Instead, in most commercial database products, the value storedfor the BLOB field (in the DBMS record with the other fields of the record)is merely a pointer to the BLOB elsewhere on the disk, either in a file byitself or, as Informix stores it, in a &quot;blobspace&quot;--a set of disk pagesreserved specifically for BLOBs.andM;An Informix spokesman contends, &quot;That keeps the BLOB from impactingperformance in other parts of the database.andP;  You don't want to bring thesethings into the shared-memory buffer pool, because you might have to kick outmore than half the pages in your buffer pool to bring one BLOB into it.&quot;andP;  Byusing a blobspace and pointers.andP;  Informix retains the benefits of caching.andM;BLOB storage strategy was also a major concern when Unify introduced BLOBsupport in version 4.0 of its DBMS.andP;  Unify's vice president, Bill Osberg,describes the decision, &quot;We had two choices: store the BLOB using lots ofsmall blocks that are linked together (much like the UNIX operating systemdoes with file storage) or lay out chunks of disk for each different fieldsize.andP;  Since our design different was to let users store large volumes ofdata very quickly, we decided to establish a large number of segments ofdifferent sizes, increasing by powers of 2 from 16 bytes to 32M bytes.andP;  Thenwe added one more segment size to store anything larger than 32M bytes.&quot;andM;Osberg claims the storage method works especially well with telemetryapplications where users get huge volumes of data at a very high rate andwant to lay it out to disk as rapidly as possible.andP;  Says Osbert, &quot;In testing,we can drive the disk at close to the rate of sequential writes to the disk.&quot;andM;BLOB applicationsandM;BLOBs can be used to store any type of data.andP;  In computer-aided design anddrafting applications, BLOBs can store component descriptions.andP;  Before BLOBsupport, CADD product publishers were limited to storing a filename in thedatabase.andP;  CADD software built around a DBMS would have to open thisadditional file in order to access the component description.andP;  With BLOBsupport, fewer files need to be opened and closed.andP;  As an additional benefit,the CADD application need not concern itself with transaction and concurrencycontrol.andM;Any application that must manage a collection of graphic images (like CADD),digitized sound segments (like voice mail) or software object code (like asoftware development toolset) might benefit from BLOB support.andM;The most common use for BLOBs, however, is text storage and retrieval.andO;Informix's spokesman says text applications outnumber graphics applicationspartly because most commercial installations use character terminals.andM;Text is so significant that he expects, &quot;The next release of our Informixonline product will have full text-retrieval built into the SQL product.&quot;andM;But, as Oracle's Baker maintains, text-retrieval itself is no simpleundertaking.andP;  Says Baker, &quot;One problem DBMS vendors might face with text isindexing.andP;  Indexes for DBMS only scan forward.andP;  With text, the ability tobrowse is important.andP;  You will have to be able to go backward and forward,using the index.&quot;andP;  Such complicated design issues make it likely thattext-retrieval functions will be added to existing products under technologylicensing agreements with purveyors of text-retrieval software products.andM;Ron Carnahan is a senior management consultant with JYACC Inc., a New Yorkbased company providing management and technical consulting services as wellas a line of application development tools.andO;</TEXT></DOC>