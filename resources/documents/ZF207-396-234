<?xml version='1.0' encoding='UTF-8'?>
<DOC><DOCNO>  ZF207-396-234  </DOCNO><DOCID>07 396 234.andM;</DOCID><JOURNAL>Digital Review  June 26 1989 v6 n25 p17(2)* Full Text COPYRIGHT Ziff-Davis Publishing Co. 1989.andM;</JOURNAL><TITLE>Disasters don't always happen to someone else. (discovering systemproblems on a UNIX system) (column)</TITLE><AUTHOR>Reisler, Kurt.andM;</AUTHOR><SUMMARY>A 68010-based ISI Optimum 14/10 system running Unix, after sixyears of trouble free operation, begins to crash repeatedly.andP;  Thetrouble starts when an increase in soft and hard disk errors andin line noise in the modem pool is noticed.andP;  Next, the systemcrashes and is unable to reboot itself.andP;  The Unix disk integrityutility, fsck, finds a many disk errors and corruption on the rootpartition.andP;  Cleaning up the disk and replacing corrupted filesfrom a backup helps only temporarily.andP;  The next time the systemcrashes, stability can not be restored.andP;  A complete write/readtest over the disk narrows the source of the problem to a boardthat needs replacing.andP;  Further problems will be recounted in thenext issue.andM;</SUMMARY><DESCRIPT>Topic:     Diagnostic AssessmentDisaster RecoveryMicrocomputersSystem CrashUNIX-Like Operating Systems.andM;</DESCRIPT><TEXT>Disasters Don't Always Happen To Someone ElseandM;As a system analyst, one of my jobs is advising people about disasterprevention and recovery.andP;  I have given many customers information onenvironmental monitoring, fire and flood prevention, media backups andoff-site storage.andP;  Perhaps that's why it always seemed that any potentialdisaster would strike only a customer's computer--certainly not the littleUnix system on which I'm writing this column!andM;The system in question is a 68010-based ISI Optimum 14/10 that lives in anair-conditioned computer room, out of sight (and knowledge) of most of thestaff.andP;  Its chief function is to act as a mail and news gateway for my Unixsystems group and for other sites that receive news and mail feeds providedby my organization.andP;  I also use it to try out the software from Usenet.andM;This system gets backed up on a regular basis (about once a month, give ortake a month).andP;  Before the catastrophe I'll tell you about in this column andthe next, it had been running for the last six years without a hitch.andM;Computer disasters come in two flavors: sudden and creeping.andP;  The suddendisaster is brought on by fire, flood, electrical problems or pestilence(also known as the computer hacker).andP;  Such problems are fairly obvious andeasily remedied: After a consultation with your insurance company and yourhardware and software vendors (plus a liberal application of restoredbackups), you're usually up and running again quickly.andP;  What hit my system,though, was a creeping disaster, which is much more subtle and, when dealingwith obsolete equipment, more serious.andM;Things started simply enough.andP;  The system began to suffer an inreasing numberof soft and hard disk errors, and there was an increase in line noise in themodern pool.andP;  Usually, those problems occured late at night.andM;When I went to the office to check the system on weekends, it seemed to berunning fine.andP;  Nonetheless, the disk and modem problems got worse, and thesystem started crashing in the late evening for no apparent reason.andO;Diagnostics were no help.andM;One Friday night, I attempted to call in to the system to check my mail.andP;  Noresponse from any of the modems.andP;  It looked as if the system had crashed andwasn't able to reboot automatically.andP;  Not a good sign!andM;I went to the office the day after, naively expecting to reboot and be homein an hour.andP;  But when I attempted to boot the system, I noted that fsck, theUnix disk integrity utility, had found numerous disk errors.andP;  Worse, therewas a lot of corruption on the root partition--something every Unix systemadministrator dreads.andM;I got a list of the bad i-nodes, used ncheck to determine which files wouldhave to be replaced from the backup performed the night before and proceededto clean up the disk.andP;  On reboot, however, the disk was still corrupt.andP;  So, Ikept cleaning the disk, removing and replacing corrupted files from thebackup tape, until I had a stable system once more.andP;  (This took many attemptsover a five-hour period.andP;  So much for my Saturday.)andM;Once the system was again intact, I ran non-destructive diagnostics on thedrive; it passed without problems.andP;  When I got home, I called in.andP;  Thesystem, which had been running fine when I left, was down again.andP;  I decidedto leave it that way until Monday.andM;The work week didn't begin well.andP;  I found the system in essentially the samestate as on Saturday, with a corrupted root partition and many of the samei-nodes needing to be removed and restored.andP;  But this time, I couldn't returnthe system to stability.andP;  Every time I restored a file, some other i-nodewent south.andM;I decided to run an extended non-destructive disk test overnight.andP;  I also gotin touch with our field-service support people and scheduled a visit by anengineer.andM;The next morning, it was obvious that the system had crashed during thediagnostics and then attempted to reboot.andP;  But no additional disk errors hadbeen flagged.andP;  I determined that it was time for destructive disk testing.andO;AS I had a full backup from the night before the crash, I did a completewrite/read test over the disk.andM;After the dianostics had completed more than 200 passes over 24 hours, therewere no additional errors.andP;  But when I attempted to reboot from tape, thesystem complained that no disk controller was present!andP;  apparently, theovernight run of write/read passes had pushed a marginal controller over thebrink.andP;  At least I'd isolated the problem.andP;  With an easy board replacement,the system would be back up in a day or so.andM;I thought my system troubles were over.andP;  As you'll find out next time, I waswrong.andO;</TEXT></DOC>