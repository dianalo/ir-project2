<?xml version='1.0' encoding='UTF-8'?>
<DOC><DOCNO> ZF32-005-084 </DOCNO><DOCID>11 481 653</DOCID><JOURNAL>MacUser  Dec 1991 v7 n12 p241(5)* Full Text COPYRIGHT Ziff-Davis Publishing Co. 1991.andM;</JOURNAL><TITLE>Balloon help takes off. (Power Programming)</TITLE><AUTHOR>Matthies, Kurt W. G.andM;</AUTHOR><SUMMARY>Guidelines for using the System 7.0 Help Manager to add balloonsto System 7-compatible applications are presented.andP;  Many of thefinder's menu items have built-in balloons, as do most new orupgraded applications.andP;  Balloons appear when the user moves thecursor within a predefined 'hot' screen rectangle.andP;  The pointer,or 'tip,' can appear near any of the balloon's four corners; itslocation is specified by the programmer.andP;  ResEdit or anotherresource editor can be used to add balloons to menus via the HMNUresource type; this works only for applications that use thestandard menu-definition procedure to draw menus.andP;  Adding balloonsto dialog boxes involves creating a HLDG and corresponding HWINresource.andP;  Programmers can use the DITL resource to add balloonsto arbitrary window rectangles.andP;  A utility called BalloonWriterlets both developers and users create Balloon Help text forapplications.andM;</SUMMARY><DESCRIPT>Company:   Apple Computer Inc. (Products).andO;Ticker:    AAPL.andO;Product:   System 7.0 (Operating system) (Programming)BalloonWriter (Program development software) (Usage).andO;Topic:     Operating systemsSystems ProgrammingDocumentationProgram Development TechniquesTutorial.andM;</DESCRIPT><TEXT>System 7's Help Manager is one of the easiest ways for developers to addvalue to their applications as well as for users to customize their favoriteprograms.andP;  Its most noticeable feature is Balloon Help, named after thecomic-book-style balloons that display information.andP;  In case you stillhaven't seen them, these balloons provide context-sensitive help for anapplication, popping up as you position the cursor over objects on thescreen.andP;  If you know some of the technical details, you can add balloons toany System 7-compatible application, using either a resource editor such asResEdit or, more easily, a new utility from Apple called Balloon Writer.andO;(Needless to say, because Balloon Help is a System 7-exclusive feature, theballoons appear only when you're running the new system software.)andM;Balloon BasicsandM;To turn on Balloon Help, select Show Balloons from System 7's Help menu,which appears in the upper right corner of the menu bar.andP;  Apple has includedhundreds of help balloons -- describing such things as the action of each ofthe Finder's menu items, dialog boxes, and icons -- with the System 7 Finder.andO;Other parts of the system software, including the Open and Save As dialogboxes, also have built-in balloons, and most new or upgraded applicationssupport Balloon Help.andP;  Not only do balloons add value to an application butthey're also relatively easy to incorporate.andP;  In most cases, adding BalloonHelp messages require no additional coding, so many developers use underpaidwriters (as opposed to overpaid programmers) to add Balloon Help tocommercial applications.andM;Here's how Balloon Help works: As you move the cursor within a predefinedscreen rectangle, called the hot rectangle, a balloon containing a messageabout that area appears.andP;  When the cursor leaves the hot rectangle, theballoon disappears.andP;  If you have a sharp eye, you'll notice that balloonsdon't appear immediately but only after the cursor has stopped for a certainlength of time.andP;  This delay keeps balloons from popping up all over the placeas you move the cursor across the screen.andP;  Apple says this delay is aboutone-tenth of a second; unfortunately, this value is built in to the systemsoftware, so neither programmers nor users can change it.andM;A balloon appears as a rounded rectangle with a pointer.andP;  This pointer,called the tip, points to the item of interest and can appear near any of theballoon's four corners.andP;  The programmer specifies where the tip should be,and the Help Manager is responsible for selecting one of the eight possibleballoon positions so the help message is clearly visible on-screen.andM;Although balloons can display either text or graphics, text balloons are muchmore common and are easier to implement.andP;  Apple has definite ideas about howhelp text should read, so I though I'd pass those ideas on to you.andP;  First,because a balloon shouldn't be too large -- especially if it's to appear on aMac Classic screen -- use clear, concise phrases.andP;  Second, use activesentence constructions, stating the goal first.andP;  For example, the balloon forthe Cancel button of the standard File dialog box reads, &quot;To close the dialogbox without opening the document, click here,&quot; not &quot;Click here to close thedialog box without opening the document.&quot;andP;  Finally, Apple advises you toavoid technical jargon, suggesting instead that you follow the style andusage standardized by -- who else -- Apple.andP;  If you're interested in theofficial Apple writing style, read the Apple Publications Style Guide,available for $30 from APDA (Apple Programmer's and Developer's Association).andO;You can contact APDA at (408) 562-3910.andM;A note for application developers about writing help strings: The Macintoshhas earned a reputation around the world as a computer whose software can beeasily modified to fit different languages (a process known as localization).andO;Help strings should therefore be kept in resources, so that localizers inother countries can access and translate them.andP;  The simplest form of textresource is the string list resource, or STR#.andP;  By definition, these stringsare limited to 255 characters -- extra incentive for you to write clear andconcise help messages.andM;Building BalloonsandM;The Help Manager is structured so that you can associate balloons with threekinds of objects in an application: menus and menu items, dialog-box items,and arbitrary window rectangles.andP;  Accordingly, there are three kinds ofresource formats to support these balloons -- hmnu, hdlg, and hwin.andP;  There'salso a companion resource, hrct, for hwin that describes the window's hotrectangles.andP;  To add balloons to an application, you create these resourcesalong with the corresponding string resources that hold the help messages.andM;Adding Balloons to Menus.andP;  By using a resource editor such as Apple's ResEditto create an hmnu resource, you can add help balloons to an application'smenu bar.andP;  This resource lets you associate balloon with a menu's title orwith any of its items.andP;  For each menu item, you have the option ofassociating one balloon with its enabled menu state and another with itsdisabled state.andP;  Likewise, you can associate another message with a menu itemwhen it's checked and yet another message with a menu item that's marked withsomething other than a check, such as a diamond or bullet.andP;  You can evenspecify a balloon for what Apple calls a &quot;missing&quot; menu item, or one that'sadded dynamically to the menu.andP;  An example of such an item is on MicrosoftWord's Window menu: As you open a document in Word, the document's nameappears on the Window menu.andM;The hmnu resource doesn't require that you specify a hot rectangle for theballoon.andP;  Instead, the Help Manager uses the menu-item rectangle as theballoon's hot rectangle.andP;  When the cursor is in that rectangle, the balloonappears.andM;By the way, the hmnu resource works only if your application uses thestandard menu-definition (MDEF) procedure to draw its menus.andP;  If you'readding balloons to your own application, then you know whether you've writtenan MDEF procedure for it.andP;  But if you're customizing an off-the-shelfapplication, you may not know if it uses the standard MDEF or not.andP;  One wayof finding out is to use ResEdit to see if the target application has an MDEFprocedure.andP;  If you know how to use ResEdit (the current version is 2.1.1),you'll find this a simple procedure.andP;  For those who'd rather not use ResEdit,the simplest way to detect a custom MDEF is by looking at how theapplication's menus behave.andP;  A nonstandard menu, for example, may havegraphical menus or menus that list Command-Shift or Option-key keyboardshortcuts (for some reason, Command-key shortcuts are considered standardmenu behavior).andP;  If the application uses a nonstandard MDEF, you can't addBalloon Help to menu items simply by adding hmnu resources -- you'll have toadd these balloons through programming.andM;Adding Balloons to Dialog Boxes.andP;  To add help balloons to an applicationdialog box or alert, you must create an hdlg resource and a correspondinghwin resource.andP;  The dialog box must have an associated DITL (dependent itemlist) resource, which almost all dialog boxes have (for more on DITLresources, see &quot;Let's Get Lost,&quot; September '90, page 329).andP;  You can definehelp messages for any item in a dialog box as well as for any item in adialog box as well as for any condition the item may be in (for example, youcan have one message for a check box that's marked and another message for anunmarked check box).andM;The hwin resource is vital, because the Help Manager uses it to find the helpmessages for a particular window (dialog boxes count as windows too).andP;  Thehwin resource in turn points to the hdlg resource for the dialog box.andP;  Thehdlg resource contains information about those items in the dialog box thathave associated help messages.andM;Adding Balloons to Arbitrary Window Rectangles.andP;  The Help Manager uses theitem rectangle that bounds the item (read from the DITL resource) as theballoon's hot rectangle.andP;  However, if the dialog box is configured so thatthe help balloon either doesn't fit on the screen or obscures the item it'spointing to, Apple offers an alternate hot rectangle, which lets you specifywhere the balloon will be triggered.andP;  The alternate rectangle resides in thehdlg resource.andP;  (Set this resource to 0,0,0,0 if you want the Help Manager touse the default item rectangle as the hot rectangle.)andM;The Help Manager also uses a default location -- a point 10 pixels down and10 pixels to the right of the upper left corner of the hot rectangle -- toplace the balloon's tip.andP;  If you don't like this location, you can use thetip-offset value in the hdlg resource to specify an alternative location forthe balloon's tip (if you want the default location, keep this resource'svalue at 0,0).andM;The Easy WayandM;If I've lost you with all this discussion of resources and alternaterectangles, take heart: You don't have to memorize the resource formats ifyou use Apple's homegrown utility BalloonWriter, a tool that can help bothdevelopers and users create Balloon Help text for applications.andP;  Although itwas in beta version when I looked at it, the final version of BalloonWritershould be available from APDA for less than $50 by the time you read this.andO;It's also available as part of APDA's E.T.O (Essentials, Tools, Objects)CD-ROM, which costs $300 for a one-year subscription.andM;To use BalloonWriter, you must be running either System 6.0.7 withMulti-Finder or System 7 and you must install the BalloonWriter INIT in yourSystem Folder.andP;  Once you've installed it, you perform the following six stepsto add balloons to an application:andM;1.andP;  Open BalloonWriter, and select New from the File menu to create a newballoon-data file.andM;2.andP;  Select Attach to Application from the Balloon menu.andP;  Choose your targetapplication in the resulting dialog box.andM;3.andP;  Select Create Standard Balloons from the Balloon menu.andP;  BalloonWriterwill read the target application's resource fork and create hmnu and hdlgresources for every menu and dialog box in the target application.andP;  This cantake some time, depending on the application's size.andM;4.andP;  Double-click on each help item in BalloonWriter's main dialog box, andtype the help text in the resulting dialog box (see Figure 1).andP;  Keep yourhelp text concise!andP;  At this point, you can also fix the alternate rectanglesand balloon tips, if you want to.andM;5.andP;  Select Install Balloons from the Balloon menu, and name the output filein the resulting dialog box.andP;  BalloonWriter will create a copy of the targetapplication, complete with the new help resources installed.andP;  Before quittingBalloonWriter, select Save from BalloonWriter's File menu to save theballoon-data file.andM;6.andP;  Open the application, and test it with the Help Manager by turning onBalloon Help and seeing if your new balloons appear.andM;BalloonWriter is easy to use, but it's limited in what it can do.andP;  Fordevelopers who require more control over help resources, an excellent toolfor adding Balloon Help to your target application is the resource editorResorcerer, from Mathemaesthetics ([617] 738-8803), which has templates thatwork with Balloon Help.andP;  Note, however, that the process is not automatic, asit is in BalloonWriter.andP;  You have to know how the resources interact tocreate the balloons.andM;Balloon Help is covered in detail in Inside Macintosh, Volume VI (Reading,Massachusetts: Addison-Wesley, 1991).andP;  Not only does this volume cover theHelp Manager but it also gives inside information on all the other new System7 features -- such as outline fonts, publish-and-subscribe, and color icons-- you'll need to know about to make your applications 100-percent System7-savvy.andM;Balloon PrinterandM;Most people keep help balloons on-screen for just a moment to jog theirmemory about how a particular tool or function operates.andP;  Sometimes, however,you need a more permanent reminder.andP;  Balloon Printer, developed for MacUserby Kurt Matthies, is an Fkey that lets you use the key combinationCommand-Shift-8 to print the currently active balloon.andP;  You can get your owncopy of Balloon Printer from Zmac.andP;  It's in Library 3 (Utilities) of theMacUser Forum or Library 3 (INITs, cdevs, FKEYS) of the Download andamp; SupportForum; the filename is BALPRT.SIT.andP;  If you'd like to see how Kurt wroteBalloon Printer, you can check that out on Zmac too.andP;  Source code for BalloonPrinter is available from Library 9 (Source Code) of the Download andamp; SupportForum; the filename is BALCOD.SIT.andM;Kurt Matthies is president of Macreations Publishing, of Boulder, Colorado,which publishes Tycho TableMaker.andO;</TEXT></DOC>