<?xml version='1.0' encoding='UTF-8'?>
<DOC><DOCNO>  ZF109-680-933  </DOCNO><DOCID>09 680 933.andM;</DOCID><JOURNAL>LAN Magazine  Dec 1990 v5 n12 p53(4)* Full Text COPYRIGHT Telecon Library Inc. 1990.andM;</JOURNAL><TITLE>Memory lane: how to tame workstation memory under Windows 3.0.andO;(tutorial)</TITLE><AUTHOR>Stephenson, Peter.andM;</AUTHOR><SUMMARY>Windows 3.0 has many benefits, however users may experienceproblems getting it to work well on local area network (LAN)workstations.andP;  Due to a lack of memory, and the lack ofcompatibility of many memory management products with Windows, andthe fact that Microsoft did not make any provisions for placingnetwork drivers into high memory, there exists some confusion onhow to get the maximum performance from Windows 3.0 on a LANworkstation.andP;  Solutions do exist.andP;  Users must understand thedifference between extended and expanded memory.andP;  Extended memoryallows memory beyond 1,024Kbytes to be addressed as a single blockas if it were an extension of regular DOS memory.andP;  Expanded memoryopens a window for the space between 640Kbytes and 1,024Kbytes,called a page frame, in order to address memory beyond1,024Kbytes.andP;  Real and protected modes must also be understood inorder to manage memory under Windows.andP;  Special drivers are neededto access memory over 1,024Kbytes.andP;  Applications must be writtento take advantage of protected mode memory.andP;  Users who begin tomigrate to 80386-based microcomputers, and to use Windows andQEMM386 with Windows Workstation will be ready for OS/2 when andif it arrives.andM;</SUMMARY><DESCRIPT>Product:   Microsoft Windows 3.0 (Graphical user interface) (Design andconstruction).andO;Topic:     TutorialExtended MemoryExpanded MemoryPerformance ImprovementLocal Area NetworksMemory ManagementSoftware DesignGraphical User Interface.andO;Feature:   illustrationchartprogram.andO;Caption:   Extended memory model. (chart)Expanded memory model. (chart)Sample CONFIG.SYS file. (program)andM;</DESCRIPT><TEXT>Memory LaneandM;As applications get bigger, network users are finding workstation memory moreand more squeezed.andP;  While certainly the network industry is moving to placeLAN drivers into high memory, as yet, the most efficient way of accomplishingthat on many LANs has been with third-party products from suppliers such asQuarterdeck (Santa Monica, Calif.), All Computers (Toronto, Ont.), and RYBSElectronics (Boulder, Colo.).andM;Then came Microsoft Windows 3.0 with lots of memory management features.andP;  Thecatch is that you must run Windows 3.0 applications to take advantage ofthese memory management capabilities.andP;  Unfortunately, Microsoft did notinclude any provisions for placing network drivers into high memory.andP;  Worseyet, many solutions to relocate drivers simply don't work under Windows 3.0,particularly if you want to run your workstation in the 386 enhanced mode.andM;There are solutions, though.andP;  For example, I use WordPerfect 5.1, anon-Windows application, on an ALR 386 with 5MB of memory on a 3Com 3+ShareLAN.andP;  All my network drivers are loaded into high memory, and I have 530KB ofDOS memory plus nearly 800KB of Windows memory available per application.andP;  Myapplications are very well-behaved and, believe it or not, I'm runningWindows 3.0 in the 386 enhanced mode.andP;  My pre-Windows setup is a long wayfrom where I am now, and getting there was a lot less than half the fun.andM;Jogging MemoryandM;No hard-and-fast rules for memory management on network workstations exist,simply because you can have almost as many workstation configurations asworkstations.andM;Just when you thought you understood the difference between extended andexpanded memory, you find that you need to understand real mode, protectedmode, 386 enhanced mode, and standard mode.andM;Let's start with the differences between extended and expanded memory.andP;  Bothterms refer to the memory above 1,024KB, but the difference lies in how thismemory can be addressed.andP;  Extended memory lets you address the memory beyond1,024KB as a single block of memory as if it were an extension to regular DOSmemory.andP;  Of course you need programs that can &quot;see&quot; memory beyond the normal640KB DOS space.andP;  One program, DOS VDISK.SYS, is actually a device driverthat lets you use extended memory as a virtual disk drive.andP;  Windows 3.0 worksbetter with extended memory since it needs a large block of RAM available tomanipulate.andM;Although expanded memory also uses the memory beyond 1,024KB, it doesn'taddress it directly.andP;  Instead, it opens a window on that memory within thespace between 640KB and 1,024KB called a page frame.andP;  The page frame uses anaddress between 640KB and 1,024KB, but it picks the actual memory to fill thepage frame from beyond 1,024KB.andM;The code the application places in high memory is physically stored above1,024KB.andP;  The page frame slides along the block of expanded memory, selectingthe program code it needs to perform the application's tasks and letting theapplication address that code through the page frame.andP;  The application mustbe designed to use expanded memory, and the PC must have an expanded memorymanager installed to take care of the page frame's tasks.andM;Figure 1 illustrates extended memory; Figure 2 shows expanded memory.andP;  Asshown in Figure 1, the space between 640KB and 1,024KB is used for the BIOS,option ROMs, and video drivers.andP;  In reality, most of this space is unused,which means 384KB of memory--a pretty sizable chunk--is available.andP;  Thetrouble is that this memory is hard to get at without some help.andP;  A 286 PCneeds some hardware help to access that extra memory.andP;  A 386 PC can get atthe memory with special software drivers.andM;Real and ProtectedandM;An understanding of real and protected modes is essential to managing memoryunder Windows.andP;  Real mode, the standard mode of the 80286, allows only1,024KB of memory.andP;  Of that 1,024KB, only 640KB is available normally.andP;  Whenyou buy a 286 computer, you may be told that the PC has 640KB of RAM.andO;Actually, it has 1,024KB, but you can't use the upper 384KB without help.andM;Protected mode is the standard mode of the 80386 and, in the 80286, opens up16MB of address space.andP;  In the 286, however, you need special drivers toaddress the high memory over 1,024KB.andP;  And then, you can only address it incertain ways.andP;  Protected mode lets you use extended or expanded memory aslong as the application is written to take advantage of it and you are usingappropriate drivers or, in the case of the 286, additional hardware such asthe All Computer Chargecard or the RYBS HiCard is used.andM;Windows 3.0 provides a slightly different interpretation of real mode.andP;  Fromthe Windows perspective, real mode limits available memory to less than1,024KB (including the 640KB of conventional memory).andP;  It also providescompatibility with earlier versions of Windows that lacked extensive memorymanagement features.andP;  If your workstation has less than 1,024KB of memory,real mode is the only mode you can use.andM;Standard mode is a Windows term that roughly approximates protected modeoperation.andP;  It permits access to extended memory and code swapping.andM;Lastly, for Windows users with 386 PCs, the 386 enhanced mode provides accessto virtual memory and permits multitasking.andP;  In short, it takes advantage ofthe 386 chip's memory management abilities.andP;  None of these advanced optionsare worthwhile, though, unless your PC has some extra memory.andM;So although Microsoft says you can use Windows 3.0 on any 286 or 386 with aslittle as 1,024KB of RAM, to get all the power available, you really need a386 with 3MB or 4MB of memory.andM;A very big &quot;gotcha&quot; remains.andP;  Without special memory management drivers, youcan't get at that extra 384KB, and unfortunately, virtually none of thedrivers are compatible with Windows 3.0 in the 386 enhanced mode.andP;  Thenotable exception is Quarterdeck Expanded Memory Manager 8386 (QEMM386)release 5.1 from Quarterdeck Office Systems.andM;Exercising MemoryandM;The key to increasing available space to run non-Windows applications underWindows is to get the network drivers that are causing RAM cram out ofconventional memory (the space below 640KB).andP;  The only place to put them isin the 384KB between 640KB and 1,024KB, which is not a trivial task.andO;Although it may seem that the better part of 384KB is waiting for you, thingsare going on &quot;up there&quot; that aren't going on the same way or in the sameplaces with any consistency.andM;Here are some recommendations for how to use--or not to use--Windows 3.0 onyour network's workstations.andP;  The best workstation for Windows is a 386 with3MB or 4MB of RAM.andP;  Lots of LAN users could benefit by running such aworkstation in standalone mode if there wasn't a network.andP;  What makes runningon a network any different?andP;  The user still needs the power.andM;If you use 286 PCs for workstations, be very careful how you configure themfor use with Windows.andP;  Use a combination of Quarterdeck's DesqView andWindows because users will need to run both Windows applications andnon-Windows applications.andP;  Non-Windows applications will be prevalent forsome time to come.andP;  On a 286 running non-Windows applications, you can getexcellent memory management with DesqView and hardware such as the AllChargecard or the RYBS HiCard.andM;As long as the applications run in real or standard mode under Windows, youwon't have trouble with these memory management products.andP;  If you expect tolive with Windows alone on a 286 workstation, you're likely to find thenetwork drivers are intrusive enough to make using large non-Windowsapplications very difficult.andP;  Multitasking without DesqView is almostimpossible in such an environment.andM;Earlier, I mentioned that the 384KB space above 640KB can have someinconsistent things going on.andP;  When you use QEMM386 and Windows 3.0 on a 386PC, you need to play some configuration games to use that space effectively.andO;A strong potential for conflicts exists between Windows and QEMM.andO;Fortunately, a bit of effort and lots of patience will clear the conflicts.andO;Let's start with using QEMM on a 386 workstation that you want to run underWindows 3.0.andM;QEMM is an extended memory manager; it opens up the area above 1,024KB as asingle block, which is exactly what Windows wants.andP;  As an added benefit, ituses a Quarterdeck program called LOADHI to take advantage of the 384KB chunkof memory.andP;  During installation, which is essentially automatic, QEMM usesLOADHI to place device drivers and terminate-and-stay resident programs intothe available space between 640KB and 1,024KB.andP;  It seeks out gaps and bestuses the available space without causing conflicts with drivers alreadyrunning in that area.andM;However, conflicts can arise because Windows uses its own drivers for thescreen, mouse, and other devices.andP;  These drivers can conflict with QEMM.andP;  Oneinstance occurs when there is a conflict with Windows VGA screen driver.andO;When you load Windows, the Windows 3.0 logo appears, then your screen goesblank and doesn't recover, but you can see from your hard disk's light thatWindows is still loading correctly.andP;  A variation is the appearance of snowand multicolored streaks on a VGA or EGA monitor, which obliterates any realdisplay.andP;  In both cases, a screen driver conflict is the culprit.andM;Solving such a conflict requires that you tell Windows to exclude certainblocks of memory that it thinks it can use.andP;  You have to modify Windows'configuration files, in particular SYSTEM.INI, to get that message across.andO;SYSTEM.INI contains key information about your PC's configuration fromWindows' standpoint as well as the special Windows drivers that take overonce you load it.andM;You may need to adjust the Windows EMMEXCLUDE command.andP;  EMMEXCLUDE lets youblock out a portion of memory so Windows won't scan it or attempt to use it.andO;If you have a conflict, it may be a good idea to exclude the block of memorycausing the problem.andM;Users can discover which blocks to exclude in several ways.andP;  Some methodsinvolve trial and error.andP;  The first place to start is with QEMM, whichusually configures itself correctly.andP;  You can delete HIMEM.SYS from theCONFIG.SYS file when you install QEMM.andP;  HIMEM.SYS is an extended memoryspecification driver that Windows 3.0 requires for running in 386 enhancedmode.andP;  However, QEMM386 is also such a driver and can be used in place ofHIMEM.SYS.andM;Included with QEMM386 is Quarterdeck's Manifest utility.andP;  Manifest lets youexamine your PC's resources in great detail including where your variousdrivers are located in memory.andP;  If you find a conflict, try excluding thatrange of addresses in Windows' SYSTEM.INI under the [386enh] section.andP;  Youcan edit this file with any standard ASCII text editor.andM;Using LOADHI, QEMM386 also places network drivers in the area above 640KB.andO;Listing 1 is an example of how my 3Com drivers were moved when I installedQEMM386.andP;  The first line of the CONFIG.SYS file is the QEMM device driver.andO;How the options on that line are configured depends upon what QEMM386 findsin your configuration when it analyzes it.andP;  You rarely have to change theseentries.andM;Special Case: NetWareandM;Using QEMM386, you can use a 386 as a superb workstation on most networks andgain all the benefits of Windows 3.0.andP;  There are some special cases; onebeing Novell's NetWare.andP;  NetWare straight out of the box has somedifficulties working in a Windows 3.0 environment; however, Novell has a setof files to fix the glitches.andM;If you plan to use Windows 3.0 on NetWare workstations, consider WindowsWorkstation from Automated Design Systems (Atlanta).andP;  Windows Workstationhelps you use Windows as a consistent interface.andP;  It adds workstationsecurity, an e-mail style facility called an intercom, and a superb printmanager.andP;  Plus, you get an easy-to-use scripting language that greatlysimplifies launching network applications across multiple drives or networksegments.andM;Past RemembrancesandM;When used correctly, Windows 3.0 can provide you with a superior workstationenvironment.andP;  Windows works best and most effectively in the 386 enhancedmode, which means you need 386-based workstations to get the full power ofthe environment.andM;You also need a way to relocate your network drivers so large non-Windowsapplications have room to run.andP;  For the foreseeable future, a very largepercentage of really useful applications will not be ported to Windows 3.0.andO;Most corporations have proliferated those applications throughout theirorganizations and are not about to change until Windows versions appear.andO;Some may never change.andP;  The benefits of Windows for such applications arelimited, and without the ability to run them in the 386 enhanced mode, thebenefits may be nonexistent.andP;  The only way to have your cake and eat it toois to use QEMM386 to open up all of your available memory.andM;Finally, if you are using 286s, you are probably better off using DesqViewfor non-Windows applications and Windows in standard or real mode for Windowsapplications.andP;  With DesqView you can relocate drivers, using a product suchas from RYBS or All Computer, to give you enough space, and still do a fairamount of multitasking.andP;  Windows in this environment won't let you do anymultitasking, but it will let you use most of the PC's memory for Windows 3.0applications.andM;Whether Windows can make an acceptable workstation environment depends uponwhat you expect from it as well as your resources.andP;  Under ideal conditions,Windows is probably the best environment available (until OS/2 gets its acttogether).andP;  Under less-than-ideal conditions, my choice is DesqView, eventhough Windows certainly has its place running applications designed for it.andM;On the other hand, if your goal is consistency, start migrating to 386 PCs,use Windows and QEMM386 with Windows Workstation, and you'll be ready forOS/2 when (or if) it arrives.andM;Peter Stephenson has been an independent consultant for eight years.andO;</TEXT></DOC>