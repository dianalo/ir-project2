<?xml version='1.0' encoding='UTF-8'?>
<DOC><DOCNO>  ZF207-071-206  </DOCNO><DOCID>07 071 206.andM;</DOCID><JOURNAL>Data Based Advisor  March 1989 v7 n3 p25(4)* Full Text COPYRIGHT Data Based Solutions 1989.andM;</JOURNAL><TITLE>Keys. (using record keys with the Revelation database managementsystem) (the Revelation expert) (column)</TITLE><AUTHOR>Gunther, John.andM;</AUTHOR><SUMMARY>The Revelation data base is not for the casual user, with anannual cost of $1500, but it is a powerful package.andP;  A dBase fileinterface has made it easy to introduce Revelation into a dBaseenvironment without creating non-standard formats.andP;  The use ofrecord keys, using some unique part of a record to facilitatesearching, makes Revelation unique and powerful.andP;  Indexes updatesare performed during periods when the system is otherwiseunoccupied.andM;</SUMMARY><DESCRIPT>Product:   Revelation (data base management system).andO;Topic:     Data BasesData Base Management SystemsData Base DesignData Base Administration.andM;</DESCRIPT><TEXT>KeysandM;Hold it!andP;  Even if you're not a Revelation user, take a minute to read thenext few paragraphs.andP;  Exciting things are happening in the Revelation worldand you should know about their current one and about to switch.andP;  Thesepeople are leaning toward Advanced Revelation over dBASE products, R:BASE,and Paradox (sorry, Brian Smith).andM;My regular readers can imagine why I make a persuasive case that Revelationis the best choice, but that these people are already considering it is proofthat Revelation Technologies' enhanced marketing effort is paying off.andP;  Manyfine products have succumbed to the sad reality that marketing is moreimportant than quality and value in determining product success or failure.andO;To a prospective DBMS user, successful marketing is assurance that increasingnumbers of people are joining the fold, creating the large user base neededto generate good technical support, continuing product development,third-party enhancements, and a rich set of applications.andP;  This is what ishappening now--the Revelation bandwagon is rolling, so climb aboard before itpicks up too much speed.andM;ProceedingsandM;In this vein, the first full fledged Revelation conference will take place ina few weeks (March 22-24) in Florida.andP;  Sponsored by Pick/Revelation developerCogent Information Systems, the event is targeted at corporate decisionmakers rather than just &quot;propeller heads,&quot; as an acquaintance of mine sobrutally phrases it.andP;  I think conferences and shows are generally a veryinefficient means of information transfer.andP;  Comdex is a zoo and MacWorld is acircus, but a Revelation conference (even in Florida) is a seminal event thatmerits the time and effort to attend.andP;  The program consists of speakers,forums, and hands-on sessions.andP;  Even if you don't come, call the conferencecoordinator, Dian Thompson.andP;  Her number is (201) 795-4003.andM;ProductsandM;Revelation Technologies has two new products of great interest to developers,both of which should be available when you read this.andP;  One is a package ofsoftware, documentation, and high level technical support for applicationdevelopers.andP;  At an annual cost of $1,500, this is not for the casual user,but presumably the software and documentation will be available separately ata lower price.andP;  I'll give you a report on these when I get my copy.andM;The second item is a dBASE file interface.andP;  As you may know, the handling ofRevelation's file structure is not hard coded into the program, as is thecase with virtually every other DBMS.andP;  So, the file handler for anyparticular file can be modified or replaced.andP;  Revelation marketing refers tothis capability as environmental bonding, which simply means the system usesmodular file drivers.andP;  A driver that allows Revelation to read, write, andcreate files and indexes in dBASE format was sorely needed.andP;  With thiscapability, it's possible to phase AREV into a shop running one of the dBASElanguage products, without creating &quot;non-standard&quot; file formats.andP;  Once theusers are convinced of Revelation's superiority and old applications areconverted, the file structure can be transformed at one time.andP;  Constrained bydBASE file structure, Revelation's variable length and multi-valued fieldcapabilities aren't available, but most of the rest should be.andP;  I'll reporton this product, too, once I have it in my hot little hands.andM;Okay, you irregulars, you can move on to the &quot;Database Design&quot; column now ifyou wish.andM;ProgrammingandM;Last month, I listed four unusual capabilities of AREV that are derived fromits unique architecture: large database handling, variable length fields,addition of new fields, and multi-valued fields.andP;  I'm going to use each ofthese as the starting point for a discussion of related AREV techniques.andM;The capacity to handle very large databases effectively is based on hashing,a technique that makes the effort of retrieving records vary only slightlywith the number of records in the table.andP;  Hashing requires a unique portionof each record to use in its calculations.andP;  This leads to the use of recordkeys, which are simply unique names for each record in a particular file(remember, &quot;file&quot; in REV lingo is equivalent to the standard database term&quot;table&quot;).andM;Many DBMSs dispense with record keys, but I like the additional structurethey impose.andP;  In AREV, record keys have a dual nature.andP;  On one hand, they'relogically treated as field 0 of the record, and can be sorted, validated, anddisplayed like any other field.andP;  On the other hand, since the key actuallydefines the record, its value must be determined before any other fields canbe dealt with.andP;  The value of a key cannot be changed like an ordinary field,since its new value would define a new record.andP;  To change a key value, youhave to copy the record with the original key to a new record with the newkey, then delete the original record.andM;The database designer must decide on an assignment scheme for the table'skeys.andP;  If some attribute in each record is inherently unique, then it's anobvious nominee for the record key.andP;  Common examples of this involve partnumbers, social security numbers (put down your pens, I know they aren'tnecessarily unique), and account numbers.andP;  In other cases, two attributes canbe joined to create a unique key.andP;  We used this in a theatre database, wherea code for the name of the play was joined with the performance date, tocreate keys for records containing data about each performance.andP;  You can alsojoin date and time of day to create keys for records of things like outgoingphone calls.andP;  In some cases, where nothing is unique, you can simply assignsequential numbers as record keys.andM;Philosophically, the record key should tell you as much about the record aspossible--within reason.andP;  An ideal situation is one in which you candetermine the key of a desired record by inspecting whatever &quot;clues&quot; areavailable to you prior to displaying it.andP;  For example, you can displayinformation about a part immediately if you know the part number and thatpart number is the record key.andP;  Since the need for keys that are unique isvery severe, many helpful clues don't qualify as record keys.andP;  But thesenon-unique clues can be used to locate records through indexing lookups,which we'll discuss in a few moments.andM;Let's look at some specific examples of various key implementations in a AREVdata entry windows.andP;  Except in a few unusual cases, the key field must be thefirst one in the window (logically first, not geographically).andP;  When paintinga new window, you're asked, after entering the first field prompt, whetherit's going to be the record key.andP;  Answering &quot;Yes&quot; is all you need to do tospecify the key.andP;  Since it's treated just like a regular data field in thewindow, you can apply all the usual prompt options: input validation, outputconversion, default value, help text, etc.andM;If you want a simple sequence number to serve as the record key, set thekey's Default prompt option to &quot;%SK%&quot;.andP;  When the window is run, pressingEnter at a blank key field will put the next sequential number into thefield.andP;  If you use a default sequence number and then fail to save the newrecord, the next time you use the default it'll supply the same number, soyou don't waste numbers.andP;  The sequence number default routine is unaffectedby record deletions though.andP;  If you have 100 records with keys from 1 to 100and the default key value is 101, deleting record 50 will not cause a newrecord 50 to be automatically created.andP;  If sequential numbers are too simplefor you, you can use custom default routines to generate any desired keys.andM;When the operator enters keys manually, you can use In Patterns to enforcekey restrictions.andP;  A key field In Pattern of &quot;4A&quot;, for example, only allowsfour-letter words as keys.andM;Multi-part keys are a real example of AREV's power, although they aren'toften used.andP;  Begin by defining the first prompt as a key field in the usualmanner.andP;  In its Prompt Option screen, set Key Part to 1 to denote that it isonly part 1 of the fully key.andP;  Then paint the prompt for the second part ofthe key and in its Prompt Option screen set the Field Number to 0 (this ishow AREV knows it's a key) and its Key Part to 2 (to denote that it is thesecond part of the key).andP;  You can continue indefinitely in this manner,although anything more than a three-part key borders on the absurd.andM;When the window is run, the operator types each part of the key at itsprompt, under the control of its options.andP;  As each part is filled in, AREVconstructs the actual key by concatenating (stringing together) the key partsin numerical order with an asterisk separating adjacent parts.andP;  Each part ofthe key is required.andP;  Since the complete key isn't automatically displayed inthe window, it's a good idea to include another key prompt immediately afterthe key part that has a field number of 0, a null key part, and an entry typeoption of P (Protected).andP;  This field will display the full key, withasterisks, but the cursor won't stop there because of the prompt's Protectedstatus.andM;Each component of the key can be indexed for look-ups, and symbolic fieldscan be displayed between the key part prompts, if you like.andP;  If the firstpart of the key is a vendor code, a symbolic field displaying the vendor'sname (from another file) could be displayed for confirmation before enteringthe concluding key part, which might be a vendor part number.andP;  You couldsearch for the record based on either vendor code or part number, if youdidn't already know both.andM;In some instances, one or more parts of the multi-part key change onlyinfrequently between records.andP;  For example, a window that's used to enterprice updates from vendor price lists would keep the same vendor key partexcept when switching from one vendor's list to another.andP;  The Customizewindow in Paint has a field called Preserve Keys that lets you specify whichkey parts should be automatically duplicated when moving from one record tothe next.andM;Note that key part prompts and any interspersed symbolic fields must bepainted &quot;in order&quot; at the beginning of window design.andP;  They can't be insertedlater.andM;So much for record keys for the moment.andP;  What happens when you need a recordbut don't know the key?andP;  What happens when you want to search for a recordbased on information that isn't part of the key?andP;  These are problemsaddressed very elegantly by AREV's indexing features.andM;Indexing maintains secondary information about a file's contents that's usedto speed up the task of locating record keys.andP;  Lists of keys are frequentlyneeded for updating and reporting.andP;  Without an index, AREV would searchthrough each record of the file to determine which ones meet the specifiedcriteria.andP;  When an appropriate index is being kept, the search can be manytimes faster.andM;Say you have a file whose key is a unique code for each of 5,000 customers.andO;If you don't know the code, but you do know the last name, you can ask for alist of all keys whose last name is the one you want.andP;  The brute force methodis to read all 5,000 customer records and check the last name field.andP;  If alast name index is being maintained, AREV must read only a few records of theindex to generate the key list.andM;Something for nothing, you ask?andP;  Of course not.andP;  Maintaining an indexrequires additional disk space and processing time.andP;  Disk space is requiredbecause the index duplicates some primary file data in the name of rapidaccess.andP;  Fortunately, disk space is one of the great bargains in personalcomputing today.andP;  Processing time is much dearer.andP;  An index must bemaintained after every relevant change to the primary file.andP;  Immediatelyupdating a dozen or so indexes every time you save a primary record wouldmake data entry unforgivably sluggish.andM;AREV handles this very innovatively, by using free time.andP;  Instead of doingindex updates when a record is saved, the system writes an &quot;indextransaction&quot; record to a special file named &quot;!INDEXING&quot;.andP;  This record hasjust enough information to allow all the index updates to be performed at alater time, when the system has nothing else to do.andM;Whenever AREV is waiting for keyboard input, and nothing is typed for acertain period (30 seconds by default), background indexing is initiated.andO;This routine checks !INDEXING for transaction records.andP;  It then beginsprocessing these, updating each index as required.andP;  The transaction record ismodified to reflect each completed update.andP;  If a key is pressed before allpending updates are complete, index processing is suspended and the user getsAREV's attention immediately.andP;  During the next input pause, the backgroundprocess is called again and continues updating the indexes.andP;  In technicalterms, this is known as a good deal.andP;  Wasted time is put to good use, soindex away as long as the disk space holds out.andM;You may have already realized that background indexing introduces a lagbetween the state of the indexes and the state of the file.andP;  Using thecustomer file example again, if you save a record with the last name&quot;Gunther&quot; and then do a look-up of &quot;GUNTHER&quot; records before the backgroundprocess has updated the index, the most recent record won't be included inthe list.andP;  For some processes that use indexes, AREV forces relevant indexupdates before proceeding.andP;  The RBASIC system subroutine INDEX.FLUSH allowsprograms to enforce the same requirement when necessary.andM;On a network, another novel provision of AREV can reduce the index lag toalmost nothing.andP;  The no-input period that AREV waits before initiating indexupdates is set for each user in the Environment record.andP;  If this delay iszero on one workstation, that station will do nothing but watch the !INDEXINGfile for index transactions placed there by other workstations andimmediately process them.andP;  This allows you to dedicate one network station,perhaps on an otherwise unused slow PC, as an index updater.andM;Programmers should note that the background indexing process is not triggeredby RBASIC's raw INPUT command.andP;  It's the system routine INPUT.CHAR thatcauses index updates to proceed, as well as providing a number of otherfeatures.andP;  AREV uses INPUT.CHAR for virtually every input requirement, andprogrammers should too.andM;In a future column (probably next month) I'll show how to actually specifythe various types of AREV indexing in applications.andP;  I want to use the restof this month's space to announce The First Real Revelation Contest.andM;Enter today!andM;Some AREV tools are so powerful, they allow a certain level of artistry to beapplied to database programming.andP;  One of these is the concept of the symbolicformula, which allows you to create virtual fields in a record.andP;  Since thesefields can contain anything that the RBASIC language can produce (and that'severything) and are then treated as if they were actually stored in therecord, they are a fertile field for implementing creative solutions.andO;Entries in this contest will consist of symbolic field formulas, withdescriptions or examples of their benefits.andP;  We'll have two categories,novice and advanced, and the purpose of the formulas can cover anythingreporting, indexing, data display, etc.andM;Here are the conditions: Please submit all entries via mail or through theData Based Advisor Readers Exchange (formerly the FORUMBoard) at (619)270-2042.andP;  Except for very short formulas, please submit each entry as a REVor AREV dictionary record, along with any accompanying records needed to showits effect (commands, windows, sample data file, documentation, etc.).andP;  Thesource code must include any relevant copyright notices and may only besubmitted by the author.andP;  Since the point of the contest is to educate thereaders, documentation of uses and techniques must be included in the sourcecode or accompanying text description.andP;  As many entries as possible will bepublished and included on the magazine's monthly Program Disk.andP;  Entries willbe accepted until April 15, 1989 and results will be published in the Julyissue.andP;  Judging criteria will be usefulness, broad applicability, educationalvalue, and programming elegance.andM;The author of the best formula in each of the two categories will receive afree subscription to (what else?) this magazine (and if you alreadysubscribe, we'll extend it another year), plus your name in print.andP;  So tuneup your egos...andP;  and fire up those keyboards!andM;CorrectionandM;Error correction: In the January column, in the next to last paragraph onpage 38, the &quot;\d&quot; combinations should have been percent signs (%).andM;John Gunther owns a broad spectrum consulting firm with particular strengthsin networking, applications development, and third-party support.andP;  He is alsoa consultant for Abacus Computer Consulting of New York City.andP;  He invitescomments and can be contacted at Bucks vs Bytes Computer Consulting, 28Central Avenue, Rosendale, New York 12472-9638, phone (914) 658-8203.andO;</TEXT></DOC>