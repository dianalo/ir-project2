<?xml version='1.0' encoding='UTF-8'?>
<DOC><DOCNO>  ZF108-103-010  </DOCNO><DOCID>08 103 010.andM;</DOCID><JOURNAL>LAN Magazine  Feb 1990 v5 n2 p76(7)* Full Text COPYRIGHT Telecon Library Inc. 1990.andM;</JOURNAL><TITLE>For Unix users: NSF and RFS provide file access across networks.andO;(Unix local area networks) (network file system, remote filesharing)(includes related article on Sun's guide to who is sellingONC/NFS)</TITLE><AUTHOR>Carr, Jim.andM;</AUTHOR><SUMMARY>Sun Microsystem's Network File System (NFS) or AT and T's RemoteFile System (RFS) offer Unix users ways to take advantage ofdistributed computing capabilities.andP;  NFS from Sun operates on morethan 110 computer platforms and will give users transparentover-the-network access to remote files, regardless of which typeof operating system or workstation is being used.andP;  RFS, from ATand T is Unix specific and does much the same thing, but istailored to Unix and offers the full range of Unix semantics.andO;Neither system should be classified as a network operating systemeven though they perform many of the same tasks.andP;  RFS makes remoteaccess to a file appear to the user as local access would eventhough the operation takes place through a communications medium.andM;</SUMMARY><DESCRIPT>Product:   Network File System (Communications software) (usage)Remote File Sharing (Computer program) (usage).andO;Topic:     UNIX-Like Operating SystemsLocal Area NetworksProtocolConnectivityDistributed Processing.andO;Feature:   illustrationtablechart.andO;Caption:   The ONC environment is made up of a layered protocol platform.andO;(table)VNODE shields the standard UNIX file system and UNIX kernalinterface. (chart)andM;</DESCRIPT><TEXT>For UNIX UsersandM;In the always changing world of local and wide-area networks, SunMicrosystem's Network File System (NFS) stands out as one of the most widelysupported protocols available in the marketplace today.andP;  NFS, developed andintroduced by Sun in 1984, now runs on more than 110 computer platforms (seesidebar &quot;A Guide to Who's Selling ONC/NFS&quot;).andP;  It was designed by Sun to giveusers transparent over-the-network access to remote file systems, regardlessof the type of system (UNIX, DOS, MVS, or VMS) or workstation the user isaccessing.andM;Because it is not strictly a UNIX protocol but serves as an operating-systemand machine-independent network service, NFS can be said to complement ATandamp;T'sRemote File System (RFS), the other widely distributed and implementedUNIX-based file system that allows users to access to remote files over anetwork.andP;  NFS and RFS differ in many ways.andP;  To the user, however, the primarydifference is that NFS offers only a limited set of UNIX commands, RFS thefull complement of UNIX semantics.andM;The reason for NFS' limitations is simple: A UNIX workstation user can accessfiles over the network on non-UNIX systems--for example, DOS--that do notprovide all of UNIX's powerful capabilities.andP;  RFS, however, gives users thefull UNIX command set.andP;  &quot;Every operation on the local file system can beperformed on a remote file, and will produce the same results as if it wereperformed locally,&quot; says Ron Griffith, head of advanced UNIX system design atATandamp;T's Bell Labs in Menlo Park, Calif.andP;  &quot;So, the two file systems havedifferent roles to play&quot; in the UNIX network environment, Griffith adds.andP;  Assuch, both NFS and RFS are included in the latest version of the UNIX SystemV, release 4 (released in late November 1989).andM;What They Are And Aren'tandM;In understanding NFS and RFS, it is important to realize what the are not:They are not Network Operating Systems (NOS), such as Banyan's Vines,Novell's NetWare, and 3Com's 3+Open.andP;  NFS and RFS deliver many of thecapabilities (that is, transparent access to files, applications, andphysical resources across an environment of networked computers) provided byNOSs.andP;  But they work in concert with UNIX and, in the case of NFS, otheroperating systems, including DOS and VMS, to provide access to files across anetwork.andM;Like Vines or 3+Open, RFS and NFS fit into the application layer of the ISO'sOpen Systems Interconnect (OSI) reference model.andP;  Because the two protocolsdiffer in their approach, we'll discuss them separately, with the emphasisplaced on NFS.andM;NFS's Layered ApproachandM;The NFS is one of several network services, as Sun calls them, that make upSun's Open Network Computing (ONC) environment.andP;  Sun says ONC is &quot;theindustry's leading general-purpose network computing environment, in whichheterogeneous systems can be interconnected in a transparent fashion.&quot;andM;The ONC environment is made up of a layered protocol platform, tools fordeveloping distributed applications, and network services built on theprotocol platform (Figure 1).andP;  NFS is one of the network services; othersinclude an Automounter, which &quot;mounts&quot; and &quot;unmounts&quot; (the UNIX approach tomaking remote directories available over a network) remote directories; YP, anetwork-wide data management and look-up facility; a network Lock Manager, aStatus Monitor, NETdisk, PC-NFS.andP;  NEtdisk allows diskless workstations toboot from servers supporting ONC/NETdisk, while PC-NFS is a UNIX &quot;demon&quot; thatpermits a PC user to access NFS-mounted files.andM;Underneath these services are two layered protocols, Remote Procedure Call(RPC) and eXternal Data Representation (XDR).andP;  RPC handles the details ofexchanging commands and data with a remote file server, while XDR acts as atranslator between differing operating systems.andP;  The XDR library oftranslation routines allows computers that represent data in differing waysto send and receive that data in a common format.andP;  XDR serves as a commondata representation that many different machines can understand.andM;One definition of NFS calls it a set of remote procedures, their arguments,results, and effects.andM;NFS requires no session-level services.andP;  At the transport layer, Sun hasselected the User Datagram Protocol (UDP) or Transmission Control Program(TCP) working in conjunction with the Internet Protocol (IP) as thenetwork-layer functions.andP;  the Sun RPC can operate over virtually anyrequest/reply protocol, although Sun has accepted industry standard to useTCP/IP.andP;  Looking still lower down the OSI Reference Model, NSF uses theEthernet Link or IEEE Logical Link Control (LLC) 802.2 protocol at thedata-link layer and either Ethernet (IEEE 802.3) or a token-passing bus(802.4) at the physical layer.andM;In designing NFS, Sun developers faced the task of making network files,which may or may not be UNIX files, look identical to UNIX files; theirsolution was to separate the file system interface from the file systemimplementation, creating what Sun calls the Virtual File System (VFS)/VirtualFile Node (VNODE) interface.andM;In this implementation, VNODE replaces the standard UNIX file systeminterface, which separates UNIX's file system from UNIX devices, such asdevice drivers.andP;  VNODE shields the standard UNIX file system and UNIX kernalinterface (and hence, the user) from the vagaries of remote file systems,such as DOS, the workstation user accesses over the network (Figure 2.)andM;At its basic level, NFS performs two primary functions: it &quot;exports&quot; and&quot;mounts&quot; file systems.andP;  Exporting refers to the process in which one computersignals the other computers on a network that specific file systems areavailable for use, or mounting over the network.andM;The mount procedure converts an operating system-specific path name into whatis called a file handle.andP;  File handles are data-address structures that aserver uses in communication with a client workstation.andP;  The client in turnuses file handles without &quot;understanding&quot; them; the client only knows thatthey point to a particular remote system.andM;These opaque blocks of data give the client a unique name, or handle, thatidentifies a file when it is first opened.andP;  The client can thus pass thehandle, not the file name, to the server each time it wants to access thefile.andP;  This speeds up remote access because the server isn't required toperform a directory search prior to each operation it merely refers to thehandle.andM;A Look at the RPCsandM;The RPCs used with NSF permit an application developer to program at a highlevel of abstraction.andP;  The RPC process acts as a method of interprocesscommunication over a network.andP;  NFS's RPCs and underlying XDRs can beconsidered the cornerstones for developing distributed network applicationsand network services.andP;  RPCs can be used as a message service betweenapplications or tasks within an application, with XDRs providing network-wideconsistency.andM;The RPC application interface contains three elements: the RPC servicelibrary (the top layer), the actual RPC interface, and a low-level interfacethat permits detailed control over how a procedure is carried out.andP;  Theservice library is transparent to the application and allows using RPCroutines by calling them from other applications.andM;Programmers can use the RPC interface layer itself to call remote procedureswithout being concerned by the underlying details of the network transportvehicle.andP;  At the lowest RPC level, programmers can use all of the power ofBerkeley UNIX sockets; they can control how timeouts are used, select atransport method, and so forth.andM;The XDR LanguageandM;At the presentation level, NFS's XDR protocol employs a set of C languageroutines that translates data into and out of a standard data representation(labeled XDR encoded data).andP;  There are several advantages to the C-languageapproach to data exchange.andP;  For one, data structures can be describedprecisely; and an XDR specification can be sent as text along with the datait is interpreting.andM;XDR uses two types of procedures: some that create and manipulate streams,others that translate data to and from the streams (procedures called filtersperform this translation).andP;  An XDR stream provides a standard interface to aspecific media, which can be an NFS file, a disk drive, or external filesystem, and three types of streams (standard I/O, memory, and record) aresupplied with the UNIX XDR library.andP;  Respectively, these streams connectfilters to C language I/O files, a share block of memory, andexchange/encode/decode delimited data.andM;Back to NSFandM;NSF is, thus, an application using RPC mechanisms to let a remote computeraccess files on a server over the network.andP;  While designed to operate with amultitude of operating systems, those OSs must be hierarchical; that is, theymust be made up of directories and subdirectories, with files at the lowestlevel.andP;  NSF gives access to these files without the client needing to knowhow the remote file system is structured (with or without file delimiters,such as DOS's backslash, for example).andM;NSF looks at directory structures one element at a time, delivering eachdirectory element name one-by-one minus the file delimiters.andP;  One of NSF'sstrengths is its stateless operation; it doesn't require the server to keep arecord of its transactions with a client between operations; it doesn't&quot;know&quot; whether a file is open or closed.andP;  (NetWare and LAN Manager bothrequire this record-keeping).andP;  This means internal housekeeping required,saving considerable RAM capacity.andM;Stateless operation means that every NFS operation is totally independent ofthe start to finish of another; stateless operation allows an NSF server tocrash, then come back online without losing its transaction records.andP;  Becauseof this, NFS doesn't need complex crash-recovery mechanisms to get back inoperation.andP;  In the event of a server crash, the client workstation waitsuntil the server is back online.andP;  Then, it continues operation from the pointat which it was interrupted.andM;And Now, RFSandM;ATandamp;T based its Remote File System (RFS) on the premise that remote access toa file should emulate local access, with the noteable exception that thisaccess is performed via a communications medium.andP;  RFS is thus an extension ofATandamp;T's standard UNIX file system.andP;  In this arrangement, advertised networkresources (data on disk partitions) are said to be remotely mounted onto alocal directory.andM;After the remote partition is mounted locally, all programs execute preciselyat they would locally.andP;  Naturally, remote resources may become unavailablemore often than local resources--for example, network failures can breech thecommunications line or a remote disk may fail.andM;ATandamp;T first introduced RFS (release 1.0) in 1986 in conjunction with release3.0 of UNIX V for its 3B2 computers on StarLAN networks; also introduced thenwere UNIX's Streams, which are a key component of RFS.andP;  The second revisionof RFS came in association with the release of a standard UNIX implementationfor computers based on Intel's 80386 microprocessors, and allowed RFS to runover Ethernet or other TCP/IP- and NetBIOS-based networks.andM;In allowing access to remote files, RFS uses remote system calls from insidethe UNIX kernel.andP;  When a system call is made to the local kernel and thekernel senses that the call deals with a file on a remote resource, thekernel uses its own transport provider to direct the system call to theremote resource.andP;  (In UNIX, this &quot;file&quot; can be a data file, a pipe, or otherdevice, such as a disk drive.)andP;  This implementation means a user sees onlythe standard UNIX call interface and is unaware that the call is beingexecuted on a remote machine.andM;An RFS NetworkandM;A typical RFS implementation would contain several networked UNIX computers,all running their own version of the transport provider.andP;  These computers inturn contain a variety of data depositories called resources that others onthe network can, under the proper situations, access remotely.andP;  Theseresources are said to be &quot;advertised&quot; over the network protocol to indicatetheir availability; at the other ends, remote computers mount these remoteresources on one of their own subdirectories.andM;After a resource has been mounted, it appears to be local to a end user.andP;  Theend user is left unaware of the mounting and advertising functions, which areperformed by each networked computer's administrator.andP;  This includes theaccess of remote devices such as printers, disk drives, or modems, becauseUNIX treats these resources as special files, as accessible remotely as theyare locally.andM;RFS also allows a global approach to administering an RFS network; groups ofmachines using a transport provider can be divided into domains; thosefamiliar with Microsoft's recently released LAN Manager version 2.0 willrecognize this concept, which allows managing a group of servers as thoughthey are a single entity.andP;  Each RFS domain is ruled by a domain administratorselected arbitrarily from those computers within the domain.andP;  This primarydomain machine, or name server, handles all the group's administrativechores.andM;An RFS network is thus based on a heirarchical model, with a primary/nameserver resting atop a domain, which is made up of several individual membercomputers; these member computers in turn are connected to and provideservices to a network of multiple nodes.andP;  Thus, on an RFS network made up offive domains--labeled, for example, Domain A through E--a node connected to amember computer on Domain A could access remote resources advertised by amember computer on Domain D; similarly, a node connected to Domain C couldaccess files on a disk drive located within Domain E.andM;In addition to offering facilities for establishing domain and primaryprovider names, RFS provides commands that allow advertising and mounting anddismounting of resources.andP;  It also offers access to the regular UNIX sar (forSystem Activity Reporter) command, and provides a fusage command that createsa summary of the bytes exchanged between local file systems and resources inuse by a client node.andM;Two RFS-specific options are available with the sar command.andP;  These givestatistics on server activity and cache consistency (the latter involves thefrequency a server must notify a client to purge a cache entry).andP;  The figuresresulting from the use of these sar options can assist in setting the UNIXkernel MINSERV and MAXSERV parameters.andP;  Similarly, the figures created by thefusage command can indicate where resources should be located.andP;  For example,if a particular client makes repeated requests to a server for a specificresource, it may be beneficial to move that resource to the client.andO;</TEXT></DOC>